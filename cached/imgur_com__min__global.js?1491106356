window.console=window.console||{log:function(){},warn:function(){},error:function(){}},function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Raven=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b,c,d){return JSON.stringify(a,e(b,d),c)}function e(a,b){var c=[],d=[];return null==b&&(b=function(a,b){return c[0]===b?"[Circular ~]":"[Circular ~."+d.slice(0,c.indexOf(b)).join(".")+"]"}),function(e,f){if(c.length>0){var g=c.indexOf(this);~g?c.splice(g+1):c.push(this),~g?d.splice(g,1/0,e):d.push(e),~c.indexOf(f)&&(f=b.call(this,e,f))}else c.push(f);return null==a?f:a.call(this,e,f)}}c=b.exports=d,c.getSerialize=e},{}],2:[function(a,b,c){"use strict";function d(a){this.name="RavenConfigError",this.message=a}d.prototype=new Error,d.prototype.constructor=d,b.exports=d},{}],3:[function(a,b,c){"use strict";var d=function(a,b,c){var d=a[b],e=a;if(b in a){var f="warn"===b?"warning":b;a[b]=function(){var a=[].slice.call(arguments),b=""+a.join(" "),g={level:f,logger:"console",extra:{arguments:a}};c&&c(b,g),d&&Function.prototype.apply.call(d,e,a)}}};b.exports={wrapMethod:d}},{}],4:[function(a,b,c){"use strict";function d(){return+new Date}function e(){this._hasJSON=!("object"!=typeof JSON||!JSON.stringify),this._hasDocument="undefined"!=typeof document,this._lastCapturedException=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],crossOrigin:"anonymous",collectWindowErrors:!0,maxMessageLength:0,stackTraceLimit:50,autoBreadcrumbs:!0},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=window.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=d(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=window.location,this._lastHref=this._location&&this._location.href;for(var a in this._originalConsole)this._originalConsoleMethods[a]=this._originalConsole[a]}var f=a(7),g=a(2),h=a(6),i=a(1),j=h.isFunction,k=h.isUndefined,l=h.isError,m=h.isEmptyObject,n=h.hasKey,o=h.joinRegExp,p=h.each,q=h.objectMerge,r=h.truncate,s=h.urlencode,t=h.uuid4,u=h.htmlTreeAsString,v=h.parseUrl,w=h.isString,x=h.fill,y=a(3).wrapMethod,z="source protocol user pass host port path".split(" "),A=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;e.prototype={VERSION:"3.7.0",debug:!1,TraceKit:f,config:function(a,b){var c=this;if(this._globalServer)return this._logDebug("error","Error: Raven has already been configured"),this;if(!a)return this;b&&p(b,function(a,b){"tags"===a||"extra"===a?c._globalContext[a]=b:c._globalOptions[a]=b}),this.setDSN(a),this._globalOptions.ignoreErrors.push(/^Script error\.?$/),this._globalOptions.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),this._globalOptions.ignoreErrors=o(this._globalOptions.ignoreErrors),this._globalOptions.ignoreUrls=!!this._globalOptions.ignoreUrls.length&&o(this._globalOptions.ignoreUrls),this._globalOptions.whitelistUrls=!!this._globalOptions.whitelistUrls.length&&o(this._globalOptions.whitelistUrls),this._globalOptions.includePaths=o(this._globalOptions.includePaths),this._globalOptions.maxBreadcrumbs=Math.max(0,Math.min(this._globalOptions.maxBreadcrumbs||100,100));var d={xhr:!0,console:!0,dom:!0,location:!0},e=this._globalOptions.autoBreadcrumbs;return"[object Object]"==={}.toString.call(e)?e=q(d,e):e!==!1&&(e=d),this._globalOptions.autoBreadcrumbs=e,f.collectWindowErrors=!!this._globalOptions.collectWindowErrors,this},install:function(){var a=this;return this.isSetup()&&!this._isRavenInstalled&&(f.report.subscribe(function(){a._handleOnErrorStackInfo.apply(a,arguments)}),this._instrumentTryCatch(),a._globalOptions.autoBreadcrumbs&&this._instrumentBreadcrumbs(),this._drainPlugins(),this._isRavenInstalled=!0),Error.stackTraceLimit=this._globalOptions.stackTraceLimit,this},setDSN:function(a){var b=this._parseDSN(a),c=b.path.lastIndexOf("/"),d=b.path.substr(1,c);this._dsn=a,this._globalKey=b.user,this._globalSecret=b.pass&&b.pass.substr(1),this._globalProject=b.path.substr(c+1),this._globalServer=this._getGlobalServer(b),this._globalEndpoint=this._globalServer+"/"+d+"api/"+this._globalProject+"/store/"},context:function(a,b,c){return j(a)&&(c=b||[],b=a,a=void 0),this.wrap(a,b).apply(this,c)},wrap:function(a,b,c){function d(){var d=[],f=arguments.length,g=!a||a&&a.deep!==!1;for(c&&j(c)&&c.apply(this,arguments);f--;)d[f]=g?e.wrap(a,arguments[f]):arguments[f];try{return b.apply(this,d)}catch(h){throw e._ignoreNextOnError(),e.captureException(h,a),h}}var e=this;if(k(b)&&!j(a))return a;if(j(a)&&(b=a,a=void 0),!j(b))return b;try{if(b.__raven__)return b;if(b.__raven_wrapper__)return b.__raven_wrapper__}catch(f){return b}for(var g in b)n(b,g)&&(d[g]=b[g]);return d.prototype=b.prototype,b.__raven_wrapper__=d,d.__raven__=!0,d.__inner__=b,d},uninstall:function(){return f.report.uninstall(),this._restoreBuiltIns(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},captureException:function(a,b){if(!l(a))return this.captureMessage(a,q({trimHeadFrames:1,stacktrace:!0},b));this._lastCapturedException=a;try{var c=f.computeStackTrace(a);this._handleStackInfo(c,b)}catch(d){if(a!==d)throw d}return this},captureMessage:function(a,b){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(a)){var c=q({message:a+""},b);if(b&&b.stacktrace){var d;try{throw new Error(a)}catch(e){d=e}d.name=null,b=q({fingerprint:a,trimHeadFrames:(b.trimHeadFrames||0)+1},b);var g=f.computeStackTrace(d),h=this._prepareFrames(g,b);c.stacktrace={frames:h.reverse()}}return this._send(c),this}},captureBreadcrumb:function(a){var b=q({timestamp:d()/1e3},a);return this._breadcrumbs.push(b),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function(a){var b=Array.prototype.slice.call(arguments,1);return this._plugins.push([a,b]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function(a){return this._globalContext.user=a,this},setExtraContext:function(a){return this._mergeContext("extra",a),this},setTagsContext:function(a){return this._mergeContext("tags",a),this},clearContext:function(){return this._globalContext={},this},getContext:function(){return JSON.parse(i(this._globalContext))},setEnvironment:function(a){return this._globalOptions.environment=a,this},setRelease:function(a){return this._globalOptions.release=a,this},setDataCallback:function(a){var b=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=j(a)?function(c){return a(c,b)}:a,this},setShouldSendCallback:function(a){var b=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=j(a)?function(c){return a(c,b)}:a,this},setTransport:function(a){return this._globalOptions.transport=a,this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){return!!this._hasJSON&&(!!this._globalServer||(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),!1))},afterLoad:function(){var a=window.RavenConfig;a&&this.config(a.dsn,a.config).install()},showReportDialog:function(a){if(window.document){a=a||{};var b=a.eventId||this.lastEventId();if(!b)throw new g("Missing eventId");var c=a.dsn||this._dsn;if(!c)throw new g("Missing DSN");var d=encodeURIComponent,e="";e+="?eventId="+d(b),e+="&dsn="+d(c);var f=a.user||this._globalContext.user;f&&(f.name&&(e+="&name="+d(f.name)),f.email&&(e+="&email="+d(f.email)));var h=this._getGlobalServer(this._parseDSN(c)),i=document.createElement("script");i.async=!0,i.src=h+"/api/embed/error-page/"+e,(document.head||document.body).appendChild(i)}},_ignoreNextOnError:function(){var a=this;this._ignoreOnError+=1,setTimeout(function(){a._ignoreOnError-=1})},_triggerEvent:function(a,b){var c,d;if(this._hasDocument){b=b||{},a="raven"+a.substr(0,1).toUpperCase()+a.substr(1),document.createEvent?(c=document.createEvent("HTMLEvents"),c.initEvent(a,!0,!0)):(c=document.createEventObject(),c.eventType=a);for(d in b)n(b,d)&&(c[d]=b[d]);if(document.createEvent)document.dispatchEvent(c);else try{document.fireEvent("on"+c.eventType.toLowerCase(),c)}catch(e){}}},_breadcrumbEventHandler:function(a){var b=this;return function(c){if(b._keypressTimeout=null,b._lastCapturedEvent!==c){b._lastCapturedEvent=c;var d,e=c.target;try{d=u(e)}catch(f){d="<unknown>"}b.captureBreadcrumb({category:"ui."+a,message:d})}}},_keypressEventHandler:function(){var a=this,b=1e3;return function(c){var d=c.target,e=d&&d.tagName;if(e&&("INPUT"===e||"TEXTAREA"===e)){var f=a._keypressTimeout;f||a._breadcrumbEventHandler("input")(c),clearTimeout(f),a._keypressTimeout=setTimeout(function(){a._keypressTimeout=null},b)}}},_captureUrlChange:function(a,b){var c=v(this._location.href),d=v(b),e=v(a);this._lastHref=b,c.protocol===d.protocol&&c.host===d.host&&(b=d.relative),c.protocol===e.protocol&&c.host===e.host&&(a=e.relative),this.captureBreadcrumb({category:"navigation",data:{to:b,from:a}})},_instrumentTryCatch:function(){function a(a){return function(b,d){for(var e=new Array(arguments.length),f=0;f<e.length;++f)e[f]=arguments[f];var g=e[0];return j(g)&&(e[0]=c.wrap(g)),a.apply?a.apply(this,e):a(e[0],e[1])}}function b(a){var b=window[a]&&window[a].prototype;b&&b.hasOwnProperty&&b.hasOwnProperty("addEventListener")&&(x(b,"addEventListener",function(b){return function(d,f,g,h){try{f&&f.handleEvent&&(f.handleEvent=c.wrap(f.handleEvent))}catch(i){}var j;return e&&e.dom&&("EventTarget"===a||"Node"===a)&&("click"===d?j=c._breadcrumbEventHandler(d):"keypress"===d&&(j=c._keypressEventHandler())),b.call(this,d,c.wrap(f,void 0,j),g,h)}},d),x(b,"removeEventListener",function(a){return function(b,c,d,e){try{c=c&&(c.__raven_wrapper__?c.__raven_wrapper__:c)}catch(f){}return a.call(this,b,c,d,e)}},d))}var c=this,d=c._wrappedBuiltIns,e=this._globalOptions.autoBreadcrumbs;x(window,"setTimeout",a,d),x(window,"setInterval",a,d),window.requestAnimationFrame&&x(window,"requestAnimationFrame",function(a){return function(b){return a(c.wrap(b))}},d);for(var f=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],g=0;g<f.length;g++)b(f[g]);var h=window.jQuery||window.$;h&&h.fn&&h.fn.ready&&x(h.fn,"ready",function(a){return function(b){return a.call(this,c.wrap(b))}},d)},_instrumentBreadcrumbs:function(){function a(a,c){a in c&&j(c[a])&&x(c,a,function(a){return b.wrap(a)})}var b=this,c=this._globalOptions.autoBreadcrumbs,d=b._wrappedBuiltIns;if(c.xhr&&"XMLHttpRequest"in window){var e=XMLHttpRequest.prototype;x(e,"open",function(a){return function(c,d){return w(d)&&d.indexOf(b._globalKey)===-1&&(this.__raven_xhr={method:c,url:d,status_code:null}),a.apply(this,arguments)}},d),x(e,"send",function(c){return function(d){function e(){if(f.__raven_xhr&&(1===f.readyState||4===f.readyState)){try{f.__raven_xhr.status_code=f.status}catch(a){}b.captureBreadcrumb({type:"http",category:"xhr",data:f.__raven_xhr})}}for(var f=this,g=["onload","onerror","onprogress"],h=0;h<g.length;h++)a(g[h],f);return"onreadystatechange"in f&&j(f.onreadystatechange)?x(f,"onreadystatechange",function(a){return b.wrap(a,void 0,e)}):f.onreadystatechange=e,c.apply(this,arguments)}},d)}c.dom&&this._hasDocument&&(document.addEventListener?(document.addEventListener("click",b._breadcrumbEventHandler("click"),!1),document.addEventListener("keypress",b._keypressEventHandler(),!1)):(document.attachEvent("onclick",b._breadcrumbEventHandler("click")),document.attachEvent("onkeypress",b._keypressEventHandler())));var f=window.chrome,g=f&&f.app&&f.app.runtime,h=!g&&window.history&&history.pushState;if(c.location&&h){var i=window.onpopstate;window.onpopstate=function(){var a=b._location.href;if(b._captureUrlChange(b._lastHref,a),i)return i.apply(this,arguments)},x(history,"pushState",function(a){return function(){var c=arguments.length>2?arguments[2]:void 0;return c&&b._captureUrlChange(b._lastHref,c+""),a.apply(this,arguments)}},d)}if(c.console&&"console"in window&&console.log){var k=function(a,c){b.captureBreadcrumb({message:a,level:c.level,category:"console"})};p(["debug","info","warn","error","log"],function(a,b){y(console,b,k)})}},_restoreBuiltIns:function(){for(var a;this._wrappedBuiltIns.length;){a=this._wrappedBuiltIns.shift();var b=a[0],c=a[1],d=a[2];b[c]=d}},_drainPlugins:function(){var a=this;p(this._plugins,function(b,c){var d=c[0],e=c[1];d.apply(a,[a].concat(e))})},_parseDSN:function(a){var b=A.exec(a),c={},d=7;try{for(;d--;)c[z[d]]=b[d]||""}catch(e){throw new g("Invalid DSN: "+a)}if(c.pass&&!this._globalOptions.allowSecretKey)throw new g("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return c},_getGlobalServer:function(a){var b="//"+a.host+(a.port?":"+a.port:"");return a.protocol&&(b=a.protocol+":"+b),b},_handleOnErrorStackInfo:function(){this._ignoreOnError||this._handleStackInfo.apply(this,arguments)},_handleStackInfo:function(a,b){var c=this._prepareFrames(a,b);this._triggerEvent("handle",{stackInfo:a,options:b}),this._processException(a.name,a.message,a.url,a.lineno,c,b)},_prepareFrames:function(a,b){var c=this,d=[];if(a.stack&&a.stack.length&&(p(a.stack,function(a,b){var e=c._normalizeFrame(b);e&&d.push(e)}),b&&b.trimHeadFrames))for(var e=0;e<b.trimHeadFrames&&e<d.length;e++)d[e].in_app=!1;return d=d.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(a){if(a.url){var b={filename:a.url,lineno:a.line,colno:a.column,"function":a.func||"?"};return b.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(b.filename)||/(Raven|TraceKit)\./.test(b["function"])||/raven\.(min\.)?js$/.test(b.filename)),b}},_processException:function(a,b,c,d,e,f){var g;if((!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(b))&&(b+="",e&&e.length?(c=e[0].filename||c,e.reverse(),g={frames:e}):c&&(g={frames:[{filename:c,lineno:d,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(c))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(c)))){var h=q({exception:{values:[{type:a,value:b,stacktrace:g}]},culprit:c},f);this._send(h)}},_trimPacket:function(a){var b=this._globalOptions.maxMessageLength;if(a.message&&(a.message=r(a.message,b)),a.exception){var c=a.exception.values[0];c.value=r(c.value,b)}return a},_getHttpData:function(){if(this._hasDocument&&document.location&&document.location.href){var a={headers:{"User-Agent":navigator.userAgent}};return a.url=document.location.href,document.referrer&&(a.headers.Referer=document.referrer),a}},_send:function(a){var b=this._globalOptions,c={project:this._globalProject,logger:b.logger,platform:"javascript"},e=this._getHttpData();e&&(c.request=e),a.trimHeadFrames&&delete a.trimHeadFrames,a=q(c,a),a.tags=q(q({},this._globalContext.tags),a.tags),a.extra=q(q({},this._globalContext.extra),a.extra),a.extra["session:duration"]=d()-this._startTime,this._breadcrumbs&&this._breadcrumbs.length>0&&(a.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),m(a.tags)&&delete a.tags,this._globalContext.user&&(a.user=this._globalContext.user),b.environment&&(a.environment=b.environment),b.release&&(a.release=b.release),b.serverName&&(a.server_name=b.serverName),j(b.dataCallback)&&(a=b.dataCallback(a)||a),a&&!m(a)&&(j(b.shouldSendCallback)&&!b.shouldSendCallback(a)||this._sendProcessedPayload(a))},_sendProcessedPayload:function(a,b){var c=this,d=this._globalOptions;if(this._lastEventId=a.event_id||(a.event_id=t()),a=this._trimPacket(a),this._logDebug("debug","Raven about to send:",a),this.isSetup()){var e={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(e.sentry_secret=this._globalSecret);var f=a.exception&&a.exception.values[0];this.captureBreadcrumb({category:"sentry",message:f?(f.type?f.type+": ":"")+f.value:a.message,event_id:a.event_id,level:a.level||"error"});var g=this._globalEndpoint;(d.transport||this._makeRequest).call(this,{url:g,auth:e,data:a,options:d,onSuccess:function(){c._triggerEvent("success",{data:a,src:g}),b&&b()},onError:function(d){c._triggerEvent("failure",{data:a,src:g}),d=d||new Error("Raven send failed (no additional details provided)"),b&&b(d)}})}},_makeRequest:function(a){function b(){200===c.status?a.onSuccess&&a.onSuccess():a.onError&&a.onError(new Error("Sentry error code: "+c.status))}var c=new XMLHttpRequest,d="withCredentials"in c||"undefined"!=typeof XDomainRequest;if(d){var e=a.url;"withCredentials"in c?c.onreadystatechange=function(){4===c.readyState&&b()}:(c=new XDomainRequest,e=e.replace(/^https?:/,""),c.onload=b),c.open("POST",e+"?"+s(a.auth)),c.send(i(a.data))}},_logDebug:function(a){this._originalConsoleMethods[a]&&this.debug&&Function.prototype.apply.call(this._originalConsoleMethods[a],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function(a,b){k(b)?delete this._globalContext[a]:this._globalContext[a]=q(this._globalContext[a]||{},b)}},e.prototype.setUser=e.prototype.setUserContext,e.prototype.setReleaseContext=e.prototype.setRelease,b.exports=e},{1:1,2:2,3:3,6:6,7:7}],5:[function(a,b,c){"use strict";var d=a(4),e=window.Raven,f=new d;f.noConflict=function(){return window.Raven=e,f},f.afterLoad(),b.exports=f},{4:4}],6:[function(a,b,c){"use strict";function d(a){return void 0===a}function e(a){return"function"==typeof a}function f(a){return"[object String]"===u.toString.call(a)}function g(a){return"object"==typeof a&&null!==a}function h(a){for(var b in a)return!1;return!0}function i(a){var b=u.toString.call(a);return g(a)&&"[object Error]"===b||"[object Exception]"===b||a instanceof Error}function j(a,b){var c,e;if(d(a.length))for(c in a)m(a,c)&&b.call(null,c,a[c]);else if(e=a.length)for(c=0;c<e;c++)b.call(null,c,a[c])}function k(a,b){return b?(j(b,function(b,c){a[b]=c}),a):a}function l(a,b){return!b||a.length<=b?a:a.substr(0,b)+"â€¦"}function m(a,b){return u.hasOwnProperty.call(a,b)}function n(a){for(var b,c=[],d=0,e=a.length;d<e;d++)b=a[d],f(b)?c.push(b.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):b&&b.source&&c.push(b.source);return new RegExp(c.join("|"),"i")}function o(a){var b=[];return j(a,function(a,c){b.push(encodeURIComponent(a)+"="+encodeURIComponent(c))}),b.join("&")}function p(a){var b=a.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!b)return{};var c=b[6]||"",d=b[8]||"";return{protocol:b[2],host:b[4],path:b[5],relative:b[5]+c+d}}function q(){var a=window.crypto||window.msCrypto;if(!d(a)&&a.getRandomValues){var b=new Uint16Array(8);a.getRandomValues(b),b[3]=4095&b[3]|16384,b[4]=16383&b[4]|32768;var c=function(a){for(var b=a.toString(16);b.length<4;)b="0"+b;return b};return c(b[0])+c(b[1])+c(b[2])+c(b[3])+c(b[4])+c(b[5])+c(b[6])+c(b[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})}function r(a){for(var b,c=5,d=80,e=[],f=0,g=0,h=" > ",i=h.length;a&&f++<c&&(b=s(a),!("html"===b||f>1&&g+e.length*i+b.length>=d));)e.push(b),g+=b.length,a=a.parentNode;return e.reverse().join(h)}function s(a){var b,c,d,e,g,h=[];if(!a||!a.tagName)return"";if(h.push(a.tagName.toLowerCase()),a.id&&h.push("#"+a.id),b=a.className,b&&f(b))for(c=b.split(" "),g=0;g<c.length;g++)h.push("."+c[g]);var i=["type","name","title","alt"];for(g=0;g<i.length;g++)d=i[g],e=a.getAttribute(d),e&&h.push("["+d+'="'+e+'"]');return h.join("")}function t(a,b,c,d){var e=a[b];a[b]=c(e),d&&d.push([a,b,e])}var u=Object.prototype;b.exports={isUndefined:d,isFunction:e,isString:f,isObject:g,isEmptyObject:h,isError:i,each:j,objectMerge:k,truncate:l,hasKey:m,joinRegExp:n,urlencode:o,uuid4:q,htmlTreeAsString:r,htmlElementAsString:s,parseUrl:p,fill:t}},{}],7:[function(a,b,c){"use strict";function d(){return"undefined"==typeof document?"":document.location.href}var e=a(6),f=e.hasKey,g=e.isString,h=e.isUndefined,i={collectWindowErrors:!0,debug:!1},j=[].slice,k="?",l=/^(?:Uncaught (?:exception: )?)?((?:Eval|Internal|Range|Reference|Syntax|Type|URI)Error): ?(.*)$/;i.report=function(){function a(a){m(),s.push(a)}function b(a){for(var b=s.length-1;b>=0;--b)s[b]===a&&s.splice(b,1)}function c(){n(),s=[]}function e(a,b){var c=null;if(!b||i.collectWindowErrors){for(var d in s)if(f(s,d))try{s[d].apply(null,[a].concat(j.call(arguments,2)))}catch(e){c=e}if(c)throw c}}function h(a,b,c,f,h){var j=null;if(v)i.computeStackTrace.augmentStackTraceWithInitialElement(v,b,c,a),o();else if(h)j=i.computeStackTrace(h),e(j,!0);else{var m,n={url:b,line:c,column:f},p=void 0,r=a;if(g(a)){var m=a.match(l);m&&(p=m[1],r=m[2])}n.func=k,j={name:p,message:r,url:d(),stack:[n]},e(j,!0)}return!!q&&q.apply(this,arguments)}function m(){r||(q=window.onerror,window.onerror=h,r=!0)}function n(){r&&(window.onerror=q,r=!1,q=void 0)}function o(){var a=v,b=t;t=null,v=null,u=null,e.apply(null,[a,!1].concat(b))}function p(a,b){var c=j.call(arguments,1);if(v){if(u===a)return;o()}var d=i.computeStackTrace(a);if(v=d,u=a,t=c,window.setTimeout(function(){u===a&&o()},d.incomplete?2e3:0),b!==!1)throw a}var q,r,s=[],t=null,u=null,v=null;return p.subscribe=a,p.unsubscribe=b,p.uninstall=c,p}(),i.computeStackTrace=function(){function a(a){if(!h(a.stack)&&a.stack){for(var b,c,e=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,f=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,g=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,i=a.stack.split("\n"),j=[],l=(/^(.*) is undefined$/.exec(a.message),0),m=i.length;l<m;++l){if(b=e.exec(i[l])){var n=b[2]&&b[2].indexOf("native")!==-1;c={url:n?null:b[2],func:b[1]||k,args:n?[b[2]]:[],line:b[3]?+b[3]:null,column:b[4]?+b[4]:null}}else if(b=g.exec(i[l]))c={url:b[2],func:b[1]||k,args:[],line:+b[3],column:b[4]?+b[4]:null};else{if(!(b=f.exec(i[l])))continue;c={url:b[3],func:b[1]||k,args:b[2]?b[2].split(","):[],line:b[4]?+b[4]:null,column:b[5]?+b[5]:null}}!c.func&&c.line&&(c.func=k),j.push(c)}return j.length?(j[0].column||h(a.columnNumber)||(j[0].column=a.columnNumber+1),{name:a.name,message:a.message,url:d(),stack:j}):null}}function b(a,b,c,d){var e={url:b,line:c};if(e.url&&e.line){if(a.incomplete=!1,e.func||(e.func=k),a.stack.length>0&&a.stack[0].url===e.url){if(a.stack[0].line===e.line)return!1;if(!a.stack[0].line&&a.stack[0].func===e.func)return a.stack[0].line=e.line,!1}return a.stack.unshift(e),a.partial=!0,!0}return a.incomplete=!0,!1}function c(a,f){for(var g,h,j=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,l=[],m={},n=!1,o=c.caller;o&&!n;o=o.caller)if(o!==e&&o!==i.report){if(h={url:null,func:k,line:null,column:null},o.name?h.func=o.name:(g=j.exec(o.toString()))&&(h.func=g[1]),"undefined"==typeof h.func)try{h.func=g.input.substring(0,g.input.indexOf("{"))}catch(p){}m[""+o]?n=!0:m[""+o]=!0,l.push(h)}f&&l.splice(0,f);var q={name:a.name,message:a.message,url:d(),stack:l};return b(q,a.sourceURL||a.fileName,a.line||a.lineNumber,a.message||a.description),q}function e(b,e){var f=null;e=null==e?0:+e;try{if(f=a(b))return f}catch(g){if(i.debug)throw g}try{if(f=c(b,e+1))return f}catch(g){if(i.debug)throw g}return{name:b.name,message:b.message,url:d()}}return e.augmentStackTraceWithInitialElement=b,e.computeStackTraceFromStackProp=a,e}(),b.exports=i},{6:6}]},{},[5])(5)}),window.sentry_dsn&&Raven.config(window.sentry_dsn,{whitelistUrls:[/([a-z]{1,9})*?\.?(imgur(-dev)?.com)/],shouldSendCallback:function(a){return 100*Math.random()<=10}}).install(),void 0===jQuery.migrateMute&&(jQuery.migrateMute=!0),function(a,b,c){function d(c){var d=b.console;f[c]||(f[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn("JQMIGRATE: "+c),a.migrateTrace&&d.trace&&d.trace()))}function e(b,e,f,g){if(Object.defineProperty)try{return Object.defineProperty(b,e,{configurable:!0,enumerable:!0,get:function(){return d(g),f},set:function(a){d(g),f=a}}),c}catch(h){}a._definePropertyBroken=!0,b[e]=f}var f={};a.migrateWarnings=[],!a.migrateMute&&b.console&&b.console.log&&b.console.log("JQMIGRATE: Logging is active"),a.migrateTrace===c&&(a.migrateTrace=!0),a.migrateReset=function(){f={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&d("jQuery is not compatible with Quirks Mode");var g=a("<input/>",{size:1}).attr("size")&&a.attrFn,h=a.attr,i=a.attrHooks.value&&a.attrHooks.value.get||function(){return null},j=a.attrHooks.value&&a.attrHooks.value.set||function(){return c},k=/^(?:input|button)$/i,l=/^[238]$/,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:checked|selected)$/i;e(a,"attrFn",g||{},"jQuery.attrFn is deprecated"),a.attr=function(b,e,f,i){var j=e.toLowerCase(),o=b&&b.nodeType;return i&&(4>h.length&&d("jQuery.fn.attr( props, pass ) is deprecated"),b&&!l.test(o)&&(g?e in g:a.isFunction(a.fn[e])))?a(b)[e](f):("type"===e&&f!==c&&k.test(b.nodeName)&&b.parentNode&&d("Can't change the 'type' of an input or button in IE 6/7/8"),!a.attrHooks[j]&&m.test(j)&&(a.attrHooks[j]={get:function(b,d){var e,f=a.prop(b,d);return f===!0||"boolean"!=typeof f&&(e=b.getAttributeNode(d))&&e.nodeValue!==!1?d.toLowerCase():c},set:function(b,c,d){var e;return c===!1?a.removeAttr(b,d):(e=a.propFix[d]||d,e in b&&(b[e]=!0),b.setAttribute(d,d.toLowerCase())),d}},n.test(j)&&d("jQuery.fn.attr('"+j+"') may use property instead of attribute")),h.call(a,b,e,f))},a.attrHooks.value={get:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?i.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value') no longer gets properties"),b in a?a.value:null)},set:function(a,b){var e=(a.nodeName||"").toLowerCase();return"button"===e?j.apply(this,arguments):("input"!==e&&"option"!==e&&d("jQuery.fn.attr('value', val) no longer sets properties"),a.value=b,c)}};var o,p,q=a.fn.init,r=a.parseJSON,s=/^([^<]*)(<[\w\W]+>)([^>]*)$/;a.fn.init=function(b,c,e){var f;return b&&"string"==typeof b&&!a.isPlainObject(c)&&(f=s.exec(a.trim(b)))&&f[0]&&("<"!==b.charAt(0)&&d("$(html) HTML strings must start with '<' character"),f[3]&&d("$(html) HTML text after last tag is ignored"),"#"===f[0].charAt(0)&&(d("HTML string cannot start with a '#' character"),a.error("JQMIGRATE: Invalid selector string (XSS)")),c&&c.context&&(c=c.context),a.parseHTML)?q.call(this,a.parseHTML(f[2],c,!0),c,e):q.apply(this,arguments)},a.fn.init.prototype=a.fn,a.parseJSON=function(a){return a||null===a?r.apply(this,arguments):(d("jQuery.parseJSON requires a valid JSON string"),null)},a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a.browser||(o=a.uaMatch(navigator.userAgent),p={},o.browser&&(p[o.browser]=!0,p.version=o.version),p.chrome?p.webkit=!0:p.webkit&&(p.safari=!0),a.browser=p),e(a,"browser",a.browser,"jQuery.browser is deprecated"),a.sub=function(){function b(a,c){return new b.fn.init(a,c)}a.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(d,e){return e&&e instanceof a&&!(e instanceof b)&&(e=b(e)),a.fn.init.call(this,d,e,c)},b.fn.init.prototype=b.fn;var c=b(document);return d("jQuery.sub() is deprecated"),b},a.ajaxSetup({converters:{"text json":a.parseJSON}});var t=a.fn.data;a.fn.data=function(b){var e,f,g=this[0];return!g||"events"!==b||1!==arguments.length||(e=a.data(g,b),f=a._data(g,b),e!==c&&e!==f||f===c)?t.apply(this,arguments):(d("Use of jQuery.fn.data('events') is deprecated"),f)};var u=/\/(java|ecma)script/i,v=a.fn.andSelf||a.fn.addBack;a.fn.andSelf=function(){return d("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),v.apply(this,arguments)},a.clean||(a.clean=function(b,e,f,g){e=e||document,e=!e.nodeType&&e[0]||e,e=e.ownerDocument||e,d("jQuery.clean() is deprecated");var h,i,j,k,l=[];if(a.merge(l,a.buildFragment(b,e).childNodes),f)for(j=function(a){return!a.type||u.test(a.type)?g?g.push(a.parentNode?a.parentNode.removeChild(a):a):f.appendChild(a):c},h=0;null!=(i=l[h]);h++)a.nodeName(i,"script")&&j(i)||(f.appendChild(i),i.getElementsByTagName!==c&&(k=a.grep(a.merge([],i.getElementsByTagName("script")),j),l.splice.apply(l,[h+1,0].concat(k)),h+=k.length));return l});var w=a.event.add,x=a.event.remove,y=a.event.trigger,z=a.fn.toggle,A=a.fn.live,B=a.fn.die,C="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",D=RegExp("\\b(?:"+C+")\\b"),E=/(?:^|\s)hover(\.\S+|)\b/,F=function(b){return"string"!=typeof b||a.event.special.hover?b:(E.test(b)&&d("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),b&&b.replace(E,"mouseenter$1 mouseleave$1"))};a.event.props&&"attrChange"!==a.event.props[0]&&a.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),a.event.dispatch&&e(a.event,"handle",a.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),a.event.add=function(a,b,c,e,f){a!==document&&D.test(b)&&d("AJAX events should be attached to document: "+b),w.call(this,a,F(b||""),c,e,f)},a.event.remove=function(a,b,c,d,e){x.call(this,a,F(b)||"",c,d,e)},a.fn.error=function(){var a=Array.prototype.slice.call(arguments,0);return d("jQuery.fn.error() is deprecated"),a.splice(0,0,"error"),arguments.length?this.bind.apply(this,a):(this.triggerHandler.apply(this,a),this)},a.fn.toggle=function(b,c){if(!a.isFunction(b)||!a.isFunction(c))return z.apply(this,arguments);d("jQuery.fn.toggle(handler, handler...) is deprecated");var e=arguments,f=b.guid||a.guid++,g=0,h=function(c){var d=(a._data(this,"lastToggle"+b.guid)||0)%g;return a._data(this,"lastToggle"+b.guid,d+1),c.preventDefault(),e[d].apply(this,arguments)||!1};for(h.guid=f;e.length>g;)e[g++].guid=f;return this.click(h)},a.fn.live=function(b,c,e){return d("jQuery.fn.live() is deprecated"),A?A.apply(this,arguments):(a(this.context).on(b,this.selector,c,e),this)},a.fn.die=function(b,c){return d("jQuery.fn.die() is deprecated"),B?B.apply(this,arguments):(a(this.context).off(b,this.selector||"**",c),this)},a.event.trigger=function(a,b,c,e){return c||D.test(a)||d("Global events are undocumented and deprecated"),y.call(this,a,b,c||document,e)},a.each(C.split("|"),function(b,c){a.event.special[c]={setup:function(){var b=this;return b!==document&&(a.event.add(document,c+"."+a.guid,function(){a.event.trigger(c,null,b,!0)}),a._data(this,c,a.guid++)),!1},teardown:function(){return this!==document&&a.event.remove(document,c+"."+a._data(this,c)),!1}}})}(jQuery,window),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery);}(function(a){if(!a.support.cors&&a.ajaxTransport&&window.XDomainRequest){var b=/^https?:\/\//i,c=/^get|post$/i,d=new RegExp("^"+location.protocol,"i");a.ajaxTransport("* text html xml json",function(e,f,g){if(e.crossDomain&&e.async&&c.test(e.type)&&b.test(e.url)&&d.test(e.url)){var h=null;return{send:function(b,c){var d="",g=(f.dataType||"").toLowerCase();h=new XDomainRequest,/^\d+$/.test(f.timeout)&&(h.timeout=f.timeout),h.ontimeout=function(){c(500,"timeout")},h.onload=function(){var b="Content-Length: "+h.responseText.length+"\r\nContent-Type: "+h.contentType,d={code:200,message:"success"},e={text:h.responseText};try{if("html"===g||/text\/html/i.test(h.contentType))e.html=h.responseText;else if("json"===g||"text"!==g&&/\/json/i.test(h.contentType))try{e.json=a.parseJSON(h.responseText)}catch(f){d.code=500,d.message="parseerror"}else if("xml"===g||"text"!==g&&/\/xml/i.test(h.contentType)){var i=new ActiveXObject("Microsoft.XMLDOM");i.async=!1;try{i.loadXML(h.responseText)}catch(f){i=void 0}if(!i||!i.documentElement||i.getElementsByTagName("parsererror").length)throw d.code=500,d.message="parseerror","Invalid XML: "+h.responseText;e.xml=i}}catch(j){throw j}finally{c(d.code,d.message,e,b)}},h.onprogress=function(){},h.onerror=function(){c(500,"error",{text:h.responseText})},f.data&&(d="string"===a.type(f.data)?f.data:a.param(f.data)),h.open(e.type,e.url),h.send(d)},abort:function(){h&&h.abort()}}}})}});var humanMsg={className:void 0,remove:null,setup:function(a,b,c,d){void 0==d?humanMsg.msgID="humanMsg":humanMsg.msgID=d,void 0==a&&(a="body"),humanMsg.msgOpacity=1,void 0!=c&&(humanMsg.msgOpacity=parseFloat(c)),jQuery(a).append('<div id="'+humanMsg.msgID+'" class="humanMsg"><p></p></div>')},displayMsg:function(a,b,c,d){if(""!=a){clearTimeout(humanMsg.t2),jQuery("#"+humanMsg.msgID+" p").html(a);var e=jQuery("#"+humanMsg.msgID).show();d?e.css({opacity:humanMsg.msgOpacity}):e.animate({opacity:humanMsg.msgOpacity},200),this.toggleClasses(e,b),humanMsg.remove=function(){humanMsg.removeMsg(c)},humanMsg.t1=setTimeout(function(){humanMsg.bindEvents(c)},1500),humanMsg.t2=setTimeout(humanMsg.remove,4e3)}},bindEvents:function(a){jQuery(window).mousemove(humanMsg.remove).click(humanMsg.remove).keypress(humanMsg.remove)},removeMsg:function(a){jQuery(window).unbind("mousemove").unbind("click").unbind("keypress"),clearTimeout(humanMsg.t1),clearTimeout(humanMsg.t2),$("#"+humanMsg.msgID).fadeOut(function(){"function"==typeof a&&a()})},toggleClasses:function(a,b){void 0!==this.className&&(a.removeClass(this.className),this.className=void 0),void 0!==b&&(a.addClass(b),this.className=b)}};jQuery(document).ready(function(){humanMsg.setup()}),function(a,b,c){function d(c,d,e){var f=b.createElement(c);return d&&(f.id=aa+d),e&&(f.style.cssText=e),a(f)}function e(){return c.innerHeight?c.innerHeight:a(c).height()}function f(b,c){c!==Object(c)&&(c={}),this.cache={},this.el=b,this.value=function(b){var d;return void 0===this.cache[b]&&(d=a(this.el).attr("data-cbox-"+b),void 0!==d?this.cache[b]=d:void 0!==c[b]?this.cache[b]=c[b]:void 0!==$[b]&&(this.cache[b]=$[b])),this.cache[b]},this.get=function(b){var c=this.value(b);return a.isFunction(c)?c.call(this.el,this):c}}function g(a){var b=B.length,c=(S+a)%b;return c<0?b+c:c}function h(a,b){return Math.round((/%/.test(a)?("x"===b?C.width():e())/100:1)*parseInt(a,10))}function i(a,b){return a.get("photo")||a.get("photoRegex").test(b)}function j(a,b){return a.get("retinaUrl")&&c.devicePixelRatio>1?b.replace(a.get("photoRegex"),a.get("retinaSuffix")):b}function k(a,b){return a.get("video")||a.get("videoRegex").test(b)}function l(a){"contains"in u[0]&&!u[0].contains(a.target)&&a.target!==t[0]&&(a.stopPropagation(),u.focus())}function m(a){m.str!==a&&(u.add(t).removeClass(m.str).addClass(a),m.str=a)}function n(b){S=0,b&&b!==!1&&"nofollow"!==b?(B=a("."+ba).filter(function(){var c=a.data(this,_),d=new f(this,c);return d.get("rel")===b}),S=B.index(N.el),S===-1&&(B=B.add(N.el),S=B.length-1)):B=a(N.el)}function o(c){a(b).trigger(c),ia.triggerHandler(c)}function p(c){var e;if(!W){if(e=a(c).data(_),N=new f(c,e),n(N.get("rel")),!U){U=V=!0,m(N.get("className")),u.css({visibility:"hidden",display:"block",opacity:""}),D=d(ja,"LoadedContent","width:0; height:0; overflow:hidden; visibility:hidden"),w.css({width:"",height:""}).append(D),O=x.height()+A.height()+w.outerHeight(!0)-w.height(),P=y.width()+z.width()+w.outerWidth(!0)-w.width(),Q=D.outerHeight(!0),R=D.outerWidth(!0);var g=h(N.get("initialWidth"),"x"),i=h(N.get("initialHeight"),"y"),j=N.get("maxWidth"),k=N.get("maxHeight");N.w=(j!==!1?Math.min(g,h(j,"x")):g)-R-P,N.h=(k!==!1?Math.min(i,h(k,"y")):i)-Q-O,D.css({width:"",height:N.h}),Y.position(),o(ca),N.get("onOpen"),M.add(G).hide(),u.focus(),N.get("trapFocus")&&b.addEventListener&&(b.addEventListener("focus",l,!0),ia.one(ga,function(){b.removeEventListener("focus",l,!0)})),N.get("returnFocus")&&ia.one(ga,function(){a(N.el).focus()})}var p=parseFloat(N.get("opacity"));t.css({opacity:p===p?p:"",cursor:N.get("overlayClose")?"pointer":"",visibility:"visible"}).show(),N.get("closeButton")?L.html(N.get("close")).appendTo(w):L.appendTo("<div/>"),s()}}function q(){u||(Z=!1,C=a(c),u=d(ja).attr({id:_,"class":a.support.opacity===!1?aa+"IE":"",role:"dialog",tabindex:"-1"}).hide(),t=d(ja,"Overlay").hide(),F=a([d(ja,"LoadingOverlay")[0],d(ja,"LoadingGraphic")[0]]),v=d(ja,"Wrapper"),w=d(ja,"Content").append(G=d(ja,"Title"),H=d(ja,"Current"),K=a('<button type="button"/>').attr({id:aa+"Previous"}),J=a('<button type="button"/>').attr({id:aa+"Next"}),I=d("button","Slideshow"),F),L=a('<button type="button"/>').attr({id:aa+"Close","class":"icon-x"}),v.append(d(ja).append(d(ja,"TopLeft"),x=d(ja,"TopCenter"),d(ja,"TopRight")),d(ja,!1,"clear:left").append(y=d(ja,"MiddleLeft"),w,z=d(ja,"MiddleRight")),d(ja,!1,"clear:left").append(d(ja,"BottomLeft"),A=d(ja,"BottomCenter"),d(ja,"BottomRight"))).find("div div").css({"float":"left"}),E=d(ja,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),M=J.add(K).add(H).add(I)),b.body&&!u.parent().length&&a(b.body).append(t,u.append(v,E))}function r(){function c(a){a.which>1||a.shiftKey||a.altKey||a.metaKey||a.ctrlKey||(a.preventDefault(),p(this))}return!!u&&(Z||(Z=!0,J.click(function(){Y.next()}),K.click(function(){Y.prev()}),L.click(function(){Y.close()}),t.click(function(){N.get("overlayClose")&&Y.close()}),a(b).bind("keydown."+aa,function(a){var b=a.keyCode;U&&N.get("escKey")&&27===b&&(a.preventDefault(),Y.close()),U&&N.get("arrowKey")&&B[1]&&!a.altKey&&(37===b?(a.preventDefault(),K.click()):39===b&&(a.preventDefault(),J.click()))}),a.isFunction(a.fn.on)?a(b).on("click."+aa,"."+ba,c):a("."+ba).live("click."+aa,c)),!0)}function s(){var e,f,g,l=Y.prep,m=++ka;if(V=!0,T=!1,video=!1,o(ha),o(da),N.get("onLoad"),N.h=N.get("height")?h(N.get("height"),"y")-Q-O:N.get("innerHeight")&&h(N.get("innerHeight"),"y"),N.w=N.get("width")?h(N.get("width"),"x")-R-P:N.get("innerWidth")&&h(N.get("innerWidth"),"x"),N.mw=N.w,N.mh=N.h,N.get("maxWidth")&&(N.mw=h(N.get("maxWidth"),"x")-R-P,N.mw=N.w&&N.w<N.mw?N.w:N.mw),N.get("maxHeight")&&(N.mh=h(N.get("maxHeight"),"y")-Q-O,N.mh=N.h&&N.h<N.mh?N.h:N.mh),e=N.get("href"),X=setTimeout(function(){F.show()},100),N.get("inline")){var n=a(e);g=a("<div>").hide().insertBefore(n),ia.one(ha,function(){g.replaceWith(n)}),l(n)}else N.get("iframe")?l(" "):N.get("html")?l(N.get("html")):i(N,e)?(e=j(N,e),T=new Image,a(T).addClass(aa+"Photo").bind("error",function(){l(d(ja,"Error").html(N.get("imgError")))}).one("load",function(){m===ka&&setTimeout(function(){var b;a.each(["alt","longdesc","aria-describedby"],function(b,c){var d=a(N.el).attr(c)||a(N.el).attr("data-"+c);d&&T.setAttribute(c,d)}),N.get("retinaImage")&&c.devicePixelRatio>1&&(T.height=T.height/c.devicePixelRatio,T.width=T.width/c.devicePixelRatio),N.get("scalePhotos")&&(f=function(){T.height-=T.height*b,T.width-=T.width*b},N.mw&&T.width>N.mw&&(b=(T.width-N.mw)/T.width,f()),N.mh&&T.height>N.mh&&(b=(T.height-N.mh)/T.height,f())),N.h&&(T.style.marginTop=Math.max(N.mh-T.height,0)/2+"px"),B[1]&&(N.get("loop")||B[S+1])&&(T.style.cursor="pointer",T.onclick=function(){Y.next()}),T.style.width=T.width+"px",T.style.height=T.height+"px",l(T)},1)}),T.src=e):k(N,e)?(video=b.createElement("video"),video.autoplay=!0,video.loop=!0,a(video).addClass(aa+"Video").bind("error",function(){l(d(ja,"Error").html(N.get("imgError")))}).one("canplaythrough",function(){m===ka&&setTimeout(function(){var b,c=video.videoHeight,d=video.videoWidth;a.each(["alt","longdesc","aria-describedby"],function(b,c){var d=a(N.el).attr(c)||a(N.el).attr("data-"+c);d&&video.setAttribute(c,d)}),N.get("scalePhotos")&&(f=function(){c-=video.videoHeight*b,d-=video.videoWidth*b},N.mw&&video.videoWidth>N.mw&&(b=(video.videoWidth-N.mw)/video.videoWidth,f()),N.mh&&video.videoHeight>N.mh&&(b=(video.videoHeight-N.mh)/video.videoHeight,f())),N.h&&(video.style.marginTop=Math.max(N.mh-video.videoHeight,0)/2+"px"),B[1]&&(N.get("loop")||B[S+1])&&(video.style.cursor="pointer",video.onclick=function(){Y.next()}),video.style.width=d+"px",video.style.height=c+"px",l(video),video.play()},1)}),video.src=e):e&&E.load(e,N.get("data"),function(b,c){m===ka&&l("error"===c?d(ja,"Error").html(N.get("xhrError")):a(this).contents())})}var t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$={html:!1,photo:!1,video:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,videoRegex:/\.(mp4|webm)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return a(this).attr("href")},title:function(){return this.title}},_="colorbox",aa="cbox",ba=aa+"Element",ca=aa+"_open",da=aa+"_load",ea=aa+"_complete",fa=aa+"_cleanup",ga=aa+"_closed",ha=aa+"_purge",ia=a("<a/>"),ja="div",ka=0,la={},ma=function(){function a(){clearTimeout(g)}function b(){(N.get("loop")||B[S+1])&&(a(),g=setTimeout(Y.next,N.get("slideshowSpeed")))}function c(){I.html(N.get("slideshowStop")).unbind(i).one(i,d),ia.bind(ea,b).bind(da,a),u.removeClass(h+"off").addClass(h+"on")}function d(){a(),ia.unbind(ea,b).unbind(da,a),I.html(N.get("slideshowStart")).unbind(i).one(i,function(){Y.next(),c()}),u.removeClass(h+"on").addClass(h+"off")}function e(){f=!1,I.hide(),a(),ia.unbind(ea,b).unbind(da,a),u.removeClass(h+"off "+h+"on")}var f,g,h=aa+"Slideshow_",i="click."+aa;return function(){f?N.get("slideshow")||(ia.unbind(fa,e),e()):N.get("slideshow")&&B[1]&&(f=!0,ia.one(fa,e),N.get("slideshowAuto")?c():d(),I.show())}}();a[_]||(a(q),Y=a.fn[_]=a[_]=function(b,c){var d,e=this;if(b=b||{},a.isFunction(e))e=a("<a/>"),b.open=!0;else if(!e[0])return e;return e[0]?(q(),r()&&(c&&(b.onComplete=c),e.each(function(){var c=a.data(this,_)||{};a.data(this,_,a.extend(c,b))}).addClass(ba),d=new f(e[0],b),d.get("open")&&p(e[0])),e):e},Y.position=function(b,c){function d(){x[0].style.width=A[0].style.width=w[0].style.width=parseInt(u[0].style.width,10)-P+"px",w[0].style.height=y[0].style.height=z[0].style.height=parseInt(u[0].style.height,10)-O+"px"}var f,g,i,j=0,k=0,l=u.offset();if(C.unbind("resize."+aa),u.css({top:-9e4,left:-9e4}),g=C.scrollTop(),i=C.scrollLeft(),N.get("fixed")?(l.top-=g,l.left-=i,u.css({position:"fixed"})):(j=g,k=i,u.css({position:"absolute"})),k+=N.get("right")!==!1?Math.max(C.width()-N.w-R-P-h(N.get("right"),"x"),0):N.get("left")!==!1?h(N.get("left"),"x"):Math.round(Math.max(C.width()-N.w-R-P,0)/2),j+=N.get("bottom")!==!1?Math.max(e()-N.h-Q-O-h(N.get("bottom"),"y"),0):N.get("top")!==!1?h(N.get("top"),"y"):Math.round(Math.max(e()-N.h-Q-O,0)/2),u.css({top:l.top,left:l.left,visibility:"visible"}),v[0].style.width=v[0].style.height="9999px",f={width:N.w+R+P,height:N.h+Q+O,top:j,left:k},b){var m=0;a.each(f,function(a){if(f[a]!==la[a])return void(m=b)}),b=m}la=f,b||u.css(f),u.dequeue().animate(f,{duration:b||0,complete:function(){d(),V=!1,v[0].style.width=N.w+R+P+"px",v[0].style.height=N.h+Q+O+"px",N.get("reposition")&&setTimeout(function(){C.bind("resize."+aa,Y.position)},1),a.isFunction(c)&&c()},step:d})},Y.resize=function(a){var b;U&&(a=a||{},a.width&&(N.w=h(a.width,"x")-R-P),a.innerWidth&&(N.w=h(a.innerWidth,"x")),D.css({width:N.w}),a.height&&(N.h=h(a.height,"y")-Q-O),a.innerHeight&&(N.h=h(a.innerHeight,"y")),a.innerHeight||a.height||(b=D.scrollTop(),D.css({height:"auto"}),N.h=D.height()),D.css({height:N.h}),b&&D.scrollTop(b),Y.position("none"===N.get("transition")?0:N.get("speed")))},Y.prep=function(c){function e(){return N.w=N.w||D.width(),N.w=N.mw&&N.mw<N.w?N.mw:N.w,N.w}function h(){return N.h=N.h||D.height(),N.h=N.mh&&N.mh<N.h?N.mh:N.h,N.h}if(U){var l,n="none"===N.get("transition")?0:N.get("speed");D.remove(),D=d(ja,"LoadedContent").append(c),D.hide().appendTo(E.show()).css({overflow:N.get("scrolling")?"auto":"hidden"}).css({width:e()}).css({height:h()}).prependTo(w),E.hide(),a(T).css({"float":"none"}),m(N.get("className")),l=function(){function c(){a.support.opacity===!1&&u[0].style.removeAttribute("filter")}var d,e,h=B.length;U&&(e=function(){clearTimeout(X),F.hide(),o(ea),N.get("onComplete")},G.html(N.get("title")).show(),D.show(),h>1?("string"==typeof N.get("current")&&H.html(N.get("current").replace("{current}",S+1).replace("{total}",h)).show(),J[N.get("loop")||S<h-1?"show":"hide"]().html(N.get("next")),K[N.get("loop")||S?"show":"hide"]().html(N.get("previous")),ma(),N.get("preloading")&&a.each([g(-1),g(1)],function(){var c,d,e=B[this],g=new f(e,a.data(e,_)),h=g.get("href");h&&i(g,h)?(h=j(g,h),c=b.createElement("img"),c.src=h):h&&k(g,h)&&(d=b.createElement("video"),d.src=h)})):M.hide(),N.get("iframe")?(d=b.createElement("iframe"),"frameBorder"in d&&(d.frameBorder=0),"allowTransparency"in d&&(d.allowTransparency="true"),N.get("scrolling")||(d.scrolling="no"),a(d).attr({src:N.get("href"),name:(new Date).getTime(),"class":aa+"Iframe",allowFullScreen:!0}).one("load",e).appendTo(D),ia.one(ha,function(){d.src="//about:blank"}),N.get("fastIframe")&&a(d).trigger("load")):e(),"fade"===N.get("transition")?u.fadeTo(n,1,c):c())},"fade"===N.get("transition")?u.fadeTo(n,0,function(){Y.position(0,l)}):Y.position(n,l)}},Y.next=function(){!V&&B[1]&&(N.get("loop")||B[S+1])&&(S=g(1),p(B[S]))},Y.prev=function(){!V&&B[1]&&(N.get("loop")||S)&&(S=g(-1),p(B[S]))},Y.close=function(){U&&!W&&(W=!0,U=!1,o(fa),N.get("onCleanup"),C.unbind("."+aa),t.fadeTo(N.get("fadeOut")||0,0),u.stop().fadeTo(N.get("fadeOut")||0,0,function(){u.hide(),t.hide(),o(ha),D.remove(),setTimeout(function(){W=!1,o(ga),N.get("onClosed")},1)}))},Y.remove=function(){u&&(u.stop(),a[_].close(),u.stop(!1,!0).remove(),t.remove(),W=!1,u=null,a("."+ba).removeData(_).removeClass(ba),a(b).unbind("click."+aa).unbind("keydown."+aa))},Y.element=function(){return a(N.el)},Y.settings=$)}(jQuery,document,window),function(a){function b(b,c){this.$element=a(b),this.options=c,this.enabled=!0,this.fixTitle()}b.prototype={show:function(){var b=this.getTitle();if(b&&this.enabled){var c=this.tip();c.find(".tipsy-inner")[this.options.html?"html":"text"](b),c[0].className="tipsy "+(this.options.cls?this.options.cls:""),c.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var d,e=a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),f=c[0].offsetWidth,g=c[0].offsetHeight,h="function"==typeof this.options.gravity?this.options.gravity.call(this.$element[0],this.$element[0]):this.options.gravity;switch(h.charAt(0)){case"n":d={top:e.top+e.height+this.options.offset,left:e.left+e.width/2-f/2};break;case"s":d={top:e.top-g-this.options.offset,left:e.left+e.width/2-f/2};break;case"e":d={top:e.top+e.height/2-g/2,left:e.left-f-this.options.offset};break;case"w":d={top:e.top+e.height/2-g/2,left:e.left+e.width+this.options.offset}}2==h.length&&("w"==h.charAt(1)?d.left=e.left+e.width/2-15:d.left=e.left+e.width/2-f+15),c.css(d).addClass("tipsy-"+h),this.options.fade?c.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity},this.options.duration):c.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(this.options.duration,function(){a(this).remove()}):this.tip().remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("original-title"))&&a.attr("original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var a,b=this.$element,c=this.options;this.fixTitle();var a,c=this.options;return"string"==typeof c.title?a=b.attr("title"==c.title?"original-title":c.title):"function"==typeof c.title&&(a=c.title.call(b[0])),a=(""+a).replace(/(^\s*|\s*$)/,""),a||c.fallback},tip:function(){return this.$tip||(this.$tip=a('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},a.fn.tipsy=function(c){function d(d){var e=a.data(d,"tipsy");return e||(e=new b(d,a.fn.tipsy.elementOptions(d,c)),a.data(d,"tipsy",e)),e}function e(){var a=d(this);a.hoverState="in",0==c.delayIn?a.show():(a.fixTitle(),setTimeout(function(){"in"==a.hoverState&&a.show()},c.delayIn))}function f(){var a=d(this);a.hoverState="out",0==c.delayOut?a.hide():setTimeout(function(){"out"==a.hoverState&&a.hide()},c.delayOut)}if(c===!0)return this.data("tipsy");if("string"==typeof c){var g=this.data("tipsy");return g&&g[c](),this}if(c=a.extend({},a.fn.tipsy.defaults,c),c.live||this.each(function(){d(this)}),"manual"!=c.trigger){var h="hover"==c.trigger?"mouseenter":"focus",i="hover"==c.trigger?"mouseleave":"blur";c.live?a(this.context).on(h,this.selector,e).on(i,this.selector,f):this.on(h,e).on(i,f)}return this},a.fn.tipsy.defaults={delayIn:0,delayOut:20,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover",duration:100},a.fn.tipsy.elementOptions=function(b,c){return a.metadata?a.extend({},c,a(b).metadata()):c},a.fn.tipsy.autoNS=function(){return a(".tipsy").addClass("autoNS"),a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"},a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"}}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;n<o;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0!==a.cookie(b)&&(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}}),function(a){var b=[];a.preloadImages=function(){for(var a=arguments.length,c=a;c--;){var d=document.createElement("img");d.src=arguments[c],b.push(d)}}}(jQuery),$.fn.disable=function(){return $(this).attr("disabled",!0),$(this)},$.fn.enable=function(){return $(this).removeAttr("disabled"),$(this)},$.fn.setCursorPosition=function(a){try{if($(this).get(0).setSelectionRange)$(this).get(0).setSelectionRange(a,a);else if($(this).get(0).createTextRange){var b=$(this).get(0).createTextRange();b.collapse(!0),b.moveEnd("character",a),b.moveStart("character",a),b.select()}return $(this)}catch(c){}},$.fn.showPlaceholder=function(){try{var a=$(this),b=a.attr("title");return""!==a.val()&&a.val()!==b||(a.addClass("placeholder"),a.val(b)),$(this)}catch(c){}},$.fn.hidePlaceholder=function(){try{var a=$(this);return(a.is("[title]")&&a.val()===a.attr("title")||a.val()===a.attr("original-title"))&&(a.removeClass("placeholder"),a.val("")),$(this)}catch(b){}},$.fn.selectAll=function(){var a=$(this);try{a.is(":focus")||_.defer(function(){a.focus()}),a.select()}catch(b){}},$.getScript=function(a,b,c){$.ajax({type:"GET",url:a,success:b,dataType:"script",cache:c})},$.fn.number_format=function(){return this.each(function(){$(this).text($(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))})},function(a){var b;return a.event.fix=function(a){return function(b){return b=a.apply(this,arguments),0!==b.type.indexOf("copy")&&0!==b.type.indexOf("paste")||(b.clipboardData=b.originalEvent.clipboardData),b}}(a.event.fix),b={preventPropagation:!1,callback:a.noop,matchType:/image.*/},a.fn.pasteImageReader=function(c){return"function"==typeof c&&(c={callback:c}),c=a.extend({},b,c),this.each(function(){var b,d;return d=this,b=a(this),b.bind("paste",function(a){return items=a.clipboardData&&a.clipboardData.items||window.clipboardData&&window.clipboardData.files,jQuery.each(items,function(b,e){var f,g;if(e.type.match(c.matchType))return f=e instanceof File?items[b]:items[b].getAsFile(),g=new FileReader,g.onload=function(a){c.callback.call(d,{dataURL:a.target.result,event:a,file:f,name:f.name})},g.readAsDataURL(f),c.preventPropagation&&a.stopPropagation(),!1})})})}}(jQuery),function(a,b,c,d){function e(b,c){this.element=b,this.options=a.extend({},j,c),this._defaults=j,this._name=h,this.init()}function f(){return!!("ontouchstart"in b)}function g(){var a=c.body||c.documentElement,b=a.style,d="transition";if("string"==typeof b[d])return!0;v=["Moz","Webkit","Khtml","O","ms"],d=d.charAt(0).toUpperCase()+d.substr(1);for(var e=0;e<v.length;e++)if("string"==typeof b[v[e]+d])return!0;return!1}var h="tooltipster",j={animation:"fade",arrow:!0,arrowColor:"",content:"",delay:200,fixedWidth:0,maxWidth:0,functionInit:function(a,b){},functionBefore:function(a,b){b()},functionReady:function(a,b){},functionAfter:function(a){},icon:"(?)",iconDesktop:!1,iconTouch:!1,iconTheme:".tooltipster-icon",interactive:!1,interactiveTolerance:350,interactiveAutoClose:!0,offsetX:0,offsetY:0,onlyOne:!0,position:"top",speed:350,timer:0,theme:".tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0},k=!0;g()||(k=!1);var l=f();a(b).on("mousemove.tooltipster",function(){l=!1,a(b).off("mousemove.tooltipster")}),e.prototype={init:function(){var b=a(this.element),e=this,f=!0;if(!e.options.touchDevices&&l&&(f=!1),c.all&&!c.querySelector&&(f=!1),f){var g=a.trim(e.options.content).length>0?e.options.content:b.attr("title"),h=e.options.functionInit(b,g);if(h&&(g=h),b.data("tooltipsterContent",g),b.removeAttr("title"),e.options.iconDesktop&&!l||e.options.iconTouch&&l){var i=e.options.iconTheme,j=a('<span class="'+i.replace(".","")+'"></span>');j.data("tooltipsterContent",g).append(e.options.icon).insertAfter(b),b.data("tooltipsterIcon",j),b=j}e.options.touchDevices&&l&&("click"==e.options.trigger||"hover"==e.options.trigger)?b.on("touchstart.tooltipster",function(a,b){e.showTooltip()}):("hover"==e.options.trigger&&(b.on("mouseenter.tooltipster",function(){e.showTooltip()}),e.options.interactive?b.on("mouseleave.tooltipster",function(){var c=b.data("tooltipster"),f=!1;if(c!==d&&""!==c){c.mouseenter(function(){f=!0}),c.mouseleave(function(){f=!1});setTimeout(function(){f?e.options.interactiveAutoClose&&(c.find("select").on("change",function(){e.hideTooltip()}),c.mouseleave(function(b){var c=a(b.target);0===c.parents(".tooltipster-base").length||c.hasClass("tooltipster-base")?e.hideTooltip():c.on("mouseleave",function(a){e.hideTooltip()})})):e.hideTooltip()},e.options.interactiveTolerance)}else e.hideTooltip()}):b.on("mouseleave.tooltipster",function(){e.hideTooltip()})),"click"==e.options.trigger&&b.on("click.tooltipster",function(){""===b.data("tooltipster")||b.data("tooltipster")===d?e.showTooltip():e.hideTooltip()}))}},showTooltip:function(b){var c=a(this.element),e=this;c.data("tooltipsterIcon")!==d&&(c=c.data("tooltipsterIcon")),c.hasClass("tooltipster-disable")||(a(".tooltipster-base").not(".tooltipster-dying").length>0&&e.options.onlyOne&&a(".tooltipster-base").not(".tooltipster-dying").not(c.data("tooltipster")).each(function(){a(this).addClass("tooltipster-kill");var b=a(this).data("origin");b.data("plugin_tooltipster").hideTooltip()}),c.clearQueue().delay(e.options.delay).queue(function(){e.options.functionBefore(c,function(){if(c.data("tooltipster")!==d&&""!==c.data("tooltipster")){var b=c.data("tooltipster");if(!b.hasClass("tooltipster-kill")){var f="tooltipster-"+e.options.animation;if(b.removeClass("tooltipster-dying"),k&&b.clearQueue().addClass(f+"-show"),e.options.timer>0){var h=b.data("tooltipsterTimer");clearTimeout(h),h=setTimeout(function(){b.data("tooltipsterTimer",d),e.hideTooltip()},e.options.timer),b.data("tooltipsterTimer",h)}e.options.touchDevices&&l&&a("body").bind("touchstart",function(b){if(e.options.interactive){var c=a(b.target),d=!0;c.parents().each(function(){a(this).hasClass("tooltipster-base")&&(d=!1)}),d&&(e.hideTooltip(),a("body").unbind("touchstart"))}else e.hideTooltip(),a("body").unbind("touchstart")})}}else{e.options._bodyOverflowX=a("body").css("overflow-x"),a("body").css("overflow-x","hidden");var i=e.getContent(c),j=e.options.theme,m=j.replace(".",""),f="tooltipster-"+e.options.animation,n="-webkit-transition-duration: "+e.options.speed+"ms; -webkit-animation-duration: "+e.options.speed+"ms; -moz-transition-duration: "+e.options.speed+"ms; -moz-animation-duration: "+e.options.speed+"ms; -o-transition-duration: "+e.options.speed+"ms; -o-animation-duration: "+e.options.speed+"ms; -ms-transition-duration: "+e.options.speed+"ms; -ms-animation-duration: "+e.options.speed+"ms; transition-duration: "+e.options.speed+"ms; animation-duration: "+e.options.speed+"ms;",o=e.options.fixedWidth>0?"width:"+Math.round(e.options.fixedWidth)+"px;":"",p=e.options.maxWidth>0?"max-width:"+Math.round(e.options.maxWidth)+"px;":"",q=e.options.interactive?"pointer-events: auto;":"",b=a('<div class="tooltipster-base '+m+" "+f+'" style="'+o+" "+p+" "+q+" "+n+'"></div>'),r=a('<div class="tooltipster-content"></div>');r.html(i),b.append(r),b.appendTo("body"),c.data("tooltipster",b),b.data("origin",c),e.positionTooltip(),e.options.functionReady(c,b),k?b.addClass(f+"-show"):b.css("display","none").removeClass(f).fadeIn(e.options.speed);var s=i,t=setInterval(function(){var d=e.getContent(c);0===a("body").find(c).length?(b.addClass("tooltipster-dying"),e.hideTooltip()):s!==d&&""!==d&&(s=d,b.find(".tooltipster-content").html(d),e.options.updateAnimation&&(g()?(b.css({width:"","-webkit-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){b.removeClass("tooltipster-content-changing"),setTimeout(function(){b.css({"-webkit-transition":e.options.speed+"ms","-moz-transition":e.options.speed+"ms","-o-transition":e.options.speed+"ms","-ms-transition":e.options.speed+"ms",transition:e.options.speed+"ms"})},e.options.speed)},e.options.speed)):b.fadeTo(e.options.speed,.5,function(){b.fadeTo(e.options.speed,1)})),e.positionTooltip()),0!==a("body").find(b).length&&0!==a("body").find(c).length||clearInterval(t)},200);if(e.options.timer>0){var h=setTimeout(function(){b.data("tooltipsterTimer",d),e.hideTooltip()},e.options.timer+e.options.speed);b.data("tooltipsterTimer",h)}e.options.touchDevices&&l&&a("body").bind("touchstart",function(b){if(e.options.interactive){var c=a(b.target),d=!0;c.parents().each(function(){a(this).hasClass("tooltipster-base")&&(d=!1)}),d&&(e.hideTooltip(),a("body").unbind("touchstart"))}else e.hideTooltip(),a("body").unbind("touchstart")})}}),c.dequeue()}))},hideTooltip:function(b){var c=a(this.element),e=this;c.data("tooltipsterIcon")!==d&&(c=c.data("tooltipsterIcon"));var f=c.data("tooltipster");if(f===d&&(f=a(".tooltipster-dying")),c.clearQueue(),f!==d&&""!==f){var g=f.data("tooltipsterTimer");g!==d&&clearTimeout(g);var h="tooltipster-"+e.options.animation;k?f.clearQueue().removeClass(h+"-show").addClass("tooltipster-dying").delay(e.options.speed).queue(function(){f.remove(),c.data("tooltipster",""),a("body").css("overflow-x",e.options._bodyOverflowX),e.options.functionAfter(c)}):f.clearQueue().addClass("tooltipster-dying").fadeOut(e.options.speed,function(){f.remove(),c.data("tooltipster",""),a("body").css("overflow-x",e.options._bodyOverflowX),e.options.functionAfter(c)})}},positionTooltip:function(c){function e(){var c=a(b).scrollLeft();if(L-c<0){var d=L-c;L=c,j.data("arrow-reposition",d)}if(L+n-c>k){var d=L-(k+c-n);L=k+c-n,j.data("arrow-reposition",d)}}function f(c,d){r-a(b).scrollTop()-p-O-12<0&&d.indexOf("top")>-1&&(h.options.position=c,t=d),r+m+p+12+O>a(b).scrollTop()+a(b).height()&&d.indexOf("bottom")>-1&&(h.options.position=c,t=d,N=r-p-O-12)}var g=a(this.element),h=this;if(g.data("tooltipsterIcon")!==d&&(g=g.data("tooltipsterIcon")),g.data("tooltipster")!==d&&""!==g.data("tooltipster")){var j=g.data("tooltipster");j.css("width","");var k=a(b).width(),l=g.outerWidth(!1),m=g.outerHeight(!1),n=j.outerWidth(!1),o=j.innerWidth()+1,p=j.outerHeight(!1),q=g.offset(),r=q.top,s=q.left,t=d;if(g.is("area")){var u=g.attr("shape"),v=g.parent().attr("name"),w=a('img[usemap="#'+v+'"]'),x=w.offset().left,y=w.offset().top,z=g.attr("coords")!==d?g.attr("coords").split(","):d;if("circle"==u){var A=parseInt(z[0]),B=parseInt(z[1]),C=parseInt(z[2]);m=2*C,l=2*C,r=y+B-C,s=x+A-C}else if("rect"==u){var A=parseInt(z[0]),B=parseInt(z[1]),D=parseInt(z[2]),E=parseInt(z[3]);m=E-B,l=D-A,r=y+B,s=x+A}else if("poly"==u){var F=0,G=0,H=0,I=0,J="even";for(i=0;i<z.length;i++){var K=parseInt(z[i]);"even"==J?(K>H&&(H=K,0===i&&(F=H)),K<F&&(F=K),J="odd"):(K>I&&(I=K,1==i&&(G=I)),K<G&&(G=K),J="even")}m=I-G,l=H-F,r=y+G,s=x+F}else m=w.outerHeight(!1),l=w.outerWidth(!1),r=y,s=x}0===h.options.fixedWidth&&j.css({width:Math.round(o)+"px","padding-left":"0px","padding-right":"0px"});var L=0,M=0,N=0,O=parseInt(h.options.offsetY),P=parseInt(h.options.offsetX),Q="";if("top"==h.options.position){var R=s+n-(s+l);L=s+P-R/2,N=r-p-O-12,e(),f("bottom","top")}if("top-left"==h.options.position&&(L=s+P,N=r-p-O-12,e(),f("bottom-left","top-left")),"top-right"==h.options.position&&(L=s+l+P-n,N=r-p-O-12,e(),f("bottom-right","top-right")),"bottom"==h.options.position){var R=s+n-(s+l);L=s-R/2+P,N=r+m+O+12,e(),f("top","bottom")}if("bottom-left"==h.options.position&&(L=s+P,N=r+m+O+12,e(),f("top-left","bottom-left")),"bottom-right"==h.options.position&&(L=s+l+P-n,N=r+m+O+12,e(),f("top-right","bottom-right")),"left"==h.options.position){L=s-P-n-12,M=s+P+l+12;var S=r+p-(r+g.outerHeight(!1));if(N=r-S/2-O,L<0&&M+n>k){var T=2*parseFloat(j.css("border-width")),U=n+L-T;j.css("width",U+"px"),p=j.outerHeight(!1),L=s-P-U-12-T,S=r+p-(r+g.outerHeight(!1)),N=r-S/2-O}else L<0&&(L=s+P+l+12,j.data("arrow-reposition","left"))}if("right"==h.options.position){L=s+P+l+12,M=s-P-n-12;var S=r+p-(r+g.outerHeight(!1));if(N=r-S/2-O,L+n>k&&M<0){var T=2*parseFloat(j.css("border-width")),U=k-L-T;j.css("width",U+"px"),p=j.outerHeight(!1),S=r+p-(r+g.outerHeight(!1)),N=r-S/2-O}else L+n>k&&(L=s-P-n-12,j.data("arrow-reposition","right"))}if(h.options.arrow){var V="tooltipster-arrow-"+h.options.position;if(h.options.arrowColor.length<1)var W=j.css("background-color");else var W=h.options.arrowColor;var X=j.data("arrow-reposition");if(X?"left"==X?(V="tooltipster-arrow-right",X=""):"right"==X?(V="tooltipster-arrow-left",X=""):X="left:"+Math.round(X)+"px;":X="","top"==h.options.position||"top-left"==h.options.position||"top-right"==h.options.position)var Y=parseFloat(j.css("border-bottom-width")),Z=j.css("border-bottom-color");else if("bottom"==h.options.position||"bottom-left"==h.options.position||"bottom-right"==h.options.position)var Y=parseFloat(j.css("border-top-width")),Z=j.css("border-top-color");else if("left"==h.options.position)var Y=parseFloat(j.css("border-right-width")),Z=j.css("border-right-color");else if("right"==h.options.position)var Y=parseFloat(j.css("border-left-width")),Z=j.css("border-left-color");else var Y=parseFloat(j.css("border-bottom-width")),Z=j.css("border-bottom-color");Y>1&&Y++;var $="";if(0!==Y){var _="",aa="border-color: "+Z+";";V.indexOf("bottom")!==-1?_="margin-top: -"+Math.round(Y)+"px;":V.indexOf("top")!==-1?_="margin-bottom: -"+Math.round(Y)+"px;":V.indexOf("left")!==-1?_="margin-right: -"+Math.round(Y)+"px;":V.indexOf("right")!==-1&&(_="margin-left: -"+Math.round(Y)+"px;"),$='<span class="tooltipster-arrow-border" style="'+_+" "+aa+';"></span>'}j.find(".tooltipster-arrow").remove(),Q='<div class="'+V+' tooltipster-arrow" style="'+X+'">'+$+'<span style="border-color:'+W+';"></span></div>',j.append(Q)}j.css({top:Math.round(N)+"px",left:Math.round(L)+"px"}),t!==d&&(h.options.position=t)}},getContent:function(b){var c=b.data("tooltipsterContent");return c=a(a.parseHTML("<div>"+c+"</div>")).html()}},a.fn[h]=function(b){if(!b||"setDefaults"!==b){if("string"==typeof b){var c=this,f=arguments[1],g=null;if(c.data("plugin_tooltipster")===d){var i=c.find("*");c=a(),i.each(function(){a(this).data("plugin_tooltipster")!==d&&c.push(a(this))})}return c.each(function(){switch(b.toLowerCase()){case"show":a(this).data("plugin_tooltipster").showTooltip();break;case"hide":a(this).data("plugin_tooltipster").hideTooltip();break;case"disable":a(this).addClass("tooltipster-disable");break;case"enable":a(this).removeClass("tooltipster-disable");break;case"destroy":a(this).data("plugin_tooltipster").hideTooltip();var e=a(this).data("tooltipsterIcon");e&&e.remove(),a(this).attr("title",c.data("tooltipsterContent")).removeData("plugin_tooltipster").removeData("tooltipsterContent").removeData("tooltipsterIcon").off(".tooltipster");break;case"elementicon":return g=a(this).data("tooltipsterIcon"),g=g?g[0]:d,!1;case"update":var h=f;if(a(this).data("tooltipsterIcon")===d)a(this).data("tooltipsterContent",h);else{var i=a(this).data("tooltipsterIcon");i.data("tooltipsterContent",h)}break;case"reposition":a(this).data("plugin_tooltipster").positionTooltip();break;case"val":return g=a(this).data("tooltipsterContent"),console.log(g),!1}}),null!==g?g:this}return this.each(function(){a.data(this,"plugin_"+h)||a.data(this,"plugin_"+h,new e(this,b))})}a.extend(j,arguments[1])},l&&b.addEventListener("orientationchange",function(){a(".tooltipster-base").length>0&&a(".tooltipster-base").each(function(){var b=a(this).data("origin");b.data("plugin_tooltipster").hideTooltip()})},!1),a(b).on("scroll.tooltipster",function(){var b=a(".tooltipster-base").data("origin");b&&b.tooltipster("reposition")}),a(b).on("resize.tooltipster",function(){var b=a(".tooltipster-base").data("origin");null!==b&&b!==d&&b.tooltipster("reposition")})}(jQuery,window,document),function(a){var b=function(){var b={years:"datepickerViewYears",moths:"datepickerViewMonths",days:"datepickerViewDays"},c={wrapper:'<div class="datepicker"><div class="datepickerBorderT" /><div class="datepickerBorderB" /><div class="datepickerBorderL" /><div class="datepickerBorderR" /><div class="datepickerBorderTL" /><div class="datepickerBorderTR" /><div class="datepickerBorderBL" /><div class="datepickerBorderBR" /><div class="datepickerContainer"><table cellspacing="0" cellpadding="0"><tbody><tr></tr></tbody></table></div></div>',head:["<td>",'<table cellspacing="0" cellpadding="0">',"<thead>","<tr>",'<th class="datepickerGoPrev"><a href="#"><span><%=prev%></span></a></th>','<th colspan="5" class="datepickerMonth"><a href="#"><span></span></a></th>','<th class="datepickerGoNext"><a href="#"><span><%=next%></span></a></th>',"</tr>",'<tr class="datepickerDoW">',"<th><span><%=day1%></span></th>","<th><span><%=day2%></span></th>","<th><span><%=day3%></span></th>","<th><span><%=day4%></span></th>","<th><span><%=day5%></span></th>","<th><span><%=day6%></span></th>","<th><span><%=day7%></span></th>","</tr>","</thead>","</table></td>"],space:'<td class="datepickerSpace"><div></div></td>',days:['<tbody class="datepickerDays">',"<tr>",'<td class="<%=weeks[0].days[0].classname%>"><a href="#"><span><%=weeks[0].days[0].text%></span></a></td>','<td class="<%=weeks[0].days[1].classname%>"><a href="#"><span><%=weeks[0].days[1].text%></span></a></td>','<td class="<%=weeks[0].days[2].classname%>"><a href="#"><span><%=weeks[0].days[2].text%></span></a></td>','<td class="<%=weeks[0].days[3].classname%>"><a href="#"><span><%=weeks[0].days[3].text%></span></a></td>','<td class="<%=weeks[0].days[4].classname%>"><a href="#"><span><%=weeks[0].days[4].text%></span></a></td>','<td class="<%=weeks[0].days[5].classname%>"><a href="#"><span><%=weeks[0].days[5].text%></span></a></td>','<td class="<%=weeks[0].days[6].classname%>"><a href="#"><span><%=weeks[0].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[1].days[0].classname%>"><a href="#"><span><%=weeks[1].days[0].text%></span></a></td>','<td class="<%=weeks[1].days[1].classname%>"><a href="#"><span><%=weeks[1].days[1].text%></span></a></td>','<td class="<%=weeks[1].days[2].classname%>"><a href="#"><span><%=weeks[1].days[2].text%></span></a></td>','<td class="<%=weeks[1].days[3].classname%>"><a href="#"><span><%=weeks[1].days[3].text%></span></a></td>','<td class="<%=weeks[1].days[4].classname%>"><a href="#"><span><%=weeks[1].days[4].text%></span></a></td>','<td class="<%=weeks[1].days[5].classname%>"><a href="#"><span><%=weeks[1].days[5].text%></span></a></td>','<td class="<%=weeks[1].days[6].classname%>"><a href="#"><span><%=weeks[1].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[2].days[0].classname%>"><a href="#"><span><%=weeks[2].days[0].text%></span></a></td>','<td class="<%=weeks[2].days[1].classname%>"><a href="#"><span><%=weeks[2].days[1].text%></span></a></td>','<td class="<%=weeks[2].days[2].classname%>"><a href="#"><span><%=weeks[2].days[2].text%></span></a></td>','<td class="<%=weeks[2].days[3].classname%>"><a href="#"><span><%=weeks[2].days[3].text%></span></a></td>','<td class="<%=weeks[2].days[4].classname%>"><a href="#"><span><%=weeks[2].days[4].text%></span></a></td>','<td class="<%=weeks[2].days[5].classname%>"><a href="#"><span><%=weeks[2].days[5].text%></span></a></td>','<td class="<%=weeks[2].days[6].classname%>"><a href="#"><span><%=weeks[2].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[3].days[0].classname%>"><a href="#"><span><%=weeks[3].days[0].text%></span></a></td>','<td class="<%=weeks[3].days[1].classname%>"><a href="#"><span><%=weeks[3].days[1].text%></span></a></td>','<td class="<%=weeks[3].days[2].classname%>"><a href="#"><span><%=weeks[3].days[2].text%></span></a></td>','<td class="<%=weeks[3].days[3].classname%>"><a href="#"><span><%=weeks[3].days[3].text%></span></a></td>','<td class="<%=weeks[3].days[4].classname%>"><a href="#"><span><%=weeks[3].days[4].text%></span></a></td>','<td class="<%=weeks[3].days[5].classname%>"><a href="#"><span><%=weeks[3].days[5].text%></span></a></td>','<td class="<%=weeks[3].days[6].classname%>"><a href="#"><span><%=weeks[3].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[4].days[0].classname%>"><a href="#"><span><%=weeks[4].days[0].text%></span></a></td>','<td class="<%=weeks[4].days[1].classname%>"><a href="#"><span><%=weeks[4].days[1].text%></span></a></td>','<td class="<%=weeks[4].days[2].classname%>"><a href="#"><span><%=weeks[4].days[2].text%></span></a></td>','<td class="<%=weeks[4].days[3].classname%>"><a href="#"><span><%=weeks[4].days[3].text%></span></a></td>','<td class="<%=weeks[4].days[4].classname%>"><a href="#"><span><%=weeks[4].days[4].text%></span></a></td>','<td class="<%=weeks[4].days[5].classname%>"><a href="#"><span><%=weeks[4].days[5].text%></span></a></td>','<td class="<%=weeks[4].days[6].classname%>"><a href="#"><span><%=weeks[4].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[5].days[0].classname%>"><a href="#"><span><%=weeks[5].days[0].text%></span></a></td>','<td class="<%=weeks[5].days[1].classname%>"><a href="#"><span><%=weeks[5].days[1].text%></span></a></td>','<td class="<%=weeks[5].days[2].classname%>"><a href="#"><span><%=weeks[5].days[2].text%></span></a></td>','<td class="<%=weeks[5].days[3].classname%>"><a href="#"><span><%=weeks[5].days[3].text%></span></a></td>','<td class="<%=weeks[5].days[4].classname%>"><a href="#"><span><%=weeks[5].days[4].text%></span></a></td>','<td class="<%=weeks[5].days[5].classname%>"><a href="#"><span><%=weeks[5].days[5].text%></span></a></td>','<td class="<%=weeks[5].days[6].classname%>"><a href="#"><span><%=weeks[5].days[6].text%></span></a></td>',"</tr>","</tbody>"],months:['<tbody class="<%=className%>">',"<tr>",'<td colspan="2"><a href="#"><span><%=data[0]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[1]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[2]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[3]%></span></a></td>',"</tr>","<tr>",'<td colspan="2"><a href="#"><span><%=data[4]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[5]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[6]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[7]%></span></a></td>',"</tr>","<tr>",'<td colspan="2"><a href="#"><span><%=data[8]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[9]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[10]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[11]%></span></a></td>',"</tr>","</tbody>"]},d={flat:!1,starts:1,prev:"&#9664;",next:"&#9654;",lastSel:!1,mode:"single",view:"days",calendars:1,format:"Y-m-d",position:"bottom",eventName:"click",onRender:function(){return{}},onChange:function(){return!0},onShow:function(){return!0},onBeforeShow:function(){return!0},onHide:function(){return!0},locale:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekMin:"wk"}},e=function(b){var d,e,f,h,i,j,k,l,m,n=a(b).data("datepicker"),o=a(b),p=Math.floor(n.calendars/2),q=0;o.find("td>table tbody").remove();for(var r=0;r<n.calendars;r++){switch(d=new Date(n.current),d.addMonths(-p+r),m=o.find("table").eq(r+1),m[0].className){case"datepickerViewDays":f=g(d,"B, Y");break;case"datepickerViewMonths":f=d.getFullYear();break;case"datepickerViewYears":f=d.getFullYear()-6+" - "+(d.getFullYear()+5)}m.find("thead tr:first th:eq(1) span").text(f),f=d.getFullYear()-6,e={data:[],className:"datepickerYears"};for(var s=0;s<12;s++)e.data.push(f+s);l=tmpl(c.months.join(""),e),d.setDate(1),e={weeks:[],test:10},h=d.getMonth();var f=(d.getDay()-n.starts)%7;for(d.addDays(-(f+(f<0?7:0))),i=-1,q=0;q<42;){j=parseInt(q/7,10),k=q%7,e.weeks[j]||(i=d.getWeekNumber(),e.weeks[j]={week:i,days:[]}),e.weeks[j].days[k]={text:d.getDate(),classname:[]},h!=d.getMonth()&&e.weeks[j].days[k].classname.push("datepickerNotInMonth"),0==d.getDay()&&e.weeks[j].days[k].classname.push("datepickerSunday"),6==d.getDay()&&e.weeks[j].days[k].classname.push("datepickerSaturday");var t=n.onRender(d),u=d.valueOf();(t.selected||n.date==u||a.inArray(u,n.date)>-1||"range"==n.mode&&u>=n.date[0]&&u<=n.date[1])&&e.weeks[j].days[k].classname.push("datepickerSelected"),t.disabled&&e.weeks[j].days[k].classname.push("datepickerDisabled"),t.className&&e.weeks[j].days[k].classname.push(t.className),e.weeks[j].days[k].classname=e.weeks[j].days[k].classname.join(" "),q++,d.addDays(1)}l=tmpl(c.days.join(""),e)+l,e={data:n.locale.monthsShort,className:"datepickerMonths"},l=tmpl(c.months.join(""),e)+l,m.append(l)}},f=function(a,b){if(a.constructor==Date)return new Date(a);for(var c,d,e,f,g,h=a.split(/\W+/),i=b.split(/\W+/),j=new Date,k=0;k<h.length;k++)switch(i[k]){case"d":case"e":c=parseInt(h[k],10);break;case"m":d=parseInt(h[k],10)-1;break;case"Y":case"y":e=parseInt(h[k],10),e+=e>100?0:e<29?2e3:1900;break;case"H":case"I":case"k":case"l":f=parseInt(h[k],10);break;case"P":case"p":/pm/i.test(h[k])&&f<12?f+=12:/am/i.test(h[k])&&f>=12&&(f-=12);break;case"M":g=parseInt(h[k],10)}return new Date(void 0===e?j.getFullYear():e,void 0===d?j.getMonth():d,void 0===c?j.getDate():c,void 0===f?j.getHours():f,void 0===g?j.getMinutes():g,0)},g=function(a,b){var c=a.getMonth(),d=a.getDate(),e=a.getFullYear(),f=(a.getWeekNumber(),a.getDay()),g=a.getHours(),h=g>=12,i=h?g-12:g,j=a.getDayOfYear();0==i&&(i=12);for(var k,l=a.getMinutes(),m=a.getSeconds(),n=b.split(""),o=0;o<n.length;o++){switch(k=n[o],n[o]){case"a":k=a.getDayName();break;case"A":k=a.getDayName(!0);break;case"b":k=a.getMonthName();break;case"B":k=a.getMonthName(!0);break;case"C":k=1+Math.floor(e/100);break;case"d":k=d<10?"0"+d:d;break;case"e":k=d;break;case"H":k=g<10?"0"+g:g;break;case"I":k=i<10?"0"+i:i;break;case"j":k=j<100?j<10?"00"+j:"0"+j:j;break;case"k":k=g;break;case"l":k=i;break;case"m":k=c<9?"0"+(1+c):1+c;break;case"M":k=l<10?"0"+l:l;break;case"p":case"P":k=h?"PM":"AM";break;case"s":k=Math.floor(a.getTime()/1e3);break;case"S":k=m<10?"0"+m:m;break;case"u":k=f+1;break;case"w":k=f;break;case"y":k=(""+e).substr(2,2);break;case"Y":k=e}n[o]=k}return n.join("")},h=function(a){Date.prototype.tempDate||(Date.prototype.tempDate=null,Date.prototype.months=a.months,Date.prototype.monthsShort=a.monthsShort,Date.prototype.days=a.days,Date.prototype.daysShort=a.daysShort,Date.prototype.getMonthName=function(a){return this[a?"months":"monthsShort"][this.getMonth()]},Date.prototype.getDayName=function(a){return this[a?"days":"daysShort"][this.getDay()]},Date.prototype.addDays=function(a){this.setDate(this.getDate()+a),this.tempDate=this.getDate()},Date.prototype.addMonths=function(a){null==this.tempDate&&(this.tempDate=this.getDate()),this.setDate(1),this.setMonth(this.getMonth()+a),this.setDate(Math.min(this.tempDate,this.getMaxDays()))},Date.prototype.addYears=function(a){null==this.tempDate&&(this.tempDate=this.getDate()),this.setDate(1),this.setFullYear(this.getFullYear()+a),this.setDate(Math.min(this.tempDate,this.getMaxDays()))},Date.prototype.getMaxDays=function(){var a,b=new Date(Date.parse(this)),c=28;for(a=b.getMonth(),c=28;b.getMonth()==a;)c++,b.setDate(c);return c-1},Date.prototype.getFirstDay=function(){var a=new Date(Date.parse(this));return a.setDate(1),a.getDay()},Date.prototype.getWeekNumber=function(){var a=new Date(this);a.setDate(a.getDate()-(a.getDay()+6)%7+3);var b=a.valueOf();return a.setMonth(0),a.setDate(4),Math.round((b-a.valueOf())/6048e5)+1},Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),b=new Date(this.getFullYear(),0,0,0,0,0),c=a-b;return Math.floor(c/24*60*60*1e3)})},i=function(b){var c=a(b).data("datepicker"),d=a("#"+c.id);if(!c.extraHeight){var e=a(b).find("div");c.extraHeight=e.get(0).offsetHeight+e.get(1).offsetHeight,c.extraWidth=e.get(2).offsetWidth+e.get(3).offsetWidth}var f=d.find("table:first").get(0),g=f.offsetWidth,h=f.offsetHeight;d.css({width:g+c.extraWidth+"px",height:h+c.extraHeight+"px"}).find("div.datepickerContainer").css({width:g+"px",height:h+"px"})},j=function(b){a(b.target).is("span")&&(b.target=b.target.parentNode);var c=a(b.target);if(c.is("a")){if(b.target.blur(),c.hasClass("datepickerDisabled"))return!1;var d=a(this).data("datepicker"),f=c.parent(),h=f.parent().parent().parent(),i=a("table",this).index(h.get(0))-1,j=new Date(d.current),l=!1,m=!1;if(f.is("th")){if(f.hasClass("datepickerWeek")&&"range"==d.mode&&!f.next().hasClass("datepickerDisabled")){var n=parseInt(f.next().text(),10);j.addMonths(i-Math.floor(d.calendars/2)),f.next().hasClass("datepickerNotInMonth")&&j.addMonths(n>15?-1:1),j.setDate(n),d.date[0]=j.setHours(0,0,0,0).valueOf(),j.setHours(23,59,59,0),j.addDays(6),d.date[1]=j.valueOf(),m=!0,l=!0,d.lastSel=!1}else if(f.hasClass("datepickerMonth"))switch(j.addMonths(i-Math.floor(d.calendars/2)),h.get(0).className){case"datepickerViewDays":h.get(0).className="datepickerViewMonths",c.find("span").text(j.getFullYear());break;case"datepickerViewMonths":h.get(0).className="datepickerViewYears",c.find("span").text(j.getFullYear()-6+" - "+(j.getFullYear()+5));break;case"datepickerViewYears":h.get(0).className="datepickerViewDays",c.find("span").text(g(j,"B, Y"))}else if(f.parent().parent().is("thead")){switch(h.get(0).className){case"datepickerViewDays":d.current.addMonths(f.hasClass("datepickerGoPrev")?-1:1);break;case"datepickerViewMonths":d.current.addYears(f.hasClass("datepickerGoPrev")?-1:1);break;case"datepickerViewYears":d.current.addYears(f.hasClass("datepickerGoPrev")?-12:12)}m=!0}}else if(f.is("td")&&!f.hasClass("datepickerDisabled")){switch(h.get(0).className){case"datepickerViewMonths":d.current.setMonth(h.find("tbody.datepickerMonths td").index(f)),d.current.setFullYear(parseInt(h.find("thead th.datepickerMonth span").text(),10)),d.current.addMonths(Math.floor(d.calendars/2)-i),h.get(0).className="datepickerViewDays";break;case"datepickerViewYears":d.current.setFullYear(parseInt(c.text(),10)),h.get(0).className="datepickerViewMonths";break;default:var n=parseInt(c.text(),10);switch(j.addMonths(i-Math.floor(d.calendars/2)),f.hasClass("datepickerNotInMonth")&&j.addMonths(n>15?-1:1),j.setDate(n),d.mode){case"multiple":n=j.setHours(0,0,0,0).valueOf(),a.inArray(n,d.date)>-1?a.each(d.date,function(a,b){if(b==n)return d.date.splice(a,1),!1}):d.date.push(n);break;case"range":d.lastSel||(d.date[0]=j.setHours(0,0,0,0).valueOf()),n=j.setHours(23,59,59,0).valueOf(),n<d.date[0]?(d.date[1]=d.date[0]+86399e3,d.date[0]=n-86399e3):d.date[1]=n,d.lastSel=!d.lastSel;break;default:d.date=j.valueOf()}}m=!0,l=!0}m&&e(this),l&&d.onChange.apply(this,k(d))}return!1},k=function(b){var c;return"single"==b.mode?(c=new Date(b.date),[g(c,b.format),c,b.el]):(c=[[],[],b.el],a.each(b.date,function(a,d){var e=new Date(d);c[0].push(g(e,b.format)),c[1].push(e)}),c)},l=function(){var a="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(a?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(a?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(a?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(a?document.documentElement.clientHeight:document.body.clientHeight)}},m=function(a,b,c){if(a==b)return!0;if(a.contains)return a.contains(b);if(a.compareDocumentPosition)return!!(16&a.compareDocumentPosition(b));for(var d=b.parentNode;d&&d!=c;){if(d==a)return!0;d=d.parentNode}return!1},n=function(b){var c=a("#"+a(this).data("datepickerId"));if(!c.is(":visible")){var d=c.get(0);e(d);var f=c.data("datepicker");f.onBeforeShow.apply(this,[c.get(0)]);var g=a(this).offset(),h=l(),j=g.top,k=g.left;a.css(d,"display");switch(c.css({visibility:"hidden",display:"block"}),i(d),f.position){case"top":j-=d.offsetHeight;break;case"left":k-=d.offsetWidth;break;case"right":k+=this.offsetWidth;break;case"bottom":j+=this.offsetHeight}j+d.offsetHeight>h.t+h.h&&(j=g.top-d.offsetHeight),j<h.t&&(j=g.top+this.offsetHeight+d.offsetHeight),k+d.offsetWidth>h.l+h.w&&(k=g.left-d.offsetWidth),k<h.l&&(k=g.left+this.offsetWidth),c.css({visibility:"visible",display:"block",top:j+"px",left:k+"px"}),0!=f.onShow.apply(this,[c.get(0)])&&c.show(),a(document).bind("mousedown",{cal:c,trigger:this},o)}return!1},o=function(b){b.target==b.data.trigger||m(b.data.cal.get(0),b.target,b.data.cal.get(0))||(0!=b.data.cal.data("datepicker").onHide.apply(this,[b.data.cal.get(0)])&&b.data.cal.hide(),a(document).unbind("mousedown",o))};return{init:function(g){return g=a.extend({},d,g||{}),h(g.locale),g.calendars=Math.max(1,parseInt(g.calendars,10)||1),g.mode=/single|multiple|range/.test(g.mode)?g.mode:"single",this.each(function(){if(!a(this).data("datepicker")){if(g.el=this,g.date.constructor==String&&(g.date=f(g.date,g.format),g.date.setHours(0,0,0,0)),"single"!=g.mode)if(g.date.constructor!=Array)g.date=[g.date.valueOf()],"range"==g.mode&&g.date.push(new Date(g.date[0]).setHours(23,59,59,0).valueOf());else{for(var d=0;d<g.date.length;d++)g.date[d]=f(g.date[d],g.format).setHours(0,0,0,0).valueOf();"range"==g.mode&&(g.date[1]=new Date(g.date[1]).setHours(23,59,59,0).valueOf())}else g.date=g.date.valueOf();g.current?g.current=f(g.current,g.format):g.current=new Date,g.current.setDate(1),g.current.setHours(0,0,0,0);var h,k="datepicker_"+parseInt(1e3*Math.random());g.id=k,a(this).data("datepickerId",g.id);var l=a(c.wrapper).attr("id",k).bind("click",j).data("datepicker",g);g.className&&l.addClass(g.className);for(var m="",d=0;d<g.calendars;d++)h=g.starts,d>0&&(m+=c.space),m+=tmpl(c.head.join(""),{week:g.locale.weekMin,prev:g.prev,next:g.next,day1:g.locale.daysMin[h++%7],day2:g.locale.daysMin[h++%7],day3:g.locale.daysMin[h++%7],day4:g.locale.daysMin[h++%7],day5:g.locale.daysMin[h++%7],day6:g.locale.daysMin[h++%7],day7:g.locale.daysMin[h++%7]});l.find("tr:first").append(m).find("table").addClass(b[g.view]),e(l.get(0)),g.flat?(l.appendTo(this).show().css("position","relative"),i(l.get(0))):(l.appendTo(document.body),a(this).bind(g.eventName,n))}})},showPicker:function(){return this.each(function(){a(this).data("datepickerId")&&n.apply(this)})},hidePicker:function(){return this.each(function(){a(this).data("datepickerId")&&a("#"+a(this).data("datepickerId")).hide()})},setDate:function(b,c){return this.each(function(){if(a(this).data("datepickerId")){var d=a("#"+a(this).data("datepickerId")),g=d.data("datepicker");if(g.date=b,g.date.constructor==String&&(g.date=f(g.date,g.format),g.date.setHours(0,0,0,0)),"single"!=g.mode)if(g.date.constructor!=Array)g.date=[g.date.valueOf()],"range"==g.mode&&g.date.push(new Date(g.date[0]).setHours(23,59,59,0).valueOf());else{for(var h=0;h<g.date.length;h++)g.date[h]=f(g.date[h],g.format).setHours(0,0,0,0).valueOf();"range"==g.mode&&(g.date[1]=new Date(g.date[1]).setHours(23,59,59,0).valueOf())}else g.date=g.date.valueOf();c&&(g.current=new Date("single"!=g.mode?g.date[0]:g.date)),e(d.get(0))}})},getDate:function(b){if(this.size()>0)return k(a("#"+a(this).data("datepickerId")).data("datepicker"))[b?0:1]},clear:function(){return this.each(function(){if(a(this).data("datepickerId")){var b=a("#"+a(this).data("datepickerId")),c=b.data("datepicker");"single"!=c.mode&&(c.date=[],e(b.get(0)))}})},fixLayout:function(){return this.each(function(){if(a(this).data("datepickerId")){var b=a("#"+a(this).data("datepickerId")),c=b.data("datepicker");c.flat&&i(b.get(0))}})}}}();a.fn.extend({DatePicker:b.init,DatePickerHide:b.hidePicker,DatePickerShow:b.showPicker,DatePickerSetDate:b.setDate,DatePickerGetDate:b.getDate,DatePickerClear:b.clear,DatePickerLayout:b.fixLayout})}(jQuery),function(){var a={};this.tmpl=function b(c,d){var e=/\W/.test(c)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):a[c]=a[c]||b(document.getElementById(c).innerHTML);return d?e(d):e}}(),function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;w={paneClass:"pane",sliderClass:"slider",contentClass:"content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},s="scrollbar",r="scroll",k="mousedown",l="mousemove",n="mousewheel",m="mouseup",q="resize",h="drag",u="up",p="panedown",f="DOMMouseScroll",g="down",v="wheel",i="keydown",j="keyup",t="touchmove",d="Microsoft Internet Explorer"===b.navigator.appName&&/msie 7./i.test(b.navigator.appVersion)&&b.ActiveXObject,e=null,x=function(){var a,b,d;return a=c.createElement("div"),b=a.style,b.position="absolute",b.width="100px",b.height="100px",b.overflow=r,b.top="-9999px",c.body.appendChild(a),d=a.offsetWidth-a.clientWidth,c.body.removeChild(a),d},o=function(){function i(d,f){this.el=d,this.options=f,e||(e=x()),this.$el=a(this.el),this.doc=a(this.options.documentContext||c),this.win=a(this.options.windowContext||b),this.$content=this.$el.children("."+f.contentClass),this.$content.attr("tabindex",0),this.content=this.$content[0],this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return i.prototype.preventScrolling=function(a,b){if(this.isActive)if(a.type===f)(b===g&&a.originalEvent.detail>0||b===u&&a.originalEvent.detail<0)&&a.preventDefault();else if(a.type===n){if(!a.originalEvent||!a.originalEvent.wheelDelta)return;(b===g&&a.originalEvent.wheelDelta<0||b===u&&a.originalEvent.wheelDelta>0)&&a.preventDefault()}},i.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},i.prototype.updateScrollValues=function(){var a;a=this.content,this.maxScrollTop=a.scrollHeight-a.clientHeight,this.contentScrollTop=a.scrollTop,this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},i.prototype.createEvents=function(){var a=this;this.events={down:function(b){return a.isBeingDragged=!0,a.offsetY=b.pageY-a.slider.offset().top,a.pane.addClass("active"),a.doc.bind(l,a.events[h]).bind(m,a.events[u]),!1},drag:function(b){return a.sliderY=b.pageY-a.$el.offset().top-a.offsetY,a.scroll(),a.updateScrollValues(),a.contentScrollTop>=a.maxScrollTop?a.$el.trigger("scrollend"):0===a.contentScrollTop&&a.$el.trigger("scrolltop"),!1},up:function(b){return a.isBeingDragged=!1,a.pane.removeClass("active"),a.doc.unbind(l,a.events[h]).unbind(m,a.events[u]),!1},resize:function(b){a.reset()},panedown:function(b){return a.sliderY=(b.offsetY||b.originalEvent.layerY)-.5*a.sliderHeight,a.scroll(),a.events.down(b),!1},scroll:function(b){a.isBeingDragged||(a.updateScrollValues(),a.iOSNativeScrolling||(a.sliderY=a.sliderTop,a.slider.css({top:a.sliderTop})),null!=b&&(a.contentScrollTop>=a.maxScrollTop?(a.options.preventPageScrolling&&a.preventScrolling(b,g),a.$el.trigger("scrollend")):0===a.contentScrollTop&&(a.options.preventPageScrolling&&a.preventScrolling(b,u),a.$el.trigger("scrolltop"))))},wheel:function(b){if(null!=b)return a.sliderY+=-b.wheelDeltaY||-b.delta,a.scroll(),!1}}},i.prototype.addEvents=function(){var a;this.removeEvents(),a=this.events,this.options.disableResize||this.win.bind(q,a[q]),this.iOSNativeScrolling||(this.slider.bind(k,a[g]),this.pane.bind(k,a[p]).bind(""+n+" "+f,a[v])),this.$content.bind(""+r+" "+n+" "+f+" "+t,a[r])},i.prototype.removeEvents=function(){var a;a=this.events,this.win.unbind(q,a[q]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+r+" "+n+" "+f+" "+t,a[r])},i.prototype.generate=function(){var a,b,c,d,f;return c=this.options,d=c.paneClass,f=c.sliderClass,a=c.contentClass,this.$el.find("."+d).length||this.$el.find("."+f).length||this.$el.append('<div class="'+d+'"><div class="'+f+'" /></div>'),this.pane=this.$el.children("."+d),this.slider=this.pane.find("."+f),e&&(b="rtl"===this.$el.css("direction")?{left:-e}:{right:-e},this.$el.addClass("has-scrollbar")),null!=b&&this.$content.css(b),this},i.prototype.restore=function(){this.stopped=!1,this.pane.show(),this.addEvents()},i.prototype.reset=function(){var a,b,c,f,g,h,i,j,k;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),a=this.content,c=a.style,f=c.overflowY,d&&this.$content.css({height:this.$content.height()}),b=a.scrollHeight+e,h=this.pane.outerHeight(),j=parseInt(this.pane.css("top"),10),g=parseInt(this.pane.css("bottom"),10),i=h+j+g,k=Math.round(i/b*i),k<this.options.sliderMinHeight?k=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&k>this.options.sliderMaxHeight&&(k=this.options.sliderMaxHeight),f===r&&c.overflowX!==r&&(k+=e),this.maxSliderTop=i-k,this.contentHeight=b,this.paneHeight=h,this.paneOuterHeight=i,this.sliderHeight=k,this.slider.height(k),this.events.scroll(),this.pane.show(),this.isActive=!0,a.scrollHeight===a.clientHeight||this.pane.outerHeight(!0)>=a.scrollHeight&&f!==r?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===a.scrollHeight&&f===r?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),this)},i.prototype.scroll=function(){if(this.isActive)return this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop((this.paneHeight-this.contentHeight+e)*this.sliderY/this.maxSliderTop*-1),this.iOSNativeScrolling||this.slider.css({top:this.sliderY}),this},i.prototype.scrollBottom=function(a){if(this.isActive)return this.reset(),this.$content.scrollTop(this.contentHeight-this.$content.height()-a).trigger(n),this},i.prototype.scrollTop=function(a){if(this.isActive)return this.reset(),this.$content.scrollTop(+a).trigger(n),this},i.prototype.scrollTo=function(b){if(this.isActive)return this.reset(),this.scrollTop(a(b).get(0).offsetTop),this},i.prototype.stop=function(){return this.stopped=!0,this.removeEvents(),this.pane.hide(),this},i.prototype.flash=function(){var a=this;if(this.isActive)return this.reset(),this.pane.addClass("flashed"),setTimeout(function(){a.pane.removeClass("flashed")},this.options.flashDelay),this},i}(),a.fn.nanoScroller=function(b){var c=!0;return this.each(function(){var d,e;if((e=this.nanoscroller)||(d=a.extend({},w,b),this.nanoscroller=e=new o(this,d)),b&&"object"==typeof b){if(a.extend(e.options,b),b.scrollBottom)return e.scrollBottom(b.scrollBottom);if(b.scrollTop)return e.scrollTop(b.scrollTop);if(b.scrollTo)return e.scrollTo(b.scrollTo);if("bottom"===b.scroll)return e.scrollBottom(0);if("top"===b.scroll)return e.scrollTop(0);if(b.scroll&&b.scroll instanceof a)return e.scrollTo(b.scroll);if(b.stop)return e.stop();if(b.flash)return e.flash();b.noReset&&(c=!1)}if(c)return e.reset()})}}(jQuery,window,document),function(a,b,c){function d(b){return"object"==typeof b&&(j=a.extend({},k,b)),a.extend({},j||k)}function e(a){if("string"==typeof a)return a.length?a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"):a}function f(a,b){b.is(a.wrap)&&b.text()==a.str?b.addClass(a.className):b.html(b.html().replace(a.replgx,function(b,c){return c?"<"+a.wrap+' class="'+a.className+'">'+c+"</"+a.wrap+">":b}))}function g(b,c){c.find("*").filter(function(c,d){return b.rgx.test(a(d).text())}).each(function(c,d){f(b,a(d))})}function h(b,c,h,i){"string"==typeof c&&c.length&&(i&&d(h),this.$ele=a(b),this.options=a.extend({},j||k,h),this.options.str=""+c,this.options.rgx=new RegExp("(\\b"+e(c)+"\\b)",this.options.caseSensitive?"":"i"),this.options.replgx=new RegExp("<[^>]+>|(\\b"+e(c)+"\\b)",this.options.caseSensitive?"g":"gi"),this.$ele.length&&this.options.rgx.test(this.$ele.text())&&(this.kids=this.$ele.children(),this.kids.length<1?f(this.options,this.$ele):g(this.options,this.$ele)))}var i="strEle",j=null,k={caseSensitive:!1,className:"string-found",wrap:"span"};a.fn[i]=function(a,b,c){return new h(this,a,b,c),this},a.fn[i+"Opts"]=function(a){return d(a)}}(jQuery,window,document),function(a){a.belowthefold=function(b,c){var d=a(window).height()+a(window).scrollTop();return d<=a(b).offset().top-c.threshold},a.abovethetop=function(b,c){var d=a(window).scrollTop();return d>=a(b).offset().top+a(b).height()-c.threshold},a.rightofscreen=function(b,c){var d=a(window).width()+a(window).scrollLeft();return d<=a(b).offset().left-c.threshold},a.leftofscreen=function(b,c){var d=a(window).scrollLeft();return d>=a(b).offset().left+a(b).width()-c.threshold},a.inviewport=function(b,c){var d=a(b),e=d.offset(),f=a(window),g=f.scrollTop(),h=c.threshold;if(e.top-h<g){if(!(e.top+d.height()+h>=g))return!1}else if(!(e.top-h<=g+f.height()))return!1;var i=f.scrollLeft();if(e.left-h<i){if(!(e.left+d.width()+h>=i))return!1}else if(!(e.left-h<=i+f.width()))return!1;return!0},a.extend(a.expr[":"],{"below-the-fold":function(b,c,d){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b,c,d){return a.abovethetop(b,{threshold:0})},"left-of-screen":function(b,c,d){return a.leftofscreen(b,{threshold:0})},"right-of-screen":function(b,c,d){return a.rightofscreen(b,{threshold:0})},"in-viewport":function(b,c,d){return a.inviewport(b,{threshold:500})}})}(jQuery),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.io=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=a("./lib/")},{"./lib/":2}],2:[function(a,b,c){b.exports=a("./socket"),b.exports.parser=a("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(a,b,c){(function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);b=b||{},a&&"object"==typeof a&&(b=a,a=null),a?(a=k(a),b.hostname=a.host,b.secure="https"==a.protocol||"wss"==a.protocol,b.port=a.port,a.query&&(b.query=a.query)):b.host&&(b.hostname=k(b.host).host),this.secure=null!=b.secure?b.secure:c.location&&"https:"==location.protocol,b.hostname&&!b.port&&(b.port=this.secure?"443":"80"),this.agent=b.agent||!1,this.hostname=b.hostname||(c.location?location.hostname:"localhost"),this.port=b.port||(c.location&&location.port?location.port:this.secure?443:80),this.query=b.query||{},"string"==typeof this.query&&(this.query=m.decode(this.query)),this.upgrade=!1!==b.upgrade,this.path=(b.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!b.forceJSONP,this.jsonp=!1!==b.jsonp,this.forceBase64=!!b.forceBase64,this.enablesXDR=!!b.enablesXDR,this.timestampParam=b.timestampParam||"t",this.timestampRequests=b.timestampRequests,this.transports=b.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=b.policyPort||843,this.rememberUpgrade=b.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=b.onlyBinaryUpgrades,this.perMessageDeflate=!1!==b.perMessageDeflate&&(b.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=b.pfx||null,this.key=b.key||null,this.passphrase=b.passphrase||null,this.cert=b.cert||null,this.ca=b.ca||null,this.ciphers=b.ciphers||null,this.rejectUnauthorized=void 0===b.rejectUnauthorized?null:b.rejectUnauthorized;var e="object"==typeof c&&c;e.global===e&&b.extraHeaders&&Object.keys(b.extraHeaders).length>0&&(this.extraHeaders=b.extraHeaders),this.open()}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var f=a("./transports"),g=a("component-emitter"),h=a("debug")("engine.io-client:socket"),i=a("indexof"),j=a("engine.io-parser"),k=a("parseuri"),l=a("parsejson"),m=a("parseqs");b.exports=d,d.priorWebsocketSuccess=!1,g(d.prototype),d.protocol=j.protocol,d.Socket=d,d.Transport=a("./transport"),d.transports=a("./transports"),d.parser=a("engine.io-parser"),d.prototype.createTransport=function(a){h('creating transport "%s"',a);var b=e(this.query);b.EIO=j.protocol,b.transport=a,this.id&&(b.sid=this.id);var c=new f[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:b,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return c},d.prototype.open=function(){var a;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1)a="websocket";else{if(0===this.transports.length){var b=this;return void setTimeout(function(){b.emit("error","No transports available")},0)}a=this.transports[0]}this.readyState="opening";try{a=this.createTransport(a)}catch(c){return this.transports.shift(),void this.open()}a.open(),this.setTransport(a)},d.prototype.setTransport=function(a){h("setting transport %s",a.name);var b=this;this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=a,a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})},d.prototype.probe=function(a){function b(){if(m.onlyBinaryUpgrades){var b=!this.supportsBinary&&m.transport.supportsBinary;l=l||b}l||(h('probe transport "%s" opened',a),k.send([{type:"ping",data:"probe"}]),k.once("packet",function(b){if(!l)if("pong"==b.type&&"probe"==b.data){if(h('probe transport "%s" pong',a),m.upgrading=!0,m.emit("upgrading",k),!k)return;d.priorWebsocketSuccess="websocket"==k.name,h('pausing current transport "%s"',m.transport.name),m.transport.pause(function(){l||"closed"!=m.readyState&&(h("changing transport and sending upgrade packet"),j(),m.setTransport(k),k.send([{type:"upgrade"}]),m.emit("upgrade",k),k=null,m.upgrading=!1,m.flush())})}else{h('probe transport "%s" failed',a);var c=new Error("probe error");c.transport=k.name,m.emit("upgradeError",c)}}))}function c(){l||(l=!0,j(),k.close(),k=null)}function e(b){var d=new Error("probe error: "+b);d.transport=k.name,c(),h('probe transport "%s" failed because of error: %s',a,b),m.emit("upgradeError",d)}function f(){e("transport closed")}function g(){e("socket closed")}function i(a){k&&a.name!=k.name&&(h('"%s" works - aborting "%s"',a.name,k.name),c())}function j(){k.removeListener("open",b),k.removeListener("error",e),k.removeListener("close",f),m.removeListener("close",g),m.removeListener("upgrading",i)}h('probing transport "%s"',a);var k=this.createTransport(a,{probe:1}),l=!1,m=this;d.priorWebsocketSuccess=!1,k.once("open",b),k.once("error",e),k.once("close",f),this.once("close",g),this.once("upgrading",i),k.open()},d.prototype.onOpen=function(){if(h("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){h("starting upgrade probes");for(var a=0,b=this.upgrades.length;a<b;a++)this.probe(this.upgrades[a])}},d.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(h('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case"open":this.onHandshake(l(a.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var b=new Error("server error");b.code=a.data,this.onError(b);break;case"message":this.emit("data",a.data),this.emit("message",a.data)}else h('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(a){this.emit("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){"closed"!=b.readyState&&b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)},d.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer),a.pingIntervalTimer=setTimeout(function(){h("writing ping packet - expecting pong within %sms",a.pingTimeout),a.ping(),a.onHeartbeat(a.pingTimeout)},a.pingInterval)},d.prototype.ping=function(){var a=this;this.sendPacket("ping",function(){a.emit("ping")})},d.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(h("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(a,b,c){return this.sendPacket("message",a,b,c),this},d.prototype.sendPacket=function(a,b,c,d){if("function"==typeof b&&(d=b,b=void 0),"function"==typeof c&&(d=c,c=null),"closing"!=this.readyState&&"closed"!=this.readyState){c=c||{},c.compress=!1!==c.compress;var e={type:a,data:b,options:c};this.emit("packetCreate",e),this.writeBuffer.push(e),d&&this.once("flush",d),this.flush()}},d.prototype.close=function(){function a(){d.onClose("forced close"),h("socket closing - telling transport to close"),d.transport.close()}function b(){d.removeListener("upgrade",b),d.removeListener("upgradeError",b),a()}function c(){d.once("upgrade",b),d.once("upgradeError",b)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var d=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?c():a()}):this.upgrading?c():a()}return this},d.prototype.onError=function(a){h("socket error %j",a),d.priorWebsocketSuccess=!1,this.emit("error",a),this.onClose("transport error",a)},d.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){h('socket close with reason: "%s"',a);var c=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",a,b),c.writeBuffer=[],c.prevBufferLen=0}},d.prototype.filterUpgrades=function(a){for(var b=[],c=0,d=a.length;c<d;c++)~i(this.transports,a[c])&&b.push(a[c]);return b}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(a,b,c){function d(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.extraHeaders=a.extraHeaders}var e=a("engine.io-parser"),f=a("component-emitter");b.exports=d,f(d.prototype),d.prototype.onError=function(a,b){var c=new Error(a);return c.type="TransportError",c.description=b,this.emit("error",c),this},d.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},d.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},d.prototype.send=function(a){if("open"!=this.readyState)throw new Error("Transport not open");this.write(a)},d.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},d.prototype.onData=function(a){var b=e.decodePacket(a,this.socket.binaryType);this.onPacket(b)},d.prototype.onPacket=function(a){this.emit("packet",a)},d.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(a,b,c){(function(b){function d(a){var c,d=!1,h=!1,i=!1!==a.jsonp;if(b.location){var j="https:"==location.protocol,k=location.port;k||(k=j?443:80),d=a.hostname!=location.hostname||k!=a.port,h=a.secure!=j}if(a.xdomain=d,a.xscheme=h,c=new e(a),"open"in c&&!a.forceJSONP)return new f(a);if(!i)throw new Error("JSONP disabled");return new g(a)}var e=a("xmlhttprequest-ssl"),f=a("./polling-xhr"),g=a("./polling-jsonp"),h=a("./websocket");c.polling=d,c.websocket=h}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(a,b,c){(function(c){function d(){}function e(a){f.call(this,a),this.query=this.query||{},h||(c.___eio||(c.___eio=[]),h=c.___eio),this.index=h.length;var b=this;h.push(function(a){b.onData(a)}),this.query.j=this.index,c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){b.script&&(b.script.onerror=d)},!1)}var f=a("./polling"),g=a("component-inherit");b.exports=e;var h,i=/\n/g,j=/\\n/g;g(e,f),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),f.prototype.doClose.call(this)},e.prototype.doPoll=function(){var a=this,b=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),b.async=!0,b.src=this.uri(),b.onerror=function(b){a.onError("jsonp poll error",b)};var c=document.getElementsByTagName("script")[0];c?c.parentNode.insertBefore(b,c):(document.head||document.body).appendChild(b),this.script=b;var d="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);d&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},e.prototype.doWrite=function(a,b){function c(){d(),b()}function d(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(a){e.onError("jsonp polling iframe removal error",a)}try{var b='<iframe src="javascript:0" name="'+e.iframeId+'">';f=document.createElement(b)}catch(a){f=document.createElement("iframe"),f.name=e.iframeId,f.src="javascript:0"}f.id=e.iframeId,e.form.appendChild(f),e.iframe=f}var e=this;if(!this.form){var f,g=document.createElement("form"),h=document.createElement("textarea"),k=this.iframeId="eio_iframe_"+this.index;g.className="socketio",g.style.position="absolute",g.style.top="-1000px",g.style.left="-1000px",g.target=k,g.method="POST",g.setAttribute("accept-charset","utf-8"),h.name="d",g.appendChild(h),document.body.appendChild(g),this.form=g,this.area=h}this.form.action=this.uri(),d(),a=a.replace(j,"\\\n"),this.area.value=a.replace(i,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling":8,"component-inherit":16}],7:[function(a,b,c){(function(c){function d(){}function e(a){if(i.call(this,a),c.location){var b="https:"==location.protocol,d=location.port;d||(d=b?443:80),this.xd=a.hostname!=c.location.hostname||d!=a.port,this.xs=a.secure!=b}else this.extraHeaders=a.extraHeaders}function f(a){this.method=a.method||"GET",this.uri=a.uri,this.xd=!!a.xd,this.xs=!!a.xs,this.async=!1!==a.async,this.data=void 0!=a.data?a.data:null,this.agent=a.agent,this.isBinary=a.isBinary,this.supportsBinary=a.supportsBinary,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.extraHeaders=a.extraHeaders,this.create()}function g(){for(var a in f.requests)f.requests.hasOwnProperty(a)&&f.requests[a].abort()}var h=a("xmlhttprequest-ssl"),i=a("./polling"),j=a("component-emitter"),k=a("component-inherit"),l=a("debug")("engine.io-client:polling-xhr");b.exports=e,b.exports.Request=f,k(e,i),e.prototype.supportsBinary=!0,e.prototype.request=function(a){return a=a||{},a.uri=this.uri(),a.xd=this.xd,a.xs=this.xs,a.agent=this.agent||!1,a.supportsBinary=this.supportsBinary,a.enablesXDR=this.enablesXDR,a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized,a.extraHeaders=this.extraHeaders,new f(a)},e.prototype.doWrite=function(a,b){var c="string"!=typeof a&&void 0!==a,d=this.request({method:"POST",data:a,isBinary:c}),e=this;d.on("success",b),d.on("error",function(a){e.onError("xhr post error",a)}),this.sendXhr=d},e.prototype.doPoll=function(){l("xhr poll");var a=this.request(),b=this;a.on("data",function(a){b.onData(a)}),a.on("error",function(a){b.onError("xhr poll error",a)}),this.pollXhr=a},j(f.prototype),f.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized;var b=this.xhr=new h(a),d=this;try{l("xhr open %s: %s",this.method,this.uri),b.open(this.method,this.uri,this.async);try{if(this.extraHeaders){b.setDisableHeaderCheck(!0);for(var e in this.extraHeaders)this.extraHeaders.hasOwnProperty(e)&&b.setRequestHeader(e,this.extraHeaders[e])}}catch(g){}if(this.supportsBinary&&(b.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?b.setRequestHeader("Content-type","application/octet-stream"):b.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(g){}"withCredentials"in b&&(b.withCredentials=!0),this.hasXDR()?(b.onload=function(){d.onLoad()},b.onerror=function(){d.onError(b.responseText)}):b.onreadystatechange=function(){4==b.readyState&&(200==b.status||1223==b.status?d.onLoad():setTimeout(function(){d.onError(b.status)},0))},l("xhr data %s",this.data),b.send(this.data)}catch(g){return void setTimeout(function(){d.onError(g)},0)}c.document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(a){this.emit("data",a),this.onSuccess()},f.prototype.onError=function(a){this.emit("error",a),this.cleanup(!0)},f.prototype.cleanup=function(a){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=d:this.xhr.onreadystatechange=d,a)try{this.xhr.abort()}catch(b){}c.document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var a;try{var b;try{b=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(c){}if("application/octet-stream"===b)a=this.xhr.response;else if(this.supportsBinary)try{a=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(c){for(var d=new Uint8Array(this.xhr.response),e=[],f=0,g=d.length;f<g;f++)e.push(d[f]);a=String.fromCharCode.apply(null,e)}else a=this.xhr.responseText}catch(c){this.onError(c)}null!=a&&this.onData(a)},f.prototype.hasXDR=function(){return"undefined"!=typeof c.XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},c.document&&(f.requestsCount=0,f.requests={},c.attachEvent?c.attachEvent("onunload",g):c.addEventListener&&c.addEventListener("beforeunload",g,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(a,b,c){function d(a){var b=a&&a.forceBase64;k&&!b||(this.supportsBinary=!1),e.call(this,a)}var e=a("../transport"),f=a("parseqs"),g=a("engine.io-parser"),h=a("component-inherit"),i=a("yeast"),j=a("debug")("engine.io-client:polling");b.exports=d;var k=function(){var b=a("xmlhttprequest-ssl"),c=new b({xdomain:!1});return null!=c.responseType}();h(d,e),d.prototype.name="polling",d.prototype.doOpen=function(){this.poll()},d.prototype.pause=function(a){function b(){j("paused"),c.readyState="paused",a()}var c=this;if(this.readyState="pausing",this.polling||!this.writable){var d=0;this.polling&&(j("we are currently polling - waiting to pause"),d++,this.once("pollComplete",function(){j("pre-pause polling complete"),--d||b()})),this.writable||(j("we are currently writing - waiting to pause"),d++,this.once("drain",function(){j("pre-pause writing complete"),--d||b()}))}else b()},d.prototype.poll=function(){j("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},d.prototype.onData=function(a){var b=this;j("polling got data %s",a);var c=function(a,c,d){return"opening"==b.readyState&&b.onOpen(),"close"==a.type?(b.onClose(),!1):void b.onPacket(a)};g.decodePayload(a,this.socket.binaryType,c),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():j('ignoring poll - transport state "%s"',this.readyState))},d.prototype.doClose=function(){function a(){j("writing close packet"),b.write([{type:"close"}])}var b=this;"open"==this.readyState?(j("transport open - closing"),a()):(j("transport not open - deferring close"),this.once("open",a))},d.prototype.write=function(a){var b=this;this.writable=!1;var c=function(){b.writable=!0,b.emit("drain")},b=this;g.encodePayload(a,this.supportsBinary,function(a){b.doWrite(a,c)})},d.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",c="";!1!==this.timestampRequests&&(a[this.timestampParam]=i()),this.supportsBinary||a.sid||(a.b64=1),a=f.encode(a),this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(c=":"+this.port),a.length&&(a="?"+a);var d=this.hostname.indexOf(":")!==-1;return b+"://"+(d?"["+this.hostname+"]":this.hostname)+c+this.path+a}},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(a,b,c){(function(c){function d(a){var b=a&&a.forceBase64;b&&(this.supportsBinary=!1),this.perMessageDeflate=a.perMessageDeflate,e.call(this,a)}var e=a("../transport"),f=a("engine.io-parser"),g=a("parseqs"),h=a("component-inherit"),i=a("yeast"),j=a("debug")("engine.io-client:websocket"),k=c.WebSocket||c.MozWebSocket,l=k;if(!l&&"undefined"==typeof window)try{l=a("ws")}catch(m){}b.exports=d,h(d,e),d.prototype.name="websocket",d.prototype.supportsBinary=!0,d.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b=void 0,c={agent:this.agent,perMessageDeflate:this.perMessageDeflate};c.pfx=this.pfx,c.key=this.key,c.passphrase=this.passphrase,c.cert=this.cert,c.ca=this.ca,c.ciphers=this.ciphers,c.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(c.headers=this.extraHeaders),this.ws=k?new l(a):new l(a,b,c),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},d.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(b){a.onData(b.data)},this.ws.onerror=function(b){a.onError("websocket error",b)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(d.prototype.onData=function(a){var b=this;setTimeout(function(){e.prototype.onData.call(b,a)},0)}),d.prototype.write=function(a){function b(){d.emit("flush"),setTimeout(function(){d.writable=!0,d.emit("drain")},0)}var d=this;this.writable=!1;for(var e=a.length,g=0,h=e;g<h;g++)!function(a){f.encodePacket(a,d.supportsBinary,function(f){if(!k){var g={};if(a.options&&(g.compress=a.options.compress),d.perMessageDeflate){var h="string"==typeof f?c.Buffer.byteLength(f):f.length;h<d.perMessageDeflate.threshold&&(g.compress=!1)}}try{k?d.ws.send(f):d.ws.send(f,g)}catch(i){j("websocket closed before onclose event")}--e||b()})}(a[g])},d.prototype.onClose=function(){e.prototype.onClose.call(this)},d.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},d.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(c=":"+this.port),this.timestampRequests&&(a[this.timestampParam]=i()),this.supportsBinary||(a.b64=1),a=g.encode(a),a.length&&(a="?"+a);var d=this.hostname.indexOf(":")!==-1;return b+"://"+(d?"["+this.hostname+"]":this.hostname)+c+this.path+a},d.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===d.prototype.name)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,ws:void 0,yeast:30}],10:[function(a,b,c){var d=a("has-cors");b.exports=function(a){var b=a.xdomain,c=a.xscheme,e=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!b||d))return new XMLHttpRequest}catch(f){}try{if("undefined"!=typeof XDomainRequest&&!c&&e)return new XDomainRequest}catch(f){}if(!b)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(f){}}},{"has-cors":22}],11:[function(a,b,c){function d(a,b,c){function d(a,e){if(d.count<=0)throw new Error("after called too many times");--d.count,a?(f=!0,b(a),b=c):0!==d.count||f||b(null,e)}var f=!1;return c=c||e,d.count=a,0===a?b():d}function e(){}b.exports=d},{}],12:[function(a,b,c){b.exports=function(a,b,c){var d=a.byteLength;if(b=b||0,c=c||d,a.slice)return a.slice(b,c);if(b<0&&(b+=d),c<0&&(c+=d),c>d&&(c=d),b>=d||b>=c||0===d)return new ArrayBuffer(0);for(var e=new Uint8Array(a),f=new Uint8Array(c-b),g=b,h=0;g<c;g++,h++)f[h]=e[g];return f.buffer}},{}],13:[function(a,b,c){!function(a){"use strict";c.encode=function(b){var c,d=new Uint8Array(b),e=d.length,f="";for(c=0;c<e;c+=3)f+=a[d[c]>>2],f+=a[(3&d[c])<<4|d[c+1]>>4],f+=a[(15&d[c+1])<<2|d[c+2]>>6],f+=a[63&d[c+2]];return e%3===2?f=f.substring(0,f.length-1)+"=":e%3===1&&(f=f.substring(0,f.length-2)+"=="),f},c.decode=function(b){var c,d,e,f,g,h=.75*b.length,i=b.length,j=0;"="===b[b.length-1]&&(h--,"="===b[b.length-2]&&h--);var k=new ArrayBuffer(h),l=new Uint8Array(k);for(c=0;c<i;c+=4)d=a.indexOf(b[c]),e=a.indexOf(b[c+1]),f=a.indexOf(b[c+2]),g=a.indexOf(b[c+3]),l[j++]=d<<2|e>>4,l[j++]=(15&e)<<4|f>>2,l[j++]=(3&f)<<6|63&g;return k}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(a,b,c){(function(a){function c(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.buffer instanceof ArrayBuffer){var d=c.buffer;if(c.byteLength!==d.byteLength){var e=new Uint8Array(c.byteLength);e.set(new Uint8Array(d,c.byteOffset,c.byteLength)),d=e.buffer}a[b]=d}}}function d(a,b){b=b||{};var d=new f;c(a);for(var e=0;e<a.length;e++)d.append(a[e]);return b.type?d.getBlob(b.type):d.getBlob()}function e(a,b){return c(a),new Blob(a,b||{})}var f=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,g=function(){try{var a=new Blob(["hi"]);return 2===a.size}catch(b){return!1}}(),h=g&&function(){try{var a=new Blob([new Uint8Array([1,2])]);return 2===a.size}catch(b){return!1}}(),i=f&&f.prototype.append&&f.prototype.getBlob;b.exports=function(){return g?h?a.Blob:e:i?d:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],15:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}b.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],16:[function(a,b,c){b.exports=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],17:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(b){}}function h(){var a;try{a=c.storage.debug}catch(b){}return a}function i(){try{return window.localStorage}catch(a){}}c=b.exports=a("./debug"),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:i(),c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{"./debug":18}],18:[function(a,b,c){function d(){return c.colors[k++%c.colors.length]}function e(a){function b(){}function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){if("%%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&&(g=c.formatArgs.apply(a,g));var i=e.log||c.log||console.log.bind(console);i.apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;e<d;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;b<d;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;b<d;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a("ms"),c.names=[],c.skips=[],c.formatters={};var j,k=0},{ms:25}],19:[function(a,b,c){(function(b){function d(a,b){var d="b"+c.packets[a.type]+a.data.data;return b(d)}function e(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=a.data,f=new Uint8Array(e),g=new Uint8Array(1+e.byteLength);g[0]=r[a.type];for(var h=0;h<f.length;h++)g[h+1]=f[h];return d(g.buffer)}function f(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=new FileReader;return e.onload=function(){a.data=e.result,c.encodePacket(a,b,!0,d)},e.readAsArrayBuffer(a.data)}function g(a,b,d){if(!b)return c.encodeBase64Packet(a,d);if(q)return f(a,b,d);var e=new Uint8Array(1);e[0]=r[a.type];var g=new u([e.buffer,a.data]);return d(g)}function h(a,b,c){for(var d=new Array(a.length),e=m(a.length,c),f=function(a,c,e){b(c,function(b,c){d[a]=c,e(b,d)})},g=0;g<a.length;g++)f(g,a[g],e)}var i=a("./keys"),j=a("has-binary"),k=a("arraybuffer.slice"),l=a("base64-arraybuffer"),m=a("after"),n=a("utf8"),o=navigator.userAgent.match(/Android/i),p=/PhantomJS/i.test(navigator.userAgent),q=o||p;c.protocol=3;var r=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},s=i(r),t={type:"error",data:"parser error"},u=a("blob");c.encodePacket=function(a,c,f,h){"function"==typeof c&&(h=c,c=!1),"function"==typeof f&&(h=f,f=null);var i=void 0===a.data?void 0:a.data.buffer||a.data;if(b.ArrayBuffer&&i instanceof ArrayBuffer)return e(a,c,h);if(u&&i instanceof b.Blob)return g(a,c,h);if(i&&i.base64)return d(a,h);var j=r[a.type];return void 0!==a.data&&(j+=f?n.encode(String(a.data)):String(a.data)),h(""+j)},c.encodeBase64Packet=function(a,d){var e="b"+c.packets[a.type];if(u&&a.data instanceof b.Blob){var f=new FileReader;return f.onload=function(){var a=f.result.split(",")[1];d(e+a)},f.readAsDataURL(a.data)}var g;try{g=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(h){for(var i=new Uint8Array(a.data),j=new Array(i.length),k=0;k<i.length;k++)j[k]=i[k];g=String.fromCharCode.apply(null,j)}return e+=b.btoa(g),d(e)},c.decodePacket=function(a,b,d){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),b);if(d)try{a=n.decode(a)}catch(e){return t}var f=a.charAt(0);return Number(f)==f&&s[f]?a.length>1?{type:s[f],data:a.substring(1)}:{type:s[f]}:t}var g=new Uint8Array(a),f=g[0],h=k(a,1);return u&&"blob"===b&&(h=new u([h])),{type:s[f],data:h}},c.decodeBase64Packet=function(a,c){var d=s[a.charAt(0)];if(!b.ArrayBuffer)return{type:d,data:{base64:!0,data:a.substr(1)}};var e=l.decode(a.substr(1));return"blob"===c&&u&&(e=new u([e])),{type:d,data:e}},c.encodePayload=function(a,b,d){function e(a){return a.length+":"+a}function f(a,d){c.encodePacket(a,!!g&&b,!0,function(a){d(null,e(a))})}"function"==typeof b&&(d=b,b=null);var g=j(a);return b&&g?u&&!q?c.encodePayloadAsBlob(a,d):c.encodePayloadAsArrayBuffer(a,d):a.length?void h(a,f,function(a,b){return d(b.join(""))}):d("0:")},c.decodePayload=function(a,b,d){if("string"!=typeof a)return c.decodePayloadAsBinary(a,b,d);"function"==typeof b&&(d=b,b=null);var e;if(""==a)return d(t,0,1);for(var f,g,h="",i=0,j=a.length;i<j;i++){var k=a.charAt(i);if(":"!=k)h+=k;else{if(""==h||h!=(f=Number(h)))return d(t,0,1);if(g=a.substr(i+1,f),h!=g.length)return d(t,0,1);if(g.length){if(e=c.decodePacket(g,b,!0),t.type==e.type&&t.data==e.data)return d(t,0,1);var l=d(e,i+f,j);if(!1===l)return}i+=f,h=""}}return""!=h?d(t,0,1):void 0},c.encodePayloadAsArrayBuffer=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){return b(null,a)})}return a.length?void h(a,d,function(a,c){var d=c.reduce(function(a,b){var c;return c="string"==typeof b?b.length:b.byteLength,a+c.toString().length+c+2},0),e=new Uint8Array(d),f=0;return c.forEach(function(a){var b="string"==typeof a,c=a;if(b){for(var d=new Uint8Array(a.length),g=0;g<a.length;g++)d[g]=a.charCodeAt(g);c=d.buffer}b?e[f++]=0:e[f++]=1;for(var h=c.byteLength.toString(),g=0;g<h.length;g++)e[f++]=parseInt(h[g]);e[f++]=255;for(var d=new Uint8Array(c),g=0;g<d.length;g++)e[f++]=d[g]}),b(e.buffer)}):b(new ArrayBuffer(0))},c.encodePayloadAsBlob=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){var c=new Uint8Array(1);if(c[0]=1,"string"==typeof a){for(var d=new Uint8Array(a.length),e=0;e<a.length;e++)d[e]=a.charCodeAt(e);a=d.buffer,c[0]=0}for(var f=a instanceof ArrayBuffer?a.byteLength:a.size,g=f.toString(),h=new Uint8Array(g.length+1),e=0;e<g.length;e++)h[e]=parseInt(g[e]);if(h[g.length]=255,u){var i=new u([c.buffer,h.buffer,a]);b(null,i)}})}h(a,d,function(a,c){return b(new u(c))})},c.decodePayloadAsBinary=function(a,b,d){"function"==typeof b&&(d=b,b=null);for(var e=a,f=[],g=!1;e.byteLength>0;){for(var h=new Uint8Array(e),i=0===h[0],j="",l=1;255!=h[l];l++){if(j.length>310){g=!0;break}j+=h[l]}if(g)return d(t,0,1);e=k(e,2+j.length),j=parseInt(j);var m=k(e,0,j);if(i)try{m=String.fromCharCode.apply(null,new Uint8Array(m))}catch(n){var o=new Uint8Array(m);m="";for(var l=0;l<o.length;l++)m+=String.fromCharCode(o[l])}f.push(m),e=k(e,j)}var p=f.length;f.forEach(function(a,e){d(c.decodePacket(a,b,!0),e,p)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./keys":20,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(a,b,c){b.exports=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty;for(var d in a)c.call(a,d)&&b.push(d);return b}},{}],21:[function(a,b,c){(function(c){function d(a){function b(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(var d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&(a=a.toJSON());for(var f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&b(a[f]))return!0}return!1}return b(a)}var e=a("isarray");b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{isarray:24}],22:[function(a,b,c){try{b.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(d){b.exports=!1}},{}],23:[function(a,b,c){var d=[].indexOf;b.exports=function(a,b){if(d)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}},{}],24:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],25:[function(a,b,c){function d(a){if(a=""+a,!(a.length>1e4)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"hrs":case"hr":case"h":return c*j;case"minutes":case"minute":case"mins":case"min":case"m":return c*i;case"seconds":case"second":case"secs":case"sec":case"s":return c*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}}}function e(a){return a>=k?Math.round(a/k)+"d":a>=j?Math.round(a/j)+"h":a>=i?Math.round(a/i)+"m":a>=h?Math.round(a/h)+"s":a+"ms"}function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}function g(a,b,c){if(!(a<b))return a<1.5*b?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;b.exports=function(a,b){return b=b||{},"string"==typeof a?d(a):b["long"]?f(a):e(a)}},{}],26:[function(a,b,c){(function(a){var c=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,e=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,g=/^\s+/,h=/\s+$/;b.exports=function(b){return"string"==typeof b&&b?(b=b.replace(g,"").replace(h,""),a.JSON&&JSON.parse?JSON.parse(b):c.test(b.replace(d,"@").replace(e,"]").replace(f,""))?new Function("return "+b)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],27:[function(a,b,c){c.encode=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b},c.decode=function(a){for(var b={},c=a.split("&"),d=0,e=c.length;d<e;d++){var f=c[d].split("=");b[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return b}},{}],28:[function(a,b,c){var d=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){var b=a,c=a.indexOf("["),f=a.indexOf("]");c!=-1&&f!=-1&&(a=a.substring(0,c)+a.substring(c,f).replace(/:/g,";")+a.substring(f,a.length));for(var g=d.exec(a||""),h={},i=14;i--;)h[e[i]]=g[i]||"";return c!=-1&&f!=-1&&(h.source=b,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h}},{}],29:[function(b,c,d){(function(b){!function(e){function f(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),b>=55296&&b<=56319&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function g(a){for(var b,c=a.length,d=-1,e="";++d<c;)b=a[d],b>65535&&(b-=65536,e+=u(b>>>10&1023|55296),b=56320|1023&b),e+=u(b);return e}function h(a){if(a>=55296&&a<=57343)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value")}function i(a,b){return u(a>>b&63|128)}function j(a){if(0==(4294967168&a))return u(a);var b="";return 0==(4294965248&a)?b=u(a>>6&31|192):0==(4294901760&a)?(h(a),b=u(a>>12&15|224),b+=i(a,6)):0==(4292870144&a)&&(b=u(a>>18&7|240),b+=i(a,12),b+=i(a,6)),b+=u(63&a|128)}function k(a){for(var b,c=f(a),d=c.length,e=-1,g="";++e<d;)b=c[e],g+=j(b);return g}function l(){if(t>=s)throw Error("Invalid byte index");var a=255&r[t];if(t++,128==(192&a))return 63&a;throw Error("Invalid continuation byte")}function m(){var a,b,c,d,e;if(t>s)throw Error("Invalid byte index");if(t==s)return!1;if(a=255&r[t],t++,0==(128&a))return a;if(192==(224&a)){var b=l();if(e=(31&a)<<6|b,e>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&a)){if(b=l(),c=l(),e=(15&a)<<12|b<<6|c,e>=2048)return h(e),e;throw Error("Invalid continuation byte")}if(240==(248&a)&&(b=l(),c=l(),d=l(),e=(15&a)<<18|b<<12|c<<6|d,e>=65536&&e<=1114111))return e;throw Error("Invalid UTF-8 detected")}function n(a){r=f(a),s=r.length,t=0;for(var b,c=[];(b=m())!==!1;)c.push(b);return g(c)}var o="object"==typeof d&&d,p="object"==typeof c&&c&&c.exports==o&&c,q="object"==typeof b&&b;q.global!==q&&q.window!==q||(e=q);var r,s,t,u=String.fromCharCode,v={version:"2.0.0",encode:k,decode:n};if("function"==typeof a&&"object"==typeof a.amd&&a.amd)a(function(){return v});else if(o&&!o.nodeType)if(p)p.exports=v;else{var w={},x=w.hasOwnProperty;for(var y in v)x.call(v,y)&&(o[y]=v[y])}else e.utf8=v}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],30:[function(a,b,c){"use strict";function d(a){var b="";do b=h[a%i]+b,a=Math.floor(a/i);while(a>0);return b}function e(a){var b=0;for(l=0;l<a.length;l++)b=b*i+j[a.charAt(l)];return b}function f(){var a=d(+new Date);return a!==g?(k=0,g=a):a+"."+d(k++)}for(var g,h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,j={},k=0,l=0;l<i;l++)j[h[l]]=l;f.encode=d,f.decode=e,b.exports=f},{}],31:[function(a,b,c){function d(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d=e(a),f=d.source,j=d.id,k=d.path,l=i[j]&&k in i[j].nsps,m=b.forceNew||b["force new connection"]||!1===b.multiplex||l;return m?(h("ignoring socket cache for %s",f),c=g(f,b)):(i[j]||(h("new io instance for %s",f),i[j]=g(f,b)),c=i[j]),c.socket(d.path)}var e=a("./url"),f=a("socket.io-parser"),g=a("./manager"),h=a("debug")("socket.io-client");b.exports=c=d;var i=c.managers={};c.protocol=f.protocol,c.connect=d,c.Manager=a("./manager"),c.Socket=a("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(a,b,c){function d(a,b){return this instanceof d?(a&&"object"==typeof a&&(b=a,a=void 0),b=b||{},b.path=b.path||"/socket.io",this.nsps={},this.subs=[],this.opts=b,this.reconnection(b.reconnection!==!1),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.randomizationFactor(b.randomizationFactor||.5),this.backoff=new m({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==b.timeout?2e4:b.timeout),this.readyState="closed",this.uri=a,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new h.Encoder,this.decoder=new h.Decoder,this.autoConnect=b.autoConnect!==!1,void(this.autoConnect&&this.open())):new d(a,b)}var e=a("engine.io-client"),f=a("./socket"),g=a("component-emitter"),h=a("socket.io-parser"),i=a("./on"),j=a("component-bind"),k=a("debug")("socket.io-client:manager"),l=a("indexof"),m=a("backo2"),n=Object.prototype.hasOwnProperty;b.exports=d,d.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)n.call(this.nsps,a)&&this.nsps[a].emit.apply(this.nsps[a],arguments)},d.prototype.updateSocketIds=function(){for(var a in this.nsps)n.call(this.nsps,a)&&(this.nsps[a].id=this.engine.id)},g(d.prototype),d.prototype.reconnection=function(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection},d.prototype.reconnectionAttempts=function(a){return arguments.length?(this._reconnectionAttempts=a,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(a){return arguments.length?(this._reconnectionDelay=a,this.backoff&&this.backoff.setMin(a),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(a){return arguments.length?(this._randomizationFactor=a,this.backoff&&this.backoff.setJitter(a),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(a){return arguments.length?(this._reconnectionDelayMax=a,this.backoff&&this.backoff.setMax(a),this):this._reconnectionDelayMax},d.prototype.timeout=function(a){return arguments.length?(this._timeout=a,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(a){if(k("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;k("opening %s",this.uri),this.engine=e(this.uri,this.opts);var b=this.engine,c=this;this.readyState="opening",this.skipReconnect=!1;var d=i(b,"open",function(){c.onopen(),a&&a()}),f=i(b,"error",function(b){if(k("connect_error"),c.cleanup(),c.readyState="closed",c.emitAll("connect_error",b),a){var d=new Error("Connection error");d.data=b,a(d)}else c.maybeReconnectOnOpen()});if(!1!==this._timeout){var g=this._timeout;k("connect attempt will timeout after %d",g);var h=setTimeout(function(){k("connect attempt timed out after %d",g),d.destroy(),b.close(),b.emit("error","timeout"),c.emitAll("connect_timeout",g)},g);this.subs.push({destroy:function(){clearTimeout(h)}})}return this.subs.push(d),this.subs.push(f),this},d.prototype.onopen=function(){k("open"),this.cleanup(),this.readyState="open",this.emit("open");var a=this.engine;this.subs.push(i(a,"data",j(this,"ondata"))),this.subs.push(i(a,"ping",j(this,"onping"))),this.subs.push(i(a,"pong",j(this,"onpong"))),this.subs.push(i(a,"error",j(this,"onerror"))),this.subs.push(i(a,"close",j(this,"onclose"))),this.subs.push(i(this.decoder,"decoded",j(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(a){this.decoder.add(a)},d.prototype.ondecoded=function(a){this.emit("packet",a)},d.prototype.onerror=function(a){k("error",a),this.emitAll("error",a)},d.prototype.socket=function(a){function b(){~l(d.connecting,c)||d.connecting.push(c)}var c=this.nsps[a];if(!c){c=new f(this,a),this.nsps[a]=c;var d=this;c.on("connecting",b),c.on("connect",function(){c.id=d.engine.id}),this.autoConnect&&b()}return c},d.prototype.destroy=function(a){var b=l(this.connecting,a);~b&&this.connecting.splice(b,1),this.connecting.length||this.close()},d.prototype.packet=function(a){k("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(c){for(var d=0;d<c.length;d++)b.engine.write(c[d],a.options);b.encoding=!1,b.processPacketQueue()}))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}},d.prototype.cleanup=function(){k("cleanup");for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){k("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(a){k("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",a),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)k("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var b=this.backoff.duration();k("will wait %dms before reconnect attempt",b),this.reconnecting=!0;var c=setTimeout(function(){a.skipReconnect||(k("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(b){b?(k("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(k("reconnect success"),a.onreconnect())}))},b);this.subs.push({destroy:function(){clearTimeout(c)}})}},d.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",a)}},{"./on":33,"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(a,b,c){function d(a,b,c){return a.on(b,c),{destroy:function(){a.removeListener(b,c)}}}b.exports=d},{}],34:[function(a,b,c){function d(a,b){this.io=a,this.nsp=b,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}var e=a("socket.io-parser"),f=a("component-emitter"),g=a("to-array"),h=a("./on"),i=a("component-bind"),j=a("debug")("socket.io-client:socket"),k=a("has-binary");b.exports=c=d;var l={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},m=f.prototype.emit;f(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[h(a,"open",i(this,"onopen")),h(a,"packet",i(this,"onpacket")),h(a,"close",i(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},d.prototype.send=function(){var a=g(arguments);return a.unshift("message"),this.emit.apply(this,a),this},d.prototype.emit=function(a){if(l.hasOwnProperty(a))return m.apply(this,arguments),this;var b=g(arguments),c=e.EVENT;k(b)&&(c=e.BINARY_EVENT);var d={type:c,data:b};return d.options={},d.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof b[b.length-1]&&(j("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),delete this.flags,this},d.prototype.packet=function(a){a.nsp=this.nsp,this.io.packet(a)},d.prototype.onopen=function(){j("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:e.CONNECT})},d.prototype.onclose=function(a){j("close (%s)",a),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",a)},d.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case e.CONNECT:this.onconnect();break;case e.EVENT:this.onevent(a);break;case e.BINARY_EVENT:this.onevent(a);break;case e.ACK:this.onack(a);break;case e.BINARY_ACK:this.onack(a);break;case e.DISCONNECT:this.ondisconnect();break;case e.ERROR:this.emit("error",a.data)}},d.prototype.onevent=function(a){var b=a.data||[];j("emitting event %j",b),null!=a.id&&(j("attaching ack callback to event"),b.push(this.ack(a.id))),this.connected?m.apply(this,b):this.receiveBuffer.push(b)},d.prototype.ack=function(a){var b=this,c=!1;return function(){if(!c){c=!0;var d=g(arguments);j("sending ack %j",d);var f=k(d)?e.BINARY_ACK:e.ACK;b.packet({type:f,id:a,data:d})}}},d.prototype.onack=function(a){var b=this.acks[a.id];"function"==typeof b?(j("calling ack %s with %j",a.id,a.data),b.apply(this,a.data),delete this.acks[a.id]):j("bad ack %s",a.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)m.apply(this,this.receiveBuffer[a]);for(this.receiveBuffer=[],a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){j("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(j("performing disconnect (%s)",this.nsp),this.packet({type:e.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(a){return this.flags=this.flags||{},this.flags.compress=a,this}},{"./on":33,"component-bind":37,"component-emitter":38,debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(a,b,c){(function(c){function d(a,b){var d=a,b=b||c.location;null==a&&(a=b.protocol+"//"+b.host),"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?b.protocol+a:b.host+a),/^(https?|wss?):\/\//.test(a)||(f("protocol-less url %s",a),a="undefined"!=typeof b?b.protocol+"//"+a:"https://"+a),f("parse %s",a),d=e(a)),d.port||(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/";var g=d.host.indexOf(":")!==-1,h=g?"["+d.host+"]":d.host;return d.id=d.protocol+"://"+h+":"+d.port,d.href=d.protocol+"://"+h+(b&&b.port==d.port?"":":"+d.port),d}var e=a("parseuri"),f=a("debug")("socket.io-client:url");b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{debug:39,parseuri:45}],36:[function(a,b,c){function d(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}b.exports=d,d.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var b=Math.random(),c=Math.floor(b*this.jitter*a);a=0==(1&Math.floor(10*b))?a-c:a+c}return 0|Math.min(a,this.max)},d.prototype.reset=function(){this.attempts=0},d.prototype.setMin=function(a){this.ms=a},d.prototype.setMax=function(a){this.max=a},d.prototype.setJitter=function(a){this.jitter=a}},{}],37:[function(a,b,c){var d=[].slice;b.exports=function(a,b){if("string"==typeof b&&(b=a[b]),"function"!=typeof b)throw new Error("bind() requires a function");var c=d.call(arguments,2);return function(){return b.apply(a,c.concat(d.call(arguments)))}}},{}],38:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}b.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks["$"+a];if(!c)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks["$"+a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],39:[function(a,b,c){arguments[4][17][0].apply(c,arguments)},{"./debug":40,dup:17}],40:[function(a,b,c){arguments[4][18][0].apply(c,arguments)},{dup:18,ms:44}],41:[function(a,b,c){(function(c){function d(a){function b(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(var d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON());for(var f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&b(a[f]))return!0}return!1}return b(a)}var e=a("isarray");b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{isarray:43}],42:[function(a,b,c){arguments[4][23][0].apply(c,arguments)},{dup:23}],43:[function(a,b,c){arguments[4][24][0].apply(c,arguments)},{dup:24}],44:[function(a,b,c){arguments[4][25][0].apply(c,arguments)},{dup:25}],45:[function(a,b,c){arguments[4][28][0].apply(c,arguments)},{dup:28}],46:[function(a,b,c){(function(b){var d=a("isarray"),e=a("./is-buffer");c.deconstructPacket=function(a){function b(a){if(!a)return a;if(e(a)){var f={_placeholder:!0,num:c.length};return c.push(a),f}if(d(a)){for(var g=new Array(a.length),h=0;h<a.length;h++)g[h]=b(a[h]);return g}if("object"==typeof a&&!(a instanceof Date)){var g={};for(var i in a)g[i]=b(a[i]);return g}return a}var c=[],f=a.data,g=a;return g.data=b(f),g.attachments=c.length,{packet:g,buffers:c}},c.reconstructPacket=function(a,b){function c(a){if(a&&a._placeholder){var e=b[a.num];return e}if(d(a)){for(var f=0;f<a.length;f++)a[f]=c(a[f]);return a}if(a&&"object"==typeof a){for(var g in a)a[g]=c(a[g]);return a}return a}return a.data=c(a.data),a.attachments=void 0,a},c.removeBlobs=function(a,c){function f(a,i,j){if(!a)return a;if(b.Blob&&a instanceof Blob||b.File&&a instanceof File){g++;var k=new FileReader;k.onload=function(){j?j[i]=this.result:h=this.result,--g||c(h)},k.readAsArrayBuffer(a)}else if(d(a))for(var l=0;l<a.length;l++)f(a[l],l,a);else if(a&&"object"==typeof a&&!e(a))for(var m in a)f(a[m],m,a)}var g=0,h=a;f(h),g||c(h)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./is-buffer":48,isarray:43}],47:[function(a,b,c){function d(){}function e(a){var b="",d=!1;return b+=a.type,c.BINARY_EVENT!=a.type&&c.BINARY_ACK!=a.type||(b+=a.attachments,b+="-"),a.nsp&&"/"!=a.nsp&&(d=!0,b+=a.nsp),null!=a.id&&(d&&(b+=",",d=!1),b+=a.id),null!=a.data&&(d&&(b+=","),b+=l.stringify(a.data)),k("encoded %j as %s",a,b),b}function f(a,b){function c(a){var c=n.deconstructPacket(a),d=e(c.packet),f=c.buffers;f.unshift(d),b(f)}n.removeBlobs(a,c)}function g(){this.reconstructor=null}function h(a){var b={},d=0;if(b.type=Number(a.charAt(0)),null==c.types[b.type])return j();if(c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type){for(var e="";"-"!=a.charAt(++d)&&(e+=a.charAt(d),d!=a.length););if(e!=Number(e)||"-"!=a.charAt(d))throw new Error("Illegal attachments");b.attachments=Number(e)}if("/"==a.charAt(d+1))for(b.nsp="";++d;){var f=a.charAt(d);if(","==f)break;if(b.nsp+=f,d==a.length)break}else b.nsp="/";var g=a.charAt(d+1);if(""!==g&&Number(g)==g){for(b.id="";++d;){var f=a.charAt(d);if(null==f||Number(f)!=f){--d;break}if(b.id+=a.charAt(d),d==a.length)break}b.id=Number(b.id)}if(a.charAt(++d))try{b.data=l.parse(a.substr(d))}catch(h){return j()}return k("decoded %s as %j",a,b),b}function i(a){this.reconPack=a,this.buffers=[]}function j(a){return{type:c.ERROR,data:"parser error"}}var k=a("debug")("socket.io-parser"),l=a("json3"),m=(a("isarray"),a("component-emitter")),n=a("./binary"),o=a("./is-buffer");c.protocol=4,c.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],c.CONNECT=0,c.DISCONNECT=1,c.EVENT=2,c.ACK=3,c.ERROR=4,c.BINARY_EVENT=5,c.BINARY_ACK=6,c.Encoder=d,c.Decoder=g,d.prototype.encode=function(a,b){if(k("encoding packet %j",a),c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)f(a,b);else{var d=e(a);b([d])}},m(g.prototype),g.prototype.add=function(a){var b;if("string"==typeof a)b=h(a),c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type?(this.reconstructor=new i(b),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b);else{if(!o(a)&&!a.base64)throw new Error("Unknown type: "+a);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");b=this.reconstructor.takeBinaryData(a),b&&(this.reconstructor=null,this.emit("decoded",b))}},g.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},i.prototype.takeBinaryData=function(a){if(this.buffers.push(a),this.buffers.length==this.reconPack.attachments){var b=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),b}return null},i.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],48:[function(a,b,c){(function(a){function c(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}b.exports=c}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],49:[function(a,b,c){arguments[4][15][0].apply(c,arguments)},{dup:15}],50:[function(b,c,d){(function(b){(function(){function e(a,b){function c(a){if(c[a]!==q)return c[a];var e;if("bug-string-char-index"==a)e="a"!="a"[0];else if("json"==a)e=c("json-stringify")&&c("json-parse");else{var g,h='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==a){var i=b.stringify,k="function"==typeof i&&t;if(k){(g=function(){return 1}).toJSON=g;try{k="0"===i(0)&&"0"===i(new d)&&'""'==i(new f)&&i(s)===q&&i(q)===q&&i()===q&&"1"===i(g)&&"[1]"==i([g])&&"[null]"==i([q])&&"null"==i(null)&&"[null,null,null]"==i([q,s,null])&&i({a:[g,!0,!1,null,"\0\b\n\f\r\t"]})==h&&"1"===i(null,g)&&"[\n 1,\n 2\n]"==i([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==i(new j((-864e13)))&&'"+275760-09-13T00:00:00.000Z"'==i(new j(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new j((-621987552e5)))&&'"1969-12-31T23:59:59.999Z"'==i(new j((-1)))}catch(l){k=!1}}e=k}if("json-parse"==a){var m=b.parse;if("function"==typeof m)try{if(0===m("0")&&!m(!1)){g=m(h);var n=5==g.a.length&&1===g.a[0];if(n){try{n=!m('"\t"')}catch(l){}if(n)try{n=1!==m("01")}catch(l){}if(n)try{n=1!==m("1.")}catch(l){}}}}catch(l){n=!1}e=n}}return c[a]=!!e}a||(a=i.Object()),b||(b=i.Object());var d=a.Number||i.Number,f=a.String||i.String,h=a.Object||i.Object,j=a.Date||i.Date,k=a.SyntaxError||i.SyntaxError,l=a.TypeError||i.TypeError,m=a.Math||i.Math,n=a.JSON||i.JSON;"object"==typeof n&&n&&(b.stringify=n.stringify,b.parse=n.parse);var o,p,q,r=h.prototype,s=r.toString,t=new j((-0xc782b5b800cec));try{t=t.getUTCFullYear()==-109252&&0===t.getUTCMonth()&&1===t.getUTCDate()&&10==t.getUTCHours()&&37==t.getUTCMinutes()&&6==t.getUTCSeconds()&&708==t.getUTCMilliseconds()}catch(u){}if(!c("json")){var v="[object Function]",w="[object Date]",x="[object Number]",y="[object String]",z="[object Array]",A="[object Boolean]",B=c("bug-string-char-index");if(!t)var C=m.floor,D=[0,31,59,90,120,151,181,212,243,273,304,334],E=function(a,b){return D[b]+365*(a-1970)+C((a-1969+(b=+(b>1)))/4)-C((a-1901+b)/100)+C((a-1601+b)/400)};if((o=r.hasOwnProperty)||(o=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=s?o=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,o=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,o.call(this,a)}),p=function(a,b){var c,d,e,f=0;(c=function(){this.valueOf=0}).prototype.valueOf=0,d=new c;for(e in d)o.call(d,e)&&f++;return c=d=null,f?p=2==f?function(a,b){var c,d={},e=s.call(a)==v;for(c in a)e&&"prototype"==c||o.call(d,c)||!(d[c]=1)||!o.call(a,c)||b(c)}:function(a,b){var c,d,e=s.call(a)==v;for(c in a)e&&"prototype"==c||!o.call(a,c)||(d="constructor"===c)||b(c);(d||o.call(a,c="constructor"))&&b(c)}:(d=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],p=function(a,b){var c,e,f=s.call(a)==v,h=!f&&"function"!=typeof a.constructor&&g[typeof a.hasOwnProperty]&&a.hasOwnProperty||o;for(c in a)f&&"prototype"==c||!h.call(a,c)||b(c);for(e=d.length;c=d[--e];h.call(a,c)&&b(c));}),p(a,b)},!c("json-stringify")){var F={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},G="000000",H=function(a,b){return(G+(b||0)).slice(-a)},I="\\u00",J=function(a){for(var b='"',c=0,d=a.length,e=!B||d>10,f=e&&(B?a.split(""):a);c<d;c++){var g=a.charCodeAt(c);switch(g){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=F[g];break;default:if(g<32){b+=I+H(2,g.toString(16));break}b+=e?f[c]:a.charAt(c)}}return b+'"'},K=function(a,b,c,d,e,f,g){var h,i,j,k,m,n,r,t,u,v,B,D,F,G,I,L;try{h=b[a]}catch(M){}if("object"==typeof h&&h)if(i=s.call(h),i!=w||o.call(h,"toJSON"))"function"==typeof h.toJSON&&(i!=x&&i!=y&&i!=z||o.call(h,"toJSON"))&&(h=h.toJSON(a));else if(h>-1/0&&h<1/0){if(E){for(m=C(h/864e5),j=C(m/365.2425)+1970-1;E(j+1,0)<=m;j++);for(k=C((m-E(j,0))/30.42);E(j,k+1)<=m;k++);m=1+m-E(j,k),n=(h%864e5+864e5)%864e5,r=C(n/36e5)%24,t=C(n/6e4)%60,u=C(n/1e3)%60,v=n%1e3}else j=h.getUTCFullYear(),k=h.getUTCMonth(),m=h.getUTCDate(),r=h.getUTCHours(),t=h.getUTCMinutes(),u=h.getUTCSeconds(),v=h.getUTCMilliseconds();h=(j<=0||j>=1e4?(j<0?"-":"+")+H(6,j<0?-j:j):H(4,j))+"-"+H(2,k+1)+"-"+H(2,m)+"T"+H(2,r)+":"+H(2,t)+":"+H(2,u)+"."+H(3,v)+"Z"}else h=null;if(c&&(h=c.call(b,a,h)),null===h)return"null";if(i=s.call(h),i==A)return""+h;if(i==x)return h>-1/0&&h<1/0?""+h:"null";if(i==y)return J(""+h);if("object"==typeof h){for(G=g.length;G--;)if(g[G]===h)throw l();if(g.push(h),B=[],I=f,f+=e,i==z){for(F=0,G=h.length;F<G;F++)D=K(F,h,c,d,e,f,g),B.push(D===q?"null":D);L=B.length?e?"[\n"+f+B.join(",\n"+f)+"\n"+I+"]":"["+B.join(",")+"]":"[]"}else p(d||h,function(a){var b=K(a,h,c,d,e,f,g);b!==q&&B.push(J(a)+":"+(e?" ":"")+b)}),L=B.length?e?"{\n"+f+B.join(",\n"+f)+"\n"+I+"}":"{"+B.join(",")+"}":"{}";return g.pop(),L}};b.stringify=function(a,b,c){var d,e,f,h;if(g[typeof b]&&b)if((h=s.call(b))==v)e=b;else if(h==z){f={};for(var i,j=0,k=b.length;j<k;i=b[j++],h=s.call(i),(h==y||h==x)&&(f[i]=1));}if(c)if((h=s.call(c))==x){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else h==y&&(d=c.length<=10?c:c.slice(0,10));return K("",(i={},i[""]=a,i),e,f,d,"",[])}}if(!c("json-parse")){var L,M,N=f.fromCharCode,O={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},P=function(){throw L=M=null,k()},Q=function(){for(var a,b,c,d,e,f=M,g=f.length;L<g;)switch(e=f.charCodeAt(L)){case 9:case 10:case 13:case 32:L++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=B?f.charAt(L):f[L],L++,a;case 34:for(a="@",L++;L<g;)if(e=f.charCodeAt(L),e<32)P();else if(92==e)switch(e=f.charCodeAt(++L)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=O[e],L++;break;case 117:for(b=++L,c=L+4;L<c;L++)e=f.charCodeAt(L),e>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70||P();a+=N("0x"+f.slice(b,L));break;default:P()}else{if(34==e)break;for(e=f.charCodeAt(L),b=L;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++L);a+=f.slice(b,L)}if(34==f.charCodeAt(L))return L++,a;P();default:if(b=L,45==e&&(d=!0,e=f.charCodeAt(++L)),e>=48&&e<=57){for(48==e&&(e=f.charCodeAt(L+1),e>=48&&e<=57)&&P(),d=!1;L<g&&(e=f.charCodeAt(L),e>=48&&e<=57);L++);if(46==f.charCodeAt(L)){for(c=++L;c<g&&(e=f.charCodeAt(c),e>=48&&e<=57);c++);c==L&&P(),L=c}if(e=f.charCodeAt(L),101==e||69==e){for(e=f.charCodeAt(++L),43!=e&&45!=e||L++,c=L;c<g&&(e=f.charCodeAt(c),e>=48&&e<=57);c++);c==L&&P(),L=c}return+f.slice(b,L)}if(d&&P(),"true"==f.slice(L,L+4))return L+=4,!0;if("false"==f.slice(L,L+5))return L+=5,!1;if("null"==f.slice(L,L+4))return L+=4,null;P()}return"$"},R=function(a){var b,c;if("$"==a&&P(),"string"==typeof a){if("@"==(B?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];a=Q(),"]"!=a;c||(c=!0))c&&(","==a?(a=Q(),"]"==a&&P()):P()),","==a&&P(),b.push(R(a));return b}if("{"==a){for(b={};a=Q(),"}"!=a;c||(c=!0))c&&(","==a?(a=Q(),"}"==a&&P()):P()),","!=a&&"string"==typeof a&&"@"==(B?a.charAt(0):a[0])&&":"==Q()||P(),b[a.slice(1)]=R(Q());return b}P()}return a},S=function(a,b,c){var d=T(a,b,c);d===q?delete a[b]:a[b]=d},T=function(a,b,c){var d,e=a[b];if("object"==typeof e&&e)if(s.call(e)==z)for(d=e.length;d--;)S(e,d,c);else p(e,function(a){S(e,a,c)});return c.call(a,b,e)};b.parse=function(a,b){var c,d;return L=0,M=""+a,c=R(Q()),"$"!=Q()&&P(),L=M=null,b&&s.call(b)==v?T((d={},d[""]=c,d),"",b):c}}}return b.runInContext=e,b}var f="function"==typeof a&&a.amd,g={"function":!0,object:!0},h=g[typeof d]&&d&&!d.nodeType&&d,i=g[typeof window]&&window||this,j=h&&g[typeof c]&&c&&!c.nodeType&&"object"==typeof b&&b;if(!j||j.global!==j&&j.window!==j&&j.self!==j||(i=j),h&&!f)e(i,h);else{var k=i.JSON,l=i.JSON3,m=!1,n=e(i,i.JSON3={noConflict:function(){return m||(m=!0,i.JSON=k,i.JSON3=l,k=l=null),n}});i.JSON={parse:n.parse,stringify:n.stringify}}f&&a(function(){return n})}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],51:[function(a,b,c){function d(a,b){var c=[];b=b||0;for(var d=b||0;d<a.length;d++)c[d-b]=a[d];return c}b.exports=d},{}]},{},[31])(31)}),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d,e,f,g,h,i,j,k=a("d"),l=a("es5-ext/object/valid-callable"),m=Function.prototype.apply,n=Function.prototype.call,o=Object.create,p=Object.defineProperty,q=Object.defineProperties,r=Object.prototype.hasOwnProperty,s={configurable:!0,enumerable:!1,writable:!0};d=function(a,b){var c;return l(b),r.call(this,"__ee__")?c=this.__ee__:(c=s.value=o(null),p(this,"__ee__",s),s.value=null),c[a]?"object"==typeof c[a]?c[a].push(b):c[a]=[c[a],b]:c[a]=b,this},e=function(a,b){var c,e;return l(b),e=this,d.call(this,a,c=function(){f.call(e,a,c),m.call(b,this,arguments)}),c.__eeOnceListener__=b,this},f=function(a,b){var c,d,e,f;if(l(b),!r.call(this,"__ee__"))return this;if(c=this.__ee__,!c[a])return this;if(d=c[a],"object"==typeof d)for(f=0;e=d[f];++f)e!==b&&e.__eeOnceListener__!==b||(2===d.length?c[a]=d[f?0:1]:d.splice(f,1));else d!==b&&d.__eeOnceListener__!==b||delete c[a];return this},g=function(a){var b,c,d,e,f;if(r.call(this,"__ee__")&&(e=this.__ee__[a]))if("object"==typeof e){for(c=arguments.length,f=new Array(c-1),b=1;b<c;++b)f[b-1]=arguments[b];for(e=e.slice(),b=0;d=e[b];++b)m.call(d,this,f)}else switch(arguments.length){case 1:n.call(e,this);break;case 2:n.call(e,this,arguments[1]);break;case 3:n.call(e,this,arguments[1],arguments[2]);break;default:for(c=arguments.length,f=new Array(c-1),b=1;b<c;++b)f[b-1]=arguments[b];m.call(e,this,f)}},h={on:d,once:e,off:f,emit:g},i={on:k(d),once:k(e),off:k(f),emit:k(g)},j=q({},i),b.exports=c=function(a){return null==a?o(j):q(Object(a),i)},c.methods=h},{d:2,"es5-ext/object/valid-callable":11}],2:[function(a,b,c){"use strict";var d,e=a("es5-ext/object/assign"),f=a("es5-ext/object/normalize-options"),g=a("es5-ext/object/is-callable"),h=a("es5-ext/string/#/contains");d=b.exports=function(a,b){var c,d,g,i,j;return arguments.length<2||"string"!=typeof a?(i=b,b=a,a=null):i=arguments[2],null==a?(c=g=!0,d=!1):(c=h.call(a,"c"),d=h.call(a,"e"),g=h.call(a,"w")),j={value:b,configurable:c,enumerable:d,writable:g},i?e(f(i),j):j},d.gs=function(a,b,c){var d,i,j,k;return"string"!=typeof a?(j=c,c=b,b=a,a=null):j=arguments[3],null==b?b=void 0:g(b)?null==c?c=void 0:g(c)||(j=c,c=void 0):(j=b,b=c=void 0),null==a?(d=!0,i=!1):(d=h.call(a,"c"),i=h.call(a,"e")),k={get:b,set:c,configurable:d,enumerable:i},j?e(f(j),k):k}},{"es5-ext/object/assign":3,"es5-ext/object/is-callable":6,"es5-ext/object/normalize-options":10,"es5-ext/string/#/contains":13}],3:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Object.assign:a("./shim")},{"./is-implemented":4,"./shim":5}],4:[function(a,b,c){"use strict";b.exports=function(){var a,b=Object.assign;return"function"==typeof b&&(a={foo:"raz"},b(a,{bar:"dwa"},{trzy:"trzy"}),a.foo+a.bar+a.trzy==="razdwatrzy")}},{}],5:[function(a,b,c){"use strict";var d=a("../keys"),e=a("../valid-value"),f=Math.max;b.exports=function(a,b){var c,g,h,i=f(arguments.length,2);for(a=Object(e(a)),h=function(d){try{a[d]=b[d]}catch(e){c||(c=e)}},g=1;g<i;++g)b=arguments[g],d(b).forEach(h);if(void 0!==c)throw c;return a}},{"../keys":7,"../valid-value":12}],6:[function(a,b,c){"use strict";b.exports=function(a){return"function"==typeof a}},{}],7:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Object.keys:a("./shim")},{"./is-implemented":8,"./shim":9}],8:[function(a,b,c){"use strict";b.exports=function(){try{return Object.keys("primitive"),!0}catch(a){return!1}}},{}],9:[function(a,b,c){"use strict";var d=Object.keys;b.exports=function(a){return d(null==a?a:Object(a))}},{}],10:[function(a,b,c){"use strict";var d=Array.prototype.forEach,e=Object.create,f=function(a,b){var c;for(c in a)b[c]=a[c]};b.exports=function(a){var b=e(null);return d.call(arguments,function(a){null!=a&&f(Object(a),b)}),b}},{}],11:[function(a,b,c){"use strict";b.exports=function(a){if("function"!=typeof a)throw new TypeError(a+" is not a function");return a}},{}],12:[function(a,b,c){"use strict";b.exports=function(a){if(null==a)throw new TypeError("Cannot use null or undefined");return a}},{}],13:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?String.prototype.contains:a("./shim")},{"./is-implemented":14,"./shim":15}],14:[function(a,b,c){"use strict";var d="razdwatrzy";b.exports=function(){return"function"==typeof d.contains&&(d.contains("dwa")===!0&&d.contains("foo")===!1)}},{}],15:[function(a,b,c){"use strict";var d=String.prototype.indexOf;b.exports=function(a){return d.call(this,a,arguments[1])>-1}},{}],16:[function(a,b,c){var d={};d.Client=a("./incus"),d.Presence=a("./lib/presence"),window.Incus=d},{"./incus":17,"./lib/presence":19}],17:[function(a,b,c){function d(a,b,c){this.MAXRETRIES=6,this.socketRetries=0,this.pollRetries=0,this.url=a,this.UID=b,this.page=c,this.socket=null,this.poll=null,this.pollCommand=null,this.connected=!1,this.socketConnected=!1,this.emitter=new e({}),this.connect()}var e=a("event-emitter");d.prototype.longpoll=function(a){if(!this.socketConnected){null!=this.poll&&(this.poll.abort(),this.pollCommand=null),this.poll=new XMLHttpRequest;var b={user:this.UID};this.page&&(b.page=this.page),"undefined"!=typeof a&&(b.command=a,this.pollCommand=a);var c=this.serialize(b),d=this;this.poll.onreadystatechange=function(){if(4==d.poll.readyState){var a={data:d.poll.responseText,status:d.poll.status,success:!0};0!==d.poll.status&&d.pollRetries<d.MAXRETRIES&&d.longpoll(),200!=a.status&&204!=a.status&&0!==a.status&&d.pollRetries++,200==a.status&&""!==a.data&&d.onMessage(a)}},this.poll.open("GET",this.url+"/lp"+c,!0),this.poll.timeout=0,this.poll.send(),this.connected=!0,this.emitter.emit("connect")}},d.prototype.connect=function(){this.longpoll(),"WebSocket"in window&&this.connectSocket()},d.prototype.connectSocket=function(){var a=this.url.replace("https","wss").replace("http","ws");this.socket=new WebSocket(a+"/socket");var b=this;this.socket.onopen=function(){b.authenticate()},this.socket.onmessage=function(a){b.onMessage(a)},this.socket.onclose=function(){b.onClose()}},d.prototype.newCommand=function(a,b){b.time=Math.round((new Date).getTime()/1e3);var c={command:a,message:b};return JSON.stringify(c)},d.prototype.authenticate=function(){this.socketConnected=!0,this.poll.abort();var a=this.newCommand({command:"authenticate",user:this.UID},{});this.socket.send(a),this.page&&this.setPage(this.page),null!==this.pollCommand&&(this.socket.send(this.pollCommand),this.pollCommand=null),this.emitter.emit("connect"),this.connected=!0},d.prototype.on=function(a,b){this.emitter.on("event:"+a,b)},d.prototype.onMessage=function(a){if(""===a.data)return void(this.socketRetries=0);var b=JSON.parse(a.data);"event"in b&&this.emitter.emit("event:"+b.event,b.data)},d.prototype.onClose=function(){if(!(this.socketRetries>this.MAXRETRIES)){this.socketRetries++,this.connected=!1;var a=this;window.setTimeout(function(){console.log("Connection closed, retrying"),a.connectSocket()},1e3)}},d.prototype.MessageUser=function(a,b,c){var d={command:"message",user:b},e={event:a,data:c},f=this.newCommand(d,e);return this.send(f)},d.prototype.MessagePage=function(a,b,c){var d={command:"message",page:b},e={event:a,data:c},f=this.newCommand(d,e);return this.send(f)},d.prototype.MessageAll=function(a,b){var c={command:"message"},d={event:a,data:b},e=this.newCommand(c,d);return this.send(e)},d.prototype.setPage=function(a){if(this.page=a,this.socketConnected){var b={command:"setpage",page:a},c=this.newCommand(b,{});return this.send(c)}this.send()},d.prototype.serialize=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return"?"+b.join("&")},d.prototype.send=function(a){this.socketConnected?this.socket.send(a):this.longpoll(a)},b.exports=d},{"event-emitter":1}],18:[function(a,b,c){},{}],19:[function(a,b,c){var d=a("event-emitter"),e="setpresence",f=20,g=function(a){var b=new d;this.emitter=b,this.on=b.on.bind(b),this.off=b.off.bind(b),this.timerReference=null,this.lastActiveTime=null,this._lastResetCall=null,this.inactivityThresholdSeconds="undefined"!=typeof a?a:60,document.body.addEventListener("touchstart",this.handleUserActivity.bind(this)),document.body.addEventListener("keypress",this.handleUserActivity.bind(this)),document.body.addEventListener("mousemove",this.handleUserActivity.bind(this)),this.reset()};g.prototype={reset:function(){var a=+new Date/1e3;if(null!==this.lastActiveTime){var b=this.lastActiveTime+this.inactivityThresholdSeconds>=a;b||this.emitter.emit("return",this.lastActiveTime,a)}this.lastActiveTime=a,null!==this.timerReference&&window.clearTimeout(this.timerReference),this.timerReference=window.setTimeout(this.handleTimeout.bind(this),1e3*this.inactivityThresholdSeconds)},handleTimeout:function(){this.emitter.emit("idle")},handleUserActivity:function(a){var b=+new Date;(null===this._lastResetCall||this._lastResetCall+1e3/f<=b)&&(this._lastResetCall=b,this.reset())}};var h=function(a,b){this.presence=a,this.incus=b,a.on("return",this.handleHere.bind(this)),a.on("idle",this.handleIdle.bind(this)),this.handleHere()};h.prototype.notifyIncus=function(a){var b={command:e},c={presence:a.present};this.incus.send(this.incus.newCommand(b,c))},h.prototype.handleHere=function(){this.notifyIncus({present:!0})},h.prototype.handleIdle=function(){this.notifyIncus({present:!1})},g.IncusNotifier=h,b.exports=g},{"event-emitter":1}],20:[function(a,b,c){arguments[4][18][0].apply(c,arguments)},{dup:18}]},{},[16,17,18,19,20]),function(){function a(a,b,c){c=(c||0)-1;for(var d=a?a.length:0;++c<d;)if(a[c]===b)return c;return-1}function b(b,c){var d=typeof c;if(b=b.l,"boolean"==d||null==c)return b[c]?0:-1;"number"!=d&&"string"!=d&&(d="object");var e="number"==d?c:u+c;return b=(b=b[d])&&b[e],"object"==d?b&&-1<a(b,c)?0:-1:b?0:-1}function c(a){var b=this.l,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:u+a,b=b[c]||(b[c]={});"object"==c?(b[d]||(b[d]=[])).push(a):b[d]=!0}}function d(a){return a.charCodeAt(0)}function e(a,b){for(var c=a.m,d=b.m,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(g<h||"undefined"==typeof h)return-1}}return a.n-b.n}function f(a){var b=-1,d=a.length,e=a[0],f=a[d/2|0],g=a[d-1];if(e&&"object"==typeof e&&f&&"object"==typeof f&&g&&"object"==typeof g)return!1;for(e=i(),e["false"]=e["null"]=e["true"]=e.undefined=!1,f=i(),f.k=a,f.l=e,f.push=c;++b<d;)f.push(a[b]);return f}function g(a){return"\\"+X[a]}function h(){return q.pop()||[]}function i(){return r.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,o:null}}function j(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}function l(a){a.length=0,q.length<w&&q.push(a)}function m(a){var b=a.l;b&&m(b),a.k=a.l=a.m=a.object=a.number=a.string=a.o=null,r.length<w&&r.push(a)}function n(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);var d=-1;c=c-b||0;for(var e=Array(0>c?0:c);++d<c;)e[d]=a[b+d];return e}function o(c){function q(a){var b,c;return!(!(a&&jb.call(a)==Q&&(b=a.constructor,!sa(b)||b instanceof b))||!Ab.argsClass&&w(a)||!Ab.nodeClass&&j(a))&&(Ab.ownLast?(Nb(a,function(a,b,d){return c=nb.call(d,b),!1}),!1!==c):(Nb(a,function(a,b){c=b}),"undefined"==typeof c||nb.call(a,c)))}function r(a){return a&&"object"==typeof a&&"number"==typeof a.length&&jb.call(a)==K||!1}function w(a){return a&&"object"==typeof a&&"number"==typeof a.length&&nb.call(a,"callee")&&!pb.call(a,"callee")||!1}function X(a){return a&&"object"==typeof a&&!r(a)&&nb.call(a,"__wrapped__")?a:new Z(a)}function Z(a,b){this.__chain__=!!b,this.__wrapped__=a}function $(a){function b(){if(d){var a=n(d);ob.apply(a,arguments)}if(this instanceof b){var f=Bb(c.prototype),a=c.apply(f,a||arguments);return ta(a)?a:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return b}function _(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}if(!ta(a))return a;var g=jb.call(a);if(!T[g]||!Ab.nodeClass&&j(a))return a;var i=yb[g];switch(g){case L:case M:return new i((+a));case P:case S:return new i(a);case R:return f=i(a.source,C.exec(a)),f.lastIndex=a.lastIndex,f}if(g=r(a),b){var k=!d;d||(d=h()),e||(e=h());for(var m=d.length;m--;)if(d[m]==a)return e[m];f=g?i(a.length):{}}else f=g?n(a):Lb({},a);return g&&(nb.call(a,"index")&&(f.index=a.index),nb.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(g?Kb:Ob)(a,function(a,g){f[g]=_(a,b,c,d,e)}),k&&(l(d),l(e)),f):f}function aa(a,b,c){if("function"!=typeof a)return Sa;if("undefined"==typeof b||!("prototype"in a))return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Qa(a,b)}function ca(a){function b(){var a=i?g:this;if(e){var o=n(e);ob.apply(o,arguments)}return(f||k)&&(o||(o=n(arguments)),f&&ob.apply(o,f),k&&o.length<h)?(d|=16,ca([c,l?d:-4&d,o,null,g,h])):(o||(o=arguments),j&&(c=a[m]),this instanceof b?(a=Bb(c.prototype),o=c.apply(a,o),ta(o)?o:a):c.apply(a,o))}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=1&d,j=2&d,k=4&d,l=8&d,m=c;return b}function da(c,d){var e=-1,g=na(),h=c?c.length:0,i=h>=v&&g===a,j=[];if(i){var k=f(d);k?(g=b,d=k):i=!1}for(;++e<h;)k=c[e],0>g(d,k)&&j.push(k);return i&&m(d),j}function ea(a,b,c,d){d=(d||0)-1;for(var e=a?a.length:0,f=[];++d<e;){var g=a[d];if(g&&"object"==typeof g&&"number"==typeof g.length&&(r(g)||w(g))){b||(g=ea(g,b,c));var h=-1,i=g.length,j=f.length;for(f.length+=i;++h<i;)f[j++]=g[h]}else c||f.push(g)}return f}function fa(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;if(a===a&&!(a&&W[typeof a]||b&&W[typeof b]))return!1;if(null==a||null==b)return a===b;var i=jb.call(a),k=jb.call(b);if(i==J&&(i=Q),k==J&&(k=Q),i!=k)return!1;switch(i){case L:case M:return+a==+b;case P:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case R:case S:return a==cb(b)}if(k=i==K,!k){var m=nb.call(a,"__wrapped__"),n=nb.call(b,"__wrapped__");if(m||n)return fa(m?a.__wrapped__:a,n?b.__wrapped__:b,c,d,e,f);if(i!=Q||!Ab.nodeClass&&(j(a)||j(b)))return!1;if(i=!Ab.argsObject&&w(a)?ab:a.constructor,m=!Ab.argsObject&&w(b)?ab:b.constructor,i!=m&&!(sa(i)&&i instanceof i&&sa(m)&&m instanceof m)&&"constructor"in a&&"constructor"in b)return!1}for(i=!e,e||(e=h()),f||(f=h()),m=e.length;m--;)if(e[m]==a)return f[m]==b;var o=0,g=!0;if(e.push(a),f.push(b),k){if(m=a.length,o=b.length,(g=o==m)||d)for(;o--;)if(k=m,n=b[o],d)for(;k--&&!(g=fa(a[k],n,c,d,e,f)););else if(!(g=fa(a[o],n,c,d,e,f)))break}else Nb(b,function(b,h,i){return nb.call(i,h)?(o++,g=nb.call(a,h)&&fa(a[h],b,c,d,e,f)):void 0}),g&&!d&&Nb(a,function(a,b,c){return nb.call(c,b)?g=-1<--o:void 0});return e.pop(),f.pop(),i&&(l(e),l(f)),g}function ga(a,b,c,d,e){(r(b)?Ba:Ob)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=r(b))||q(b))){for(i=d.length;i--;)if(g=d[i]==b){j=e[i];break}if(!g){var k;c&&(i=c(j,b),k="undefined"!=typeof i)&&(j=i),k||(j=h?r(j)?j:[]:q(j)?j:{}),d.push(b),e.push(j),k||ga(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function ha(a,b){return a+mb(xb()*(b-a+1))}function ia(c,d,e){var g=-1,i=na(),j=c?c.length:0,k=[],n=!d&&j>=v&&i===a,o=e||n?h():k;for(n&&(o=f(o),i=b);++g<j;){var p=c[g],q=e?e(p,g,c):p;(d?!g||o[o.length-1]!==q:0>i(o,q))&&((e||n)&&o.push(q),k.push(p))}return n?(l(o.k),m(o)):e&&l(o),k}function ja(a){return function(b,c,d){var e={};if(c=X.createCallback(c,d,3),r(b)){d=-1;for(var f=b.length;++d<f;){var g=b[d];a(e,g,c(g,d,b),b)}}else Kb(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function ka(a,b,c,d,e,f){var g=16&b,h=32&b;if(!(2&b||sa(a)))throw new db;return g&&!c.length&&(b&=-17,c=!1),h&&!d.length&&(b&=-33,d=!1),(1==b||17===b?$:ca)([a,b,c,d,e,f])}function la(){V.h=I,V.b=V.c=V.g=V.i="",V.e="t",V.j=!0;for(var a,b=0;a=arguments[b];b++)for(var c in a)V[c]=a[c];b=V.a,V.d=/^[^,]+/.exec(b)[0],a=Za,b="return function("+b+"){",c=V;var d="var n,t="+c.d+",E="+c.e+";if(!t)return E;"+c.i+";";c.b?(d+="var u=t.length;n=-1;if("+c.b+"){",Ab.unindexedChars&&(d+="if(s(t)){t=t.split('')}"),d+="while(++n<u){"+c.g+";}}else{"):Ab.nonEnumArgs&&(d+="var u=t.length;n=-1;if(u&&p(t)){while(++n<u){n+='';"+c.g+";}}else{"),Ab.enumPrototypes&&(d+="var G=typeof t=='function';"),Ab.enumErrorProps&&(d+="var F=t===k||t instanceof Error;");var e=[];if(Ab.enumPrototypes&&e.push('!(G&&n=="prototype")'),Ab.enumErrorProps&&e.push('!(F&&(n=="message"||n=="name"))'),d+="for(n in t){",c.j&&e.push("m.call(t, n)"),e.length&&(d+="if("+e.join("&&")+"){"),d+=c.g+";",e.length&&(d+="}"),d+="}",Ab.nonEnumShadows){for(d+="if(t!==A){var i=t.constructor,r=t===(i&&i.prototype),f=t===J?I:t===k?j:L.call(t),x=y[f];",k=0;7>k;k++)d+="n='"+c.h[k]+"';if((!(r&&x[n])&&m.call(t,n))",c.j||(d+="||(!x[n]&&t[n]!==A[n])"),d+="){"+c.g+"}";d+="}"}return(c.b||Ab.nonEnumArgs)&&(d+="}"),d+=c.c+";return E",a("d,j,k,m,o,p,q,s,A,B,y,I,J,L",b+d+"}")(aa,N,fb,nb,t,w,r,va,gb,W,zb,S,hb,jb)}function ma(a){return Gb[a]}function na(){var b=(b=X.indexOf)===Ka?a:b;return b}function oa(a){return Hb[a]}function pa(a,b,c){var d=Cb(a),e=d.length;for(b=aa(b,c,3);e--&&(c=d[e],!1!==b(a[c],c,a)););return a}function qa(a){var b=[];return Nb(a,function(a,c){sa(a)&&b.push(c)}),b.sort()}function ra(a){for(var b=-1,c=Cb(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function sa(a){return"function"==typeof a}function ta(a){return!(!a||!W[typeof a])}function ua(a){return"number"==typeof a||a&&"object"==typeof a&&jb.call(a)==P||!1}function va(a){return"string"==typeof a||a&&"object"==typeof a&&jb.call(a)==S||!1}function wa(a){for(var b=-1,c=Cb(a),d=c.length,e=Wa(d);++b<d;)e[b]=a[c[b]];return e}function xa(a,b,c){var d=-1,e=na(),f=a?a.length:0,g=!1;return c=(0>c?ub(0,f+c):c)||0,r(a)?g=-1<e(a,b,c):"number"==typeof f?g=-1<(va(a)?a.indexOf(b,c):e(a,b,c)):Kb(a,function(a){return++d<c?void 0:!(g=a===b)}),g}function ya(a,b,c){var d=!0;if(b=X.createCallback(b,c,3),r(a)){c=-1;for(var e=a.length;++c<e&&(d=!!b(a[c],c,a)););}else Kb(a,function(a,c,e){return d=!!b(a,c,e)});return d}function za(a,b,c){var d=[];if(b=X.createCallback(b,c,3),r(a)){c=-1;for(var e=a.length;++c<e;){var f=a[c];b(f,c,a)&&d.push(f)}}else Kb(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function Aa(a,b,c){if(b=X.createCallback(b,c,3),!r(a)){var d;return Kb(a,function(a,c,e){return b(a,c,e)?(d=a,!1):void 0}),d}c=-1;for(var e=a.length;++c<e;){var f=a[c];if(b(f,c,a))return f}}function Ba(a,b,c){if(b&&"undefined"==typeof c&&r(a)){c=-1;for(var d=a.length;++c<d&&!1!==b(a[c],c,a););}else Kb(a,b,c);return a}function Ca(a,b,c){var d=a,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:aa(b,c,3),r(a))for(;e--&&!1!==b(a[e],e,a););else{if("number"!=typeof e)var f=Cb(a),e=f.length;else Ab.unindexedChars&&va(a)&&(d=a.split(""));Kb(a,function(a,c,g){return c=f?f[--e]:--e,b(d[c],c,g)})}return a}function Da(a,b,c){var d=-1,e=a?a.length:0,f=Wa("number"==typeof e?e:0);if(b=X.createCallback(b,c,3),r(a))for(;++d<e;)f[d]=b(a[d],d,a);else Kb(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function Ea(a,b,c){var e=-1/0,f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&r(a)){c=-1;for(var g=a.length;++c<g;){var h=a[c];h>f&&(f=h)}}else b=null==b&&va(a)?d:X.createCallback(b,c,3),Kb(a,function(a,c,d){c=b(a,c,d),c>e&&(e=c,f=a)});return f}function Fa(a,b,c,d){var e=3>arguments.length;if(b=X.createCallback(b,d,4),r(a)){var f=-1,g=a.length;for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a)}else Kb(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function Ga(a,b,c,d){var e=3>arguments.length;return b=X.createCallback(b,d,4),Ca(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function Ha(a){var b=-1,c=a?a.length:0,d=Wa("number"==typeof c?c:0);return Ba(a,function(a){var c=ha(0,++b);d[b]=d[c],d[c]=a}),d}function Ia(a,b,c){var d;if(b=X.createCallback(b,c,3),r(a)){c=-1;for(var e=a.length;++c<e&&!(d=b(a[c],c,a)););}else Kb(a,function(a,c,e){return!(d=b(a,c,e))});return!!d}function Ja(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=-1;for(b=X.createCallback(b,c,3);++f<e&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[0]:p;return n(a,0,vb(ub(0,d),e))}function Ka(b,c,d){if("number"==typeof d){var e=b?b.length:0;d=0>d?ub(0,e+d):d||0}else if(d)return d=Ma(b,c),b[d]===c?d:-1;return a(b,c,d)}function La(a,b,c){if("number"!=typeof b&&null!=b){var d=0,e=-1,f=a?a.length:0;for(b=X.createCallback(b,c,3);++e<f&&b(a[e],e,a);)d++}else d=null==b||c?1:ub(0,b);return n(a,d)}function Ma(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?X.createCallback(c,d,1):Sa,b=c(b);e<f;)d=e+f>>>1,c(a[d])<b?e=d+1:f=d;return e}function Na(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(c=X.createCallback(c,d,3)),ia(a,b,c)}function Oa(){for(var a=1<arguments.length?arguments:arguments[0],b=-1,c=a?Ea(Sb(a,"length")):0,d=Wa(0>c?0:c);++b<c;)d[b]=Sb(a,b);return d}function Pa(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||r(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Qa(a,b){return 2<arguments.length?ka(a,17,n(arguments,2),null,b):ka(a,1,null,null,b)}function Ra(a,b,c){function d(){k&&lb(k),g=k=l=p,(o||n!==b)&&(m=+new Ya,h=a.apply(j,f),k||g||(f=j=null))}function e(){var c=b-(+new Ya-i);0<c?k=qb(e,c):(g&&lb(g),c=l,g=k=l=p,c&&(m=+new Ya,h=a.apply(j,f),k||g||(f=j=null)))}var f,g,h,i,j,k,l,m=0,n=!1,o=!0;if(!sa(a))throw new db;if(b=ub(0,b)||0,!0===c)var q=!0,o=!1;else ta(c)&&(q=c.leading,n="maxWait"in c&&(ub(b,c.maxWait)||0),o="trailing"in c?c.trailing:o);return function(){if(f=arguments,i=+new Ya,j=this,l=o&&(k||!q),!1===n)var c=q&&!k;else{g||q||(m=i);var p=n-(i-m),r=0>=p;r?(g&&(g=lb(g)),m=i,h=a.apply(j,f)):g||(g=qb(d,p))}return r&&k?k=lb(k):k||b===n||(k=qb(e,b)),c&&(r=!0,h=a.apply(j,f)),!r||k||g||(f=j=null),h}}function Sa(a){return a}function Ta(a,b,c){var d=!0,e=b&&qa(b);b&&(c||e.length)||(null==c&&(c=b),f=Z,b=a,a=X,e=qa(b)),!1===c?d=!1:ta(c)&&"chain"in c&&(d=c.chain);var f=a,g=sa(f);Ba(e,function(c){var e=a[c]=b[c];g&&(f.prototype[c]=function(){var b=this.__chain__,c=this.__wrapped__,g=[c];if(ob.apply(g,arguments),g=e.apply(a,g),d||b){if(c===g&&ta(g))return this;g=new f(g),g.__chain__=b}return g})})}function Ua(a){return function(b){return b[a]}}function Va(){return this.__wrapped__}c=c?ba.defaults(Y.Object(),c,ba.pick(Y,H)):Y;var Wa=c.Array,Xa=c.Boolean,Ya=c.Date,Za=c.Function,$a=c.Math,_a=c.Number,ab=c.Object,bb=c.RegExp,cb=c.String,db=c.TypeError,eb=[],fb=c.Error.prototype,gb=ab.prototype,hb=cb.prototype,ib=c._,jb=gb.toString,kb=$a.ceil,lb=c.clearTimeout,mb=$a.floor,nb=gb.hasOwnProperty,ob=eb.push,pb=gb.propertyIsEnumerable,qb=c.setTimeout,rb=eb.splice,sb=c.isFinite,tb=c.isNaN,ub=$a.max,vb=$a.min,wb=c.parseInt,xb=$a.random,yb={};yb[K]=Wa,yb[L]=Xa,yb[M]=Ya,yb[O]=Za,yb[Q]=ab,yb[P]=_a,yb[R]=bb,yb[S]=cb;var zb={};zb[K]=zb[M]=zb[P]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},zb[L]=zb[S]={constructor:!0,toString:!0,valueOf:!0},zb[N]=zb[O]=zb[R]={constructor:!0,toString:!0},zb[Q]={constructor:!0},function(){for(var a=I.length;a--;){var b,c=I[a];for(b in zb)nb.call(zb,b)&&!nb.call(zb[b],c)&&(zb[b][c]=!1)}}(),Z.prototype=X.prototype;var Ab=X.support={};!function(){function a(){this.x=1}var b={0:1,length:1},c=[];a.prototype={valueOf:1,y:1};for(var d in new a)c.push(d);for(d in arguments);Ab.argsClass=!1,Ab.argsObject=arguments.constructor==ab&&!(arguments instanceof Wa),Ab.enumErrorProps=pb.call(fb,"message")||pb.call(fb,"name"),Ab.enumPrototypes=pb.call(a,"prototype"),Ab.nonEnumArgs=0!=d,Ab.nonEnumShadows=!/valueOf/.test(c),Ab.ownLast="x"!=c[0],Ab.spliceObjects=(eb.splice.call(b,0,1),!b[0]),Ab.unindexedChars="xx"!="x"[0]+ab("x")[0];try{Ab.nodeClass=!(jb.call(document)==Q&&!({toString:0}+""))}catch(e){Ab.nodeClass=!0}}(1),X.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:D,variable:"",imports:{_:X}};var Bb=function(){function a(){}return function(b){if(ta(b)){a.prototype=b;var d=new a;a.prototype=null}return d||c.Object()}}(),Cb=la({a:"z",e:"[]",i:"if(!(B[typeof z]))return E",g:"E.push(n)"}),Db={a:"g,e,K",i:"e=e&&typeof K=='undefined'?e:d(e,K,3)",b:"typeof u=='number'",g:"if(e(t[n],n,g)===false)return E"},Eb={a:"z,H,l",i:"var a=arguments,b=0,c=typeof l=='number'?2:a.length;while(++b<c){t=a[b];if(t&&B[typeof t]){",g:"if(typeof E[n]=='undefined')E[n]=t[n]",c:"}}"},Fb={i:"if(!B[typeof t])return E;"+Db.i,b:!1},Gb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hb=ra(Gb),Ib=bb("("+Cb(Hb).join("|")+")","g"),Jb=bb("["+Cb(Gb).join("")+"]","g"),Kb=la(Db),Lb=la(Eb,{i:Eb.i.replace(";",";if(c>3&&typeof a[c-2]=='function'){var e=d(a[--c-1],a[c--],2)}else if(c>2&&typeof a[c-1]=='function'){e=a[--c]}"),g:"E[n]=e?e(E[n],t[n]):t[n]"}),Mb=la(Eb),Nb=la(Db,Fb,{j:!1}),Ob=la(Db,Fb);sa(/x/)&&(sa=function(a){return"function"==typeof a&&jb.call(a)==O});var Pb=ja(function(a,b,c){nb.call(a,c)?a[c]++:a[c]=1}),Qb=ja(function(a,b,c){(nb.call(a,c)?a[c]:a[c]=[]).push(b)}),Rb=ja(function(a,b,c){a[c]=b}),Sb=Da,Tb=8==wb(x+"08")?wb:function(a,b){return wb(va(a)?a.replace(E,""):a,b||0)};return X.after=function(a,b){if(!sa(b))throw new db;return function(){return 1>--a?b.apply(this,arguments):void 0}},X.assign=Lb,X.at=function(a){var b=arguments,c=-1,d=ea(b,!0,!1,1),b=b[2]&&b[2][b[1]]===a?1:d.length,e=Wa(b);for(Ab.unindexedChars&&va(a)&&(a=a.split(""));++c<b;)e[c]=a[d[c]];return e},X.bind=Qa,X.bindAll=function(a){for(var b=1<arguments.length?ea(arguments,!0,!1,1):qa(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=ka(a[e],1,null,null,a)}return a},X.bindKey=function(a,b){return 2<arguments.length?ka(b,19,n(arguments,2),null,a):ka(b,3,null,null,a)},X.chain=function(a){return a=new Z(a),a.__chain__=!0,a},X.compact=function(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d},X.compose=function(){for(var a=arguments,b=a.length;b--;)if(!sa(a[b]))throw new db;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}},X.constant=function(a){return function(){return a}},X.countBy=Pb,X.create=function(a,b){var c=Bb(a);return b?Lb(c,b):c},X.createCallback=function(a,b,c){var d=typeof a;if(null==a||"function"==d)return aa(a,b,c);if("object"!=d)return Ua(a);var e=Cb(a),f=e[0],g=a[f];return 1!=e.length||g!==g||ta(g)?function(b){for(var c=e.length,d=!1;c--&&(d=fa(b[e[c]],a[e[c]],null,!0)););return d}:function(a){return a=a[f],g===a&&(0!==g||1/g==1/a)}},X.curry=function(a,b){return b="number"==typeof b?b:+b||a.length,ka(a,4,null,null,null,b)},X.debounce=Ra,X.defaults=Mb,X.defer=function(a){if(!sa(a))throw new db;var b=n(arguments,1);return qb(function(){a.apply(p,b)},1)},X.delay=function(a,b){if(!sa(a))throw new db;var c=n(arguments,2);return qb(function(){a.apply(p,c)},b)},X.difference=function(a){return da(a,ea(arguments,!0,!0,1))},X.filter=za,X.flatten=function(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=Da(a,c,d)),ea(a,b)},X.forEach=Ba,X.forEachRight=Ca,X.forIn=Nb,X.forInRight=function(a,b,c){var d=[];Nb(a,function(a,b){d.push(b,a)});var e=d.length;for(b=aa(b,c,3);e--&&!1!==b(d[e--],d[e],a););return a},X.forOwn=Ob,X.forOwnRight=pa,X.functions=qa,X.groupBy=Qb,X.indexBy=Rb,X.initial=function(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=X.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return n(a,0,vb(ub(0,e-d),e))},X.intersection=function(){for(var c=[],d=-1,e=arguments.length,g=h(),i=na(),j=i===a,k=h();++d<e;){var n=arguments[d];(r(n)||w(n))&&(c.push(n),g.push(j&&n.length>=v&&f(d?c[d]:k)))}var j=c[0],o=-1,p=j?j.length:0,q=[];a:for(;++o<p;){var s=g[0],n=j[o];if(0>(s?b(s,n):i(k,n))){for(d=e,(s||k).push(n);--d;)if(s=g[d],0>(s?b(s,n):i(c[d],n)))continue a;q.push(n)}}for(;e--;)(s=g[e])&&m(s);return l(g),l(k),q},X.invert=ra,X.invoke=function(a,b){var c=n(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=Wa("number"==typeof f?f:0);return Ba(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g},X.keys=Cb,X.map=Da,X.mapValues=function(a,b,c){var d={};return b=X.createCallback(b,c,3),Ob(a,function(a,c,e){d[c]=b(a,c,e)}),d},X.max=Ea,X.memoize=function(a,b){function c(){var d=c.cache,e=b?b.apply(this,arguments):u+arguments[0];return nb.call(d,e)?d[e]:d[e]=a.apply(this,arguments)}if(!sa(a))throw new db;return c.cache={},c},X.merge=function(a){var b=arguments,c=2;if(!ta(a))return a;if("number"!=typeof b[2]&&(c=b.length),3<c&&"function"==typeof b[c-2])var d=aa(b[--c-1],b[c--],2);else 2<c&&"function"==typeof b[c-1]&&(d=b[--c]);for(var b=n(arguments,1,c),e=-1,f=h(),g=h();++e<c;)ga(a,b[e],d,f,g);return l(f),l(g),a},X.min=function(a,b,c){var e=1/0,f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&r(a)){c=-1;for(var g=a.length;++c<g;){var h=a[c];h<f&&(f=h)}}else b=null==b&&va(a)?d:X.createCallback(b,c,3),Kb(a,function(a,c,d){c=b(a,c,d),c<e&&(e=c,f=a)});return f},X.omit=function(a,b,c){var d={};if("function"!=typeof b){var e=[];Nb(a,function(a,b){e.push(b)});for(var e=da(e,ea(arguments,!0,!1,1)),f=-1,g=e.length;++f<g;){var h=e[f];d[h]=a[h]}}else b=X.createCallback(b,c,3),Nb(a,function(a,c,e){b(a,c,e)||(d[c]=a)});return d},X.once=function(a){var b,c;if(!sa(a))throw new db;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}},X.pairs=function(a){for(var b=-1,c=Cb(a),d=c.length,e=Wa(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e},X.partial=function(a){return ka(a,16,n(arguments,1))},X.partialRight=function(a){return ka(a,32,null,n(arguments,1))},X.pick=function(a,b,c){var d={};if("function"!=typeof b)for(var e=-1,f=ea(arguments,!0,!1,1),g=ta(a)?f.length:0;++e<g;){var h=f[e];h in a&&(d[h]=a[h])}else b=X.createCallback(b,c,3),Nb(a,function(a,c,e){b(a,c,e)&&(d[c]=a)});return d},X.pluck=Sb,X.property=Ua,X.pull=function(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(rb.call(a,f--,1),e--);return a},X.range=function(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);var d=-1;b=ub(0,kb((b-a)/(c||1)));for(var e=Wa(b);++d<b;)e[d]=a,a+=c;return e},X.reject=function(a,b,c){return b=X.createCallback(b,c,3),za(a,function(a,c,d){return!b(a,c,d)})},X.remove=function(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=X.createCallback(b,c,3);++d<e;)c=a[d],b(c,d,a)&&(f.push(c),rb.call(a,d--,1),e--);return f},X.rest=La,X.shuffle=Ha,X.sortBy=function(a,b,c){var d=-1,f=r(b),g=a?a.length:0,j=Wa("number"==typeof g?g:0);for(f||(b=X.createCallback(b,c,3)),Ba(a,function(a,c,e){var g=j[++d]=i();f?g.m=Da(b,function(b){return a[b]}):(g.m=h())[0]=b(a,c,e),g.n=d,g.o=a}),g=j.length,j.sort(e);g--;)a=j[g],j[g]=a.o,f||l(a.m),m(a);return j},X.tap=function(a,b){return b(a),a},X.throttle=function(a,b,c){var d=!0,e=!0;if(!sa(a))throw new db;return!1===c?d=!1:ta(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),U.leading=d,U.maxWait=b,U.trailing=e,Ra(a,b,U)},X.times=function(a,b,c){a=-1<(a=+a)?a:0;var d=-1,e=Wa(a);for(b=aa(b,c,1);++d<a;)e[d]=b(d);return e},X.toArray=function(a){return a&&"number"==typeof a.length?Ab.unindexedChars&&va(a)?a.split(""):n(a):wa(a)},X.transform=function(a,b,c,d){var e=r(a);if(null==c)if(e)c=[];else{var f=a&&a.constructor;c=Bb(f&&f.prototype)}return b&&(b=X.createCallback(b,d,4),(e?Kb:Ob)(a,function(a,d,e){return b(c,a,d,e)})),c},X.union=function(){return ia(ea(arguments,!0,!0))},X.uniq=Na,X.values=wa,X.where=za,X.without=function(a){return da(a,n(arguments,1))},X.wrap=function(a,b){return ka(b,16,[a])},X.xor=function(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(r(c)||w(c))var d=d?ia(da(d,c).concat(da(c,d))):c}return d||[]},X.zip=Oa,X.zipObject=Pa,X.collect=Da,X.drop=La,X.each=Ba,X.eachRight=Ca,X.extend=Lb,X.methods=qa,X.object=Pa,X.select=za,X.tail=La,X.unique=Na,X.unzip=Oa,Ta(X),X.clone=function(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),_(a,b,"function"==typeof c&&aa(c,d,1))},X.cloneDeep=function(a,b,c){return _(a,!0,"function"==typeof b&&aa(b,c,1))},X.contains=xa,X.escape=function(a){return null==a?"":cb(a).replace(Jb,ma)},X.every=ya,X.find=Aa,X.findIndex=function(a,b,c){var d=-1,e=a?a.length:0;for(b=X.createCallback(b,c,3);++d<e;)if(b(a[d],d,a))return d;return-1},X.findKey=function(a,b,c){var d;return b=X.createCallback(b,c,3),Ob(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d},X.findLast=function(a,b,c){var d;return b=X.createCallback(b,c,3),Ca(a,function(a,c,e){return b(a,c,e)?(d=a,!1):void 0}),d},X.findLastIndex=function(a,b,c){var d=a?a.length:0;for(b=X.createCallback(b,c,3);d--;)if(b(a[d],d,a))return d;return-1},X.findLastKey=function(a,b,c){var d;return b=X.createCallback(b,c,3),pa(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d},X.has=function(a,b){return!!a&&nb.call(a,b)},X.identity=Sa,X.indexOf=Ka,X.isArguments=w,X.isArray=r,X.isBoolean=function(a){return!0===a||!1===a||a&&"object"==typeof a&&jb.call(a)==L||!1},X.isDate=function(a){return a&&"object"==typeof a&&jb.call(a)==M||!1},X.isElement=function(a){return a&&1===a.nodeType||!1},X.isEmpty=function(a){var b=!0;if(!a)return b;var c=jb.call(a),d=a.length;return c==K||c==S||(Ab.argsClass?c==J:w(a))||c==Q&&"number"==typeof d&&sa(a.splice)?!d:(Ob(a,function(){return b=!1}),b)},X.isEqual=function(a,b,c,d){return fa(a,b,"function"==typeof c&&aa(c,d,2))},X.isFinite=function(a){return sb(a)&&!tb(parseFloat(a))},X.isFunction=sa,X.isNaN=function(a){return ua(a)&&a!=+a},X.isNull=function(a){return null===a},X.isNumber=ua,X.isObject=ta,X.isPlainObject=q,X.isRegExp=function(a){return a&&W[typeof a]&&jb.call(a)==R||!1},X.isString=va,X.isUndefined=function(a){return"undefined"==typeof a},X.lastIndexOf=function(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?ub(0,d+c):vb(c,d-1))+1);d--;)if(a[d]===b)return d;return-1},X.mixin=Ta,X.noConflict=function(){return c._=ib,this},X.noop=function(){},X.now=function(){return(new Ya).getTime()},X.parseInt=Tb,X.random=function(a,b,c){var d=null==a,e=null==b;return null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1?(c=xb(),vb(a+c*(b-a+parseFloat("1e-"+((c+"").length-1))),b)):ha(a,b)},X.reduce=Fa,X.reduceRight=Ga,X.result=function(a,b){if(a){var c=a[b];return sa(c)?a[b]():c}},X.runInContext=o,X.size=function(a){var b=a?a.length:0;return"number"==typeof b?b:Cb(a).length},X.some=Ia,X.sortedIndex=Ma,X.template=function(a,b,c){var d=X.templateSettings;a=cb(a||""),c=Mb({},c,d);var e,f=Mb({},c.imports,d.imports),d=Cb(f),f=wa(f),h=0,i=c.interpolate||F,j="__p+='",i=bb((c.escape||F).source+"|"+i.source+"|"+(i===D?B:F).source+"|"+(c.evaluate||F).source+"|$","g");a.replace(i,function(b,c,d,f,i,k){return d||(d=f),j+=a.slice(h,k).replace(G,g),c&&(j+="'+__e("+c+")+'"),i&&(e=!0,j+="';"+i+";\n__p+='"),d&&(j+="'+((__t=("+d+"))==null?'':__t)+'"),h=k+b.length,b}),j+="';",i=c=c.variable,i||(c="obj",j="with("+c+"){"+j+"}"),j=(e?j.replace(y,""):j).replace(z,"$1").replace(A,"$1;"),j="function("+c+"){"+(i?"":c+"||("+c+"={});")+"var __t,__p='',__e=_.escape"+(e?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+j+"return __p}";try{var k=Za(d,"return "+j).apply(p,f)}catch(l){throw l.source=j,l}return b?k(b):(k.source=j,k)},X.unescape=function(a){return null==a?"":cb(a).replace(Ib,oa)},X.uniqueId=function(a){var b=++s;return cb(null==a?"":a)+b},X.all=ya,X.any=Ia,X.detect=Aa,X.findWhere=Aa,X.foldl=Fa,X.foldr=Ga,X.include=xa,X.inject=Fa,Ta(function(){var a={};return Ob(X,function(b,c){X.prototype[c]||(a[c]=b)}),a}(),!1),X.first=Ja,X.last=function(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=X.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[e-1]:p;return n(a,ub(0,e-d))},X.sample=function(a,b,c){return a&&"number"!=typeof a.length?a=wa(a):Ab.unindexedChars&&va(a)&&(a=a.split("")),null==b||c?a?a[ha(0,a.length-1)]:p:(a=Ha(a),a.length=vb(ub(0,b),a.length),a)},X.take=Ja,X.head=Ja,Ob(X,function(a,b){var c="sample"!==b;X.prototype[b]||(X.prototype[b]=function(b,d){var e=this.__chain__,f=a(this.__wrapped__,b,d);return e||null!=b&&(!d||c&&"function"==typeof b)?new Z(f,e):f})}),X.VERSION="2.4.1",X.prototype.chain=function(){return this.__chain__=!0,this},X.prototype.toString=function(){return cb(this.__wrapped__)},X.prototype.value=Va,X.prototype.valueOf=Va,Kb(["join","pop","shift"],function(a){var b=eb[a];X.prototype[a]=function(){var a=this.__chain__,c=b.apply(this.__wrapped__,arguments);return a?new Z(c,a):c}}),Kb(["push","reverse","sort","unshift"],function(a){var b=eb[a];X.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),Kb(["concat","slice","splice"],function(a){var b=eb[a];X.prototype[a]=function(){return new Z(b.apply(this.__wrapped__,arguments),this.__chain__)}}),Ab.spliceObjects||Kb(["pop","shift","splice"],function(a){var b=eb[a],c="splice"==a;X.prototype[a]=function(){var a=this.__chain__,d=this.__wrapped__,e=b.apply(d,arguments);return 0===d.length&&delete d[0],a||c?new Z(e,a):e}}),X}var p,q=[],r=[],s=0,t={},u=+new Date+"",v=75,w=40,x=" \t\x0B\fÂ \ufeff\n\r\u2028\u2029áš€á Žâ€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€",y=/\b__p\+='';/g,z=/\b(__p\+=)''\+/g,A=/(__e\(.*?\)|\b__t\))\+'';/g,B=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,D=/<%=([\s\S]+?)%>/g,E=RegExp("^["+x+"]*0+(?=.$)"),F=/($^)/,G=/['\n\r\t\u2028\u2029\\]/g,H="Array Boolean Date Error Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),J="[object Arguments]",K="[object Array]",L="[object Boolean]",M="[object Date]",N="[object Error]",O="[object Function]",P="[object Number]",Q="[object Object]",R="[object RegExp]",S="[object String]",T={};T[O]=!1,T[J]=T[K]=T[L]=T[M]=T[P]=T[Q]=T[R]=T[S]=!0;var U={leading:!1,maxWait:0,trailing:!1},V={a:"",b:null,c:"",d:"",e:"",v:null,g:"",h:null,support:null,i:"",j:!1},W={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},X={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},Y=W[typeof window]&&window||this,Z=W[typeof exports]&&exports&&!exports.nodeType&&exports,$=W[typeof module]&&module&&!module.nodeType&&module,_=$&&$.exports===Z&&Z,aa=W[typeof global]&&global;!aa||aa.global!==aa&&aa.window!==aa||(Y=aa);var ba=o();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Y._=ba,define(function(){return ba})):Z&&$?_?($.exports=ba)._=ba:Z._=ba:Y._=ba}.call(this),function(a){function b(a,b,c,d){var e=c.lang();return e[a].call?e[a](c,d):e[a][b]}function c(a,b){return function(c){return h(a.call(this,c),b)}}function d(a){return function(b){var c=a.call(this,b);return c+this.lang().ordinal(c)}}function e(a,b,c){this._d=a,this._isUTC=!!b,this._a=a._a||null,this._lang=c||!1}function f(a){var b=this._data={},c=a.years||a.y||0,d=a.months||a.M||0,e=a.weeks||a.w||0,f=a.days||a.d||0,h=a.hours||a.h||0,i=a.minutes||a.m||0,j=a.seconds||a.s||0,k=a.milliseconds||a.ms||0;this._milliseconds=k+1e3*j+6e4*i+36e5*h,this._days=f+7*e,this._months=d+12*c,b.milliseconds=k%1e3,j+=g(k/1e3),b.seconds=j%60,i+=g(j/60),b.minutes=i%60,h+=g(i/60),b.hours=h%24,f+=g(h/24),f+=7*e,b.days=f%30,d+=g(f/30),b.months=d%12,c+=g(d/12),b.years=c,this._lang=!1}function g(a){return a<0?Math.ceil(a):Math.floor(a)}function h(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function i(a,b,c){var d,e=b._milliseconds,f=b._days,g=b._months;e&&a._d.setTime(+a+e*c),f&&a.date(a.date()+f*c),g&&(d=a.date(),a.date(1).month(a.month()+g*c).date(Math.min(d,a.daysInMonth())))}function j(a){return"[object Array]"===Object.prototype.toString.call(a)}function k(a,b){var c,d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0;for(c=0;c<d;c++)~~a[c]!==~~b[c]&&f++;return f+e}function l(a,b,c,d){var e,f,g=[];for(e=0;e<7;e++)g[e]=a[e]=null==a[e]?2===e?1:0:a[e];return a[7]=g[7]=b,null!=a[8]&&(g[8]=a[8]),a[3]+=c||0,a[4]+=d||0,f=new Date(0),b?(f.setUTCFullYear(a[0],a[1],a[2]),f.setUTCHours(a[3],a[4],a[5],a[6])):(f.setFullYear(a[0],a[1],a[2]),f.setHours(a[3],a[4],a[5],a[6])),f._a=g,f}function m(a,b){var c,d,e=[];for(!b&&H&&(b=require("./lang/"+a)),c=0;c<I.length;c++)b[I[c]]=b[I[c]]||F.en[I[c]];for(c=0;c<12;c++)d=B([2e3,c]),e[c]=new RegExp("^"+(b.months[c]||b.months(d,""))+"|^"+(b.monthsShort[c]||b.monthsShort(d,"")).replace(".",""),"i");return b.monthsParse=b.monthsParse||e,F[a]=b,b}function n(a){var b="string"==typeof a&&a||a&&a._lang||null;return b?F[b]||m(b):B}function o(a){return a.match(/\[.*\]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function p(a){var b,c,d=a.match(K);for(b=0,c=d.length;b<c;b++)ba[d[b]]?d[b]=ba[d[b]]:d[b]=o(d[b]);return function(e){var f="";for(b=0;b<c;b++)f+="function"==typeof d[b].call?d[b].call(e,a):d[b];return f}}function q(a,b){function c(b){return a.lang().longDateFormat[b]||b}for(var d=5;d--&&L.test(b);)b=b.replace(L,c);return $[b]||($[b]=p(b)),$[b](a)}function r(a){switch(a){case"DDDD":return P;case"YYYY":return Q;case"S":case"SS":case"SSS":case"DDD":return O;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return R;case"Z":case"ZZ":return S;case"T":return T;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return N;default:return new RegExp(a.replace("\\",""))}}function s(a,b,c,d){var e,f;switch(a){case"M":case"MM":c[1]=null==b?0:~~b-1;break;case"MMM":case"MMMM":for(e=0;e<12;e++)if(n().monthsParse[e].test(b)){c[1]=e,f=!0;break}f||(c[8]=!1);break;case"D":case"DD":case"DDD":case"DDDD":null!=b&&(c[2]=~~b);break;case"YY":c[0]=~~b+(~~b>70?1900:2e3);break;case"YYYY":c[0]=~~Math.abs(b);break;case"a":case"A":d.isPm="pm"===(b+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":c[3]=~~b;break;case"m":case"mm":c[4]=~~b;break;case"s":case"ss":c[5]=~~b;break;case"S":case"SS":case"SSS":c[6]=~~(1e3*("0."+b));break;case"Z":case"ZZ":d.isUTC=!0,e=(b+"").match(X),e&&e[1]&&(d.tzh=~~e[1]),e&&e[2]&&(d.tzm=~~e[2]),e&&"+"===e[0]&&(d.tzh=-d.tzh,d.tzm=-d.tzm)}null==b&&(c[8]=!1)}function t(a,b){var c,d,e=[0,0,1,0,0,0,0],f={tzh:0,tzm:0},g=b.match(K);for(c=0;c<g.length;c++)d=(r(g[c]).exec(a)||[])[0],d&&(a=a.slice(a.indexOf(d)+d.length)),ba[g[c]]&&s(g[c],d,e,f);return f.isPm&&e[3]<12&&(e[3]+=12),f.isPm===!1&&12===e[3]&&(e[3]=0),l(e,f.isUTC,f.tzh,f.tzm)}function u(a,b){var c,d,f,g,h,i=a.match(M)||[],j=99;for(f=0;f<b.length;f++)g=t(a,b[f]),d=q(new e(g),b[f]).match(M)||[],h=k(i,d),h<j&&(j=h,c=g);return c}function v(a){var b,c="YYYY-MM-DDT";if(U.exec(a)){for(b=0;b<4;b++)if(W[b][1].exec(a)){c+=W[b][0];break}return S.exec(a)?t(a,c+" Z"):t(a,c)}return new Date(a)}function w(a,b,c,d,e){var f=e.relativeTime[a];return"function"==typeof f?f(b||1,!!c,a,d):f.replace(/%d/i,b||1)}function x(a,b,c){var d=E(Math.abs(a)/1e3),e=E(d/60),f=E(e/60),g=E(f/24),h=E(g/365),i=d<45&&["s",d]||1===e&&["m"]||e<45&&["mm",e]||1===f&&["h"]||f<22&&["hh",f]||1===g&&["d"]||g<=25&&["dd",g]||g<=45&&["M"]||g<345&&["MM",E(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,w.apply({},i)}function y(a,b){B.fn[a]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),this):this._d["get"+c+b]()}}function z(a){B.duration.fn[a]=function(){return this._data[a]}}function A(a,b){B.duration.fn["as"+a]=function(){return+this/b}}for(var B,C,D="1.7.2",E=Math.round,F={},G="en",H="undefined"!=typeof module&&module.exports,I="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),J=/^\/?Date\((\-?\d+)/i,K=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,L=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,M=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,N=/\d\d?/,O=/\d{1,3}/,P=/\d{3}/,Q=/\d{1,4}/,R=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,S=/Z|[\+\-]\d\d:?\d\d/i,T=/T/i,U=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,V="YYYY-MM-DDTHH:mm:ssZ",W=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],X=/([\+\-]|\d\d)/gi,Y="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Z={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},$={},_="DDD w M D d".split(" "),aa="M D H h m s w".split(" "),ba={M:function(){return this.month()+1},MMM:function(a){return b("monthsShort",this.month(),this,a)},MMMM:function(a){return b("months",this.month(),this,a)},D:function(){return this.date()},DDD:function(){var a=new Date(this.year(),this.month(),this.date()),b=new Date(this.year(),0,1);return~~((a-b)/864e5+1.5)},d:function(){return this.day()},dd:function(a){return b("weekdaysMin",this.day(),this,a)},ddd:function(a){return b("weekdaysShort",this.day(),this,a)},dddd:function(a){return b("weekdays",this.day(),this,a)},w:function(){var a=new Date(this.year(),this.month(),this.date()-this.day()+5),b=new Date(a.getFullYear(),0,4);return~~((a-b)/864e5/7+1.5)},YY:function(){return h(this.year()%100,2)},YYYY:function(){return h(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return h(~~(this.milliseconds()/10),2)},SSS:function(){return h(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return a<0&&(a=-a,b="-"),b+h(~~(a/60),2)+":"+h(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";return a<0&&(a=-a,b="-"),b+h(~~(10*a/6),4)}};_.length;)C=_.pop(),ba[C+"o"]=d(ba[C]);for(;aa.length;)C=aa.pop(),ba[C+C]=c(ba[C],2);for(ba.DDDD=c(ba.DDD,3),B=function(b,c){if(null===b||""===b)return null;var d,f;return B.isMoment(b)?new e(new Date((+b._d)),b._isUTC,b._lang):(c?d=j(c)?u(b,c):t(b,c):(f=J.exec(b),d=b===a?new Date:f?new Date((+f[1])):b instanceof Date?b:j(b)?l(b):"string"==typeof b?v(b):new Date(b)),new e(d))},B.utc=function(a,b){return j(a)?new e(l(a,!0),(!0)):("string"!=typeof a||S.exec(a)||(a+=" +0000",b&&(b+=" Z")),B(a,b).utc())},B.unix=function(a){return B(1e3*a)},B.duration=function(a,b){var c,d=B.isDuration(a),e="number"==typeof a,g=d?a._data:e?{}:a;return e&&(b?g[b]=a:g.milliseconds=a),c=new f(g),d&&(c._lang=a._lang),c},B.humanizeDuration=function(a,b,c){return B.duration(a,b===!0?null:b).humanize(b===!0||c)},B.version=D,B.defaultFormat=V,B.lang=function(a,b){var c;if(!a)return G;if(!b&&F[a]||m(a,b),F[a]){for(c=0;c<I.length;c++)B[I[c]]=F[a][I[c]];B.monthsParse=F[a].monthsParse,G=a}},B.langData=n,B.isMoment=function(a){return a instanceof e},B.isDuration=function(a){return a instanceof f},B.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"}}),B.fn=e.prototype={clone:function(){return B(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?null!=this._a[8]?!!this._a[8]:!k(this._a,(this._a[7]?B.utc(this._a):B(this._a)).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(a){return q(this,a?a:B.defaultFormat)},add:function(a,b){var c=b?B.duration(+b,a):B.duration(a);return i(this,c,1),this},subtract:function(a,b){var c=b?B.duration(+b,a):B.duration(a);return i(this,c,-1),this},diff:function(a,b,c){var d,e=this._isUTC?B(a).utc():B(a).local(),f=6e4*(this.zone()-e.zone()),g=this._d-e._d-f,h=this.year()-e.year(),i=this.month()-e.month(),j=this.date()-e.date();return d="months"===b?12*h+i+j/30:"years"===b?h+(i+j/30)/12:"seconds"===b?g/1e3:"minutes"===b?g/6e4:"hours"===b?g/36e5:"days"===b?g/864e5:"weeks"===b?g/6048e5:g,c?d:E(d)},from:function(a,b){return B.duration(this.diff(a)).lang(this._lang).humanize(!b)},fromNow:function(a){return this.from(B(),a)},calendar:function(){var a=this.diff(B().sod(),"days",!0),b=this.lang().calendar,c=b.sameElse,d=a<-6?c:a<-1?b.lastWeek:a<0?b.lastDay:a<1?b.sameDay:a<2?b.nextDay:a<7?b.nextWeek:c;return this.format("function"==typeof d?d.apply(this):d)},isLeapYear:function(){var a=this.year();return a%4===0&&a%100!==0||a%400===0},isDST:function(){return this.zone()<B([this.year()]).zone()||this.zone()<B([this.year(),5]).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==a?b:this.add({d:a-b})},startOf:function(a){switch(a.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return B.utc([this.year(),this.month()+1,0]).date()},lang:function(b){return b===a?n(this):(this._lang=b,this)}},C=0;C<Y.length;C++)y(Y[C].toLowerCase(),Y[C]);y("year","FullYear"),B.duration.fn=f.prototype={weeks:function(){return g(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(a){var b=+this,c=this.lang().relativeTime,d=x(b,!a,this.lang()),e=b<=0?c.past:c.future;return a&&(d="function"==typeof e?e(d):e.replace(/%s/i,d)),d},lang:B.fn.lang};for(C in Z)Z.hasOwnProperty(C)&&(A(C,Z[C]),z(C.toLowerCase()));A("Weeks",6048e5),H&&(module.exports=B),"undefined"==typeof ender&&(this.moment=B),"function"==typeof define&&define.amd&&define("moment",[],function(){return B})}.call(this),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;c<f;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;c<f;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;d<c;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){"use strict";function a(){for(var c=[],d=0;d<arguments.length;d++){var e=arguments[d];if(e){var f=typeof e;if("string"===f||"number"===f)c.push(e);else if(Array.isArray(e))c.push(a.apply(null,e));else if("object"===f)for(var g in e)b.call(e,g)&&e[g]&&c.push(g)}}return c.join(" ")}var b={}.hasOwnProperty;"undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return a}):window.classNames=a}(),!function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=function(a,b){for(var c=0,d=b.length;d>c;c++)for(var e in b[c])a.prototype[e]=b[c][e]};b.exports=function(a,b){function d(a,b,c){this.__eventId=c,this.__value=a,this.__path=b||[],this.__wrap()}return d.prototype.set=function(a,c){b.publish("update"+this.__eventId,{value:a,path:this.__path,forceUpdate:c})},d.prototype.getValue=function(){return this.__value},d.prototype.val=d.prototype.getValue,d.prototype.getPath=function(){return this.__path},d.prototype.getKey=function(){return this.__path[this.__path.length-1]},d.prototype.forEach=function(a){if(this.__isObject())for(var b in this.__wrappers)a(b,this.__wrappers[b],this.__wrappers);else this.__isArray()&&this.__wrappers.forEach(a)},d.prototype.remove=function(){b.publish("remove"+this.__eventId,{path:this.__path})},d.prototype.__wrap=function(){var a;if(this.__cleanup(),this.__isObject()){this.__wrappers={};for(var b in this.__value)a=this.__path.slice(),a.push(b),this.__wrappers[b]=new d(this.__value[b],a,this.__eventId),this[b]=this.__wrappers[b]}else if(this.__isArray()){this.__wrappers=[];for(var c=0,e=this.__value.length;e>c;c++)a=this.__path.slice(),a.push(c),this.__wrappers[c]=new d(this.__value[c],a,this.__eventId),this[c]=this.__wrappers[c]}},d.prototype.__cleanup=function(){if(this.__wrappers){if(this.__isObject())for(var a in this.__wrappers)delete this[a];else if(this.__isArray())for(var b=0,c=this.__wrappers.length;c>b;b++)delete this[b];delete this.__wrappers}},d.prototype.__forceUpdate=function(){this.set(this.__value,!0)},d.prototype.__isObject=function(){return this.__value&&this.__value.constructor===Object;},d.prototype.__isArray=function(){return this.__value&&this.__value.constructor===Array},c(d,a),d}},{}],2:[function(a,b){var c=a("./pubsub"),d=a("./wrappers/array"),e=a("./wrappers/hash"),f=a("./data_wrapper")([d,e],c),g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i=function(a,b){function c(a,b){this.__value=a,this.__path=[],this.__callbacks=b?[b]:[],this.__callbacksQueued=!1,this.__subscribe(),this.__wrap()}return h(c,a),c.prototype.on=function(a,b){"update"===a&&this.__callbacks.push(b)},c.prototype.off=function(a,b){if("update"===a)if(b){for(var c=0,d=this.__callbacks.length;d>c;c++)if(b===this.__callbacks[c]){this.__callbacks.splice(c,1);break}}else this.__callbacks=[]},c.prototype.update=function(a,b,c){return!(!c&&!this.__shouldUpdate(a,b))&&(this.__setValue(a,b),this.__rewrap(b),this.__callbacksQueued||(this.__callbacksQueued=!0,setTimeout(function(){this.__runCallbacks()}.bind(this),0)),!0)},c.prototype.__runCallbacks=function(){this.__callbacksQueued=!1;for(var a=0,b=this.__callbacks.length;b>a;a++)this.__callbacks[a]&&this.__callbacks[a](this)},c.prototype.__subscribe=function(){this.__eventId=b.subscribeToCortex(function(a,b){this.update(b.value,b.path,b.forceUpdate)}.bind(this),function(a,b){this.__remove(b.path)}.bind(this))},c.prototype.__remove=function(a){if(a.length){var b=a.slice(0,a.length-1),c=this.__subValue(b),d=a[a.length-1],e=c[d];return c.constructor===Object?delete c[d]:c.constructor===Array&&c.splice(d,1),this.update(c,b,!0),e}delete this.__wrappers,delete this.__value},c.prototype.__rewrap=function(a){for(var b=a.slice(0,a.length-1),c=this,d=0,e=b.length;e>d;d++)c=c[b[d]];c.__wrap()},c.prototype.__setValue=function(a,b){if(b.length>1){var c=this.__subValue(b.slice(0,b.length-1));c[b[b.length-1]]=a}else 1===b.length?this.__value[b[0]]=a:this.__value=a},c.prototype.__subValue=function(a){for(var b=this.__value,c=0,d=a.length;d>c;c++)b=b[a[c]];return b},c.prototype.__shouldUpdate=function(a,b){for(var c=this.__value,d=0,e=b.length;e>d;d++)c=c[b[d]];return this.__isDifferent(c,a)},c.prototype.__isDifferent=function(a,b){if(a&&a.constructor===Object){if(!b||b.constructor!==Object||this.__isDifferent(Object.keys(a).sort(),Object.keys(b).sort()))return!0;for(var c in a)if(this.__isDifferent(a[c],b[c]))return!0}else{if(!a||a.constructor!==Array)return a!==b;if(!b||b.constructor!==Array||a.length!==b.length)return!0;for(var d=0,e=a.length;e>d;d++)if(this.__isDifferent(a[d],b[d]))return!0}},c}(f,c);"undefined"!=typeof window&&null!==window&&(window.Cortex=i),b.exports=i},{"./data_wrapper":1,"./pubsub":3,"./wrappers/array":4,"./wrappers/hash":5}],3:[function(a,b){var c=function(){function a(){this.uid=-1,this.topics={}}return a.prototype.subscribe=function(a,b){this.topics.hasOwnProperty(a)||(this.topics[a]=[]),this.topics[a].push({callback:b})},a.prototype.publish=function(a,b){if(!this.topics.hasOwnProperty(a))return!1;var c=this.topics[a],d=function(){for(var d=0,e=c.length;e>d;d++)c[d].callback(a,b)};return d(),!0},a.prototype.subscribeToCortex=function(a,b){return this.uid+=1,this.subscribe("update"+this.uid,a),this.subscribe("remove"+this.uid,b),this.uid},a.prototype.unsubscribeFromCortex=function(a){delete this.topics["update"+a],delete this.topics["remove"+a]},a}();b.exports=new c},{}],4:[function(a,b){var c={count:function(){return this.__value.length},map:function(a){return this.__wrappers.map(a)},filter:function(a,b){return this.__wrappers.filter(a,b)},find:function(a){for(var b=0,c=this.__wrappers.length;c>b;b++)if(a(this.__wrappers[b],b,this.__wrappers))return this.__wrappers[b];return null},findIndex:function(a){for(var b=0,c=this.__wrappers.length;c>b;b++)if(a(this.__wrappers[b],b,this.__wrappers))return b;return-1},push:function(a){var b=this.__value.push(a);return this.__forceUpdate(),b},pop:function(){var a=this.__value.pop();return this.__forceUpdate(),a},unshift:function(a){var b=this.__value.unshift(a);return this.__forceUpdate(),b},shift:function(){var a=this.__value.shift();return this.__forceUpdate(),a},insertAt:function(a,b){var c=[a,0].concat(b);Array.prototype.splice.apply(this.__value,c),this.__forceUpdate()},removeAt:function(a,b){(isNaN(b)||0>=b)&&(b=1);var c=this.__value.splice(a,b);return this.__forceUpdate(),c}};b.exports=c},{}],5:[function(a,b){var c={keys:function(){return Object.keys(this.__value)},values:function(){var a,b=[];for(a in this.__value)b.push(this.__value[a]);return b},hasKey:function(a){return null!=this.__value[a]},destroy:function(a){var b=this.__value[a];return delete this.__value[a],this.__forceUpdate(),b},"delete":function(a){return console.warn("Method deprecated! Please use .destroy(key) method"),this.remove(a)},add:function(a,b){return this.__value[a]=b,this.__forceUpdate(),b}};b.exports=c},{}]},{},[2]),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*(2*Math.PI)/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=e*(.3*1.5)),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return b<1?-.5*(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g))+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),(b/=e/2)<1?d/2*(b*b*(((f*=1.525)+1)*b-f))+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*(7.5625*b*b)+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return b<e/2?.5*jQuery.easing.easeInBounce(a,2*b,0,d,e)+c:.5*jQuery.easing.easeOutBounce(a,2*b-e,0,d,e)+.5*d+c}}),function(){var a=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var g in c)f[g]="function"==typeof c[g]&&"function"==typeof e[g]&&b.test(c[g])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);return this._super=c,d}}(g,c[g]):c[g];return d.prototype=f,d.prototype.constructor=d,d.extend=arguments.callee,d},Class.addSingleton=function(a){a.getInstance=function(b){return a._instance||(a._instance=new a(b))}},this.Iface=function(a){this.methods=a},this.Iface.extractPublicMethodsFrom=function(a){var b=[];for(var c in a.prototype){var d=a.prototype[c];"constructor"!=c&&"init"!=c&&"function"==typeof d&&"_"!=c.charAt(0)&&b.push(c)}return b},Iface._implementations={},Iface.defineImplementation=function(a,b){b in Iface._implementations||(Iface._implementations[b]=[]),Iface._implementations[b].push(a)}}(),Namespace=function(){var a,b,c,d=arguments,e=null;for(a=0;a<d.length;a+=1)for(c=d[a].split("."),e=window,b=0;b<c.length;b+=1)e[c[b]]=e[c[b]]||{},e=e[c[b]];return e},Object.size=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},String.prototype.escape=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},$.fn.serializeObject=function(){var a={},b=this.serializeArray();return $.each(b,function(){a[this.name]?(a[this.name].push||(a[this.name]=[a[this.name]]),a[this.name].push(this.value||"")):a[this.name]=this.value||""}),a},Object.values=function(a){var b=[];return jQuery.each(Object.keys(a),function(c,d){b.push(a[d])}),b},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Namespace("Imgur"),Namespace("ImgurIface"),Imgur=Class.extend({INVOKED_BY_COOKIE_LIFE:1200,INVOKED_BY_COOKIE:"auth_invoked_by",INVOKED_BY_PARAM:"invokedBy",init:function(a){return this._=$.extend(!0,{hash:null,url:location.pathname,protocol:window.location.protocol,host:window.location.host,isDropDownOpen:!1,cdnUrl:null,signed:!1,socket:null,likeDay:!1,followDay:!1,emitter:Imgur.Emitter.getInstance(),linkCodes:["imageLink","directishLink","htmlImage","bbcode","linkedBbcode","markdown"],imageSizes:{original:{width:null,suffix:""},retinaThumb:{width:1456,suffix:"r"},hugeThumb:{width:1024,suffix:"h"},giantThumb:{width:728,suffix:"g"},largeThumb:{width:640,suffix:"l"},mediumThumb:{width:320,suffix:"m"},smallThumb:{width:160,suffix:"t"},bigSquare:{width:160,suffix:"b"},smallSquare:{width:90,suffix:"s"}},messages:{error:"There was an error. Please try again.",titledesc:"Title and/or description has been updated",readonly:"Imgur is in read-only mode. Please try again later.",upvoted:'<div class="favorited upvoted_msg"></div>',downvoted:'<div class="favorited downvoted_msg"></div>'},el:{topbar:$("#topbar"),imageLinks:".image-link",youtubeLinks:".youtube-link",allImageLinks:$(".image-link, .imgur-image"),search:{searchContainer:$(".search-container"),searchForm:$(".search-container .search-form"),searchBar:$(".search-container .search"),searchIcon:$(".search-container .search-icon-container")},dropdown:{signin:$("#topbar .signin-link"),register:$("#topbar #register"),upload:$("#topbar .creation-dropdown"),mainMenu:$("#topbar .menu-btn")}},pageDepth:0},a),this._},setEmitter:function(a){this._.emitter=a},generalInit:function(){var a=this;$(document).ajaxError(function(b,c,d){d.url!==a._.protocol+"//"+a._.host+"/upload"&&d.displayGenericError!==!1&&(500==c.status||503==c.status?humanMsg.displayMsg(a._.messages.error,"error-msg"):501==c.status&&humanMsg.displayMsg(a._.messages.readonly,"error-msg"))}),$.ajaxSetup({cache:!0}),$.browser.msie&&parseInt($.browser.version)<9&&$.ajaxSetup({cache:!1}),this.showBetaBar(),this.initHeaderActions(),this.runPlaceholder();try{$(".title").tipsy({html:!0,gravity:"s",opacity:.95}),$(".title-nw").tipsy({html:!0,gravity:"nw",opacity:.95}),$(".title-n").tipsy({html:!0,gravity:"n",opacity:.95}),$(".title-w").tipsy({html:!0,gravity:"w",opacity:.95}),$(".title-e").tipsy({html:!0,gravity:"e",opacity:.95}),$("body").on("click",this._.el.imageLinks,function(a){a.preventDefault(),$.colorbox({href:this.href,initialHeight:240,initialWidth:320,maxWidth:"95%",maxHeight:"95%",className:"noHeader",scalePhotos:!0,photo:!0,fixed:!0,scrolling:!1,transition:"elastic",onOpen:function(){$(".tipsy").remove()},onComplete:function(){$(".tipsy").remove()}})}.bind(this)),$("body").on("click",this._.el.youtubeLinks,function(a){"object"!=typeof a||1!==a.which||a.ctrlKey||(a.preventDefault(),$.colorbox({href:Imgur.Util.getYoutubeEmbedLink(a.target.href),transition:"none",width:"600px",height:"400px",iframe:!0,fixed:!0,scrolling:!1}))}.bind(this)),this._.el.allImageLinks.tipsy({delayIn:200,gravity:$.fn.tipsy.autoNS,title:this.imageLinkTipsy,html:!0,opacity:1,offset:2,live:!0})}catch(b){}$("body").on("click",".imgur-image",function(b){b.ctrlKey||b.metaKey||b.altKey||b.shiftKey||(b.preventDefault(),$(this).colorbox({initialHeight:240,initialWidth:320,maxWidth:"95%",maxHeight:"95%",className:"noHeader",scalePhotos:!0,photo:!0,fixed:!0,scrolling:!1,transition:"elastic",onOpen:function(){$(".tipsy").remove()},onComplete:function(){$(".tipsy").remove();var b=$(this).attr("data-hash"),c=$(this).attr("href");$.getJSON("/ajax/favorited/"+b,_.bind(a.appendFavoriteBar,a,b,c))},onClosed:function(){a.removeFavoriteBar()}}))}),$("#create-dropdown-button").on("click",function(a){a.preventDefault(),a.stopPropagation(),$("#createDropdown").addClass("create-dropdown-opened")}.bind(this)),this._.emitter.on("closed dropdown menu",this,function(a){$(a.target).get(0)!==$("#create-dropdown-button").get(0)&&$("#createDropdown").removeClass("create-dropdown-opened")}.bind(this)),$(document).on("cbox_open",function(){$("#colorbox").hasClass("blurbox")&&!$("#colorbox").hasClass("blurbox--scroll")&&$("body").addClass("blurbox-active")}),$(document).on("cbox_cleanup",function(){$("#colorbox").hasClass("blurbox")&&!$("#colorbox").hasClass("blurbox--scroll")&&$("body").removeClass("blurbox-active")});var c=Imgur.Util.isRetinaDisplay()?"1":"0";$.cookie("retina",c,{path:"/"});try{window.localStorage&&window.localStorage.setItem("retina",c)}catch(b){}},imageLinkTipsy:function(){$(".tipsy").remove();var a=$(this),b=a.attr("href");if($("#hzImg").length)return"";if(a.closest(".comment").find("> .children > .comment > .caption").text().match(/nsfw/gi)||a.parent().text().match(/nsfw/gi))return"<div>nsfw link</div>";var c=new Image;return c.src=b,c.complete?(c=null,'<img style="max-width:100%; max-height: 300px" src="'+b+'">'):(a.addClass("show-tipsy"),a.hover(function(){a.toggleClass("show-tipsy")}),c.onload=function(c){$.browser.msie?$(".tipsy .tipsy-inner").html('<img style="max-width:100%; max-height: 300px" src="'+b+'">'):a.hasClass("show-tipsy")?a.tipsy("show"):a.tipsy("hide"),a.unbind("mouseenter mouseleave")},c.onerror=function(){$(".tipsy .tipsy-inner").html("<div>Image could not be loaded</div>"),$(".tipsy").css({left:"-=75px"}),a.unbind("mouseenter mouseleave")},c=null,'<img style="width: 25px;" src="//s.imgur.com/images/loaders/ddddd1_121211/48.gif">')},appendFavoriteBar:function(a,b,c){var d=$(_.templates["galleryimage.favoriteBar"]({value:b,favorited:c.data.favorited}));$favoriteImage=d.find(".favorite-image");var e=new Imgur.Favorite({$favButton:$favoriteImage});$favoriteImage.on("click",function(){e.favorite(a,!1,!1,!1)}),d.find(".favorite-image").tipsy({gravity:"e",opacity:1}),d.find("#copy-container").tipsy({gravity:"w",opacity:1}),$("#cboxLoadedContent").after(d),this.bindZeroClipboard()},bindZeroClipboard:function(){var a=new ZeroClipboard.Client;a.glue("copy-clipboard","copy-container"),a.addEventListener("onMouseUp",function(b){$copyContainer=$("#copy-container"),$copyContainer.attr("title","copied"),$copyContainer.tipsy("show"),$copyContainer.attr("original-title","copy"),a.setText($copyContainer.siblings("input").val()),flashElement($("#copy"))})},removeFavoriteBar:function(){$("#favorite-bar").remove()},initHeaderActions:function(a){var b=this;try{!this._.isSubdomain&&null!=this._.dropdownPulseTime&&localStorage&&void 0==localStorage[this._.dropdownPulseTime]&&this._.el.dropdown.mainMenu.addClass("pulse")}catch(c){}this._.el.dropdown.mainMenu.click(function(a){return b.openDropdownMenu(a,b._.el.dropdown.mainMenu)}),this._.el.dropdown.upload.click(function(a){return b.openDropdownMenu(a,b._.el.dropdown.upload)}),this._.el.dropdown.signin.click(function(a){a.preventDefault(),b.signin("regularSignIn",!0)}),this._.el.dropdown.register.click(function(a){a.preventDefault(),b.signin("regularSignIn")}),(this._.el.dropdown.mainMenu.length||this._.el.dropdown.upload.length||this._.el.dropdown.signin.length||this._.el.dropdown.register.length)&&$(document).on("click keyup",function(a){b.closeDropdownMenu(a)})},_showBetaInvite:function(a){Imgur.Environment.beta.inBeta||null!=this._.beta&&(this._.beta.showInvite||a)&&(Imgur.Environment.ctaConfig=$.extend(!0,Imgur.Environment.ctaConfig,this._.beta.ctaInvite))},_showBetaWelcome:function(){Imgur.Environment.beta.inBeta&&(Imgur.Environment.ctaConfig=$.extend(!0,Imgur.Environment.ctaConfig,this._.beta.ctaWelcome))},showBetaBar:function(){this._showBetaInvite(),this._showBetaWelcome()},showAnnouncementBar:function(a,b){if(!$("#so").length&&!$("#an-msg").length){if(b){if($.cookie(b))return}else if($.cookie("an-msg-closed"))return;var c=$('<div id="an-msg" class="global-message"></div>'),d=$('<a href="javascript:;" class="close-message title" title="close this message">&times;</a>');d.click(function(){Imgur.Util.closeMessage($(this),b)}),this._.el.topbar.after(c.html(a).prepend(d))}},closeDropdownMenu:function(a){if(1!=a.which&&2!=a.which&&3!=a.which&&27!=a.which)return!1;var b=a?$(a.target):null;b.parents(".tag-group-selector-container").length||b.closest("#tags-underbar").length||b.closest("#colorbox").length||null!=b&&0!=b.parents(".signin-link").length&&!b.is("a")&&!b.is(".dot")||($(".tipsy").remove(),this._.emitter.trigger("closed dropdown menu",a),$(".opened").removeClass("opened"))},openDropdownMenu:function(a,b){return b.hasClass("opened")?void this.closeDropdownMenu(a):($(".opened").removeClass("opened"),b.addClass("opened"),b.hasClass("pulse")&&this.hidePulse(b),!1)},hidePulse:function(a){try{localStorage[this._.dropdownPulseTime]=!0}catch(b){}a.removeClass("pulse")},runPlaceholder:function(a){var b="input[type=text][title],input[type=password][title],textarea[title]",c=a||$(b);c.each(function(){$(this).showPlaceholder(),$(this).hasClass("placeholder-onkeydown")?($(this).bind("keydown paste",function(){$(this).hidePlaceholder()}),$(this).bind("focus",function(a){$(this).val()==$(this).attr("title")&&$(this).setCursorPosition(0)}),$(this).bind("click",function(){$(this).val()==$(this).attr("title")&&$(this).setCursorPosition(0)})):$(this).bind("focus focusin keydown paste",function(){$(this).hidePlaceholder()}),$(this).bind("blur focusout",function(){$(this).showPlaceholder()}),$("form").submit(function(){$(this).find(b).each(function(a,b){$(b).hidePlaceholder()})})})},hideAds:function(){$(".advertisement embed").css("visibility","hidden")},showAds:function(){$(".advertisement embed").css("visibility","visible")},signin:function(a,b){var c="http"+(Imgur.Environment.isDev?"":"s")+"://"+this._.host+"/"+(b?"signin":"register")+"?redirect="+encodeURIComponent(window.location);return void(window.location=c)},setInvokedBy:function(a){a="object"==typeof a?JSON.stringify(a):a;var b=new Date;b.setSeconds(b.getSeconds()+this.INVOKED_BY_COOKIE_LIFE),$.cookie(this.INVOKED_BY_COOKIE,a,{expires:b,path:"/",domain:"."+Imgur.Environment.host})},getInvokedBy:function(){var a=$.cookie(this.INVOKED_BY_COOKIE);if("string"!=typeof a)return{};var b;try{b=JSON.parse(a)}catch(c){}var d=b||{},e=b?b.invokedBy:a;return e&&(d.invokedRegisterSigninBy=e),d},vote:function(a){a.preventDefault();var b=$(a.currentTarget),c=b.parent().children(".arrow-up"),d=b.parent().children(".arrow-down"),e=b.attr("data"),f=b.attr("type"),g=null,h=0,i=0,j=this._.hash;j&&j.length&&"image"==f&&(e=j),"caption"==f&&(g=Imgur.Caption.getInstance({hash:j}).getCaptionPropertyById(j,e,"points")),null==g&&(g=parseInt($(".points-"+e).first().text().replace(/,/g,""),10),"image"==f&&(h=parseInt($(".points-"+e+"-ups").first().text().replace(/,/g,""),10),i=parseInt($(".points-"+e+"-downs").first().text().replace(/,/g,""),10)));var k=b.hasClass("arrow-down")?"down":"up",l=Imgur.getInstance(),m=c.hasClass("green"),n=d.hasClass("red"),o=l._.signed,p=$('[id="'+e+'"], [id="gallery-nav-'+e+'"]'),q="image"===f?"gallery":"caption"===f?"comment":f;o?(m&&c[0]==b[0]?(k="veto",p.removeClass("green"),b.removeClass("green icon-upvote-fill").addClass("icon-upvote-outline"),g--,h--):n&&d[0]==b[0]?(k="veto",p.removeClass("red"),b.removeClass("red icon-downvote-fill").addClass("icon-downvote-outline"),g++,i--):c[0]==b[0]?(p.removeClass("red").addClass("green"),c.addClass("green icon-upvote-fill").removeClass("icon-upvote-outline"),d.removeClass("red icon-downvote-fill").addClass("icon-downvote-outline"),n?(g+=2,i--,h++):(g++,h++)):(p.removeClass("green").addClass("red"),d.addClass("red icon-downvote-fill").removeClass("icon-downvote-outline"),c.removeClass("green icon-upvote-fill").addClass("icon-upvote-outline"),m?(g-=2,h--,i++):(g--,i++)),$(".points-"+e).text(this.numberFormat(g)),"image"==f&&($(".points-"+e+"-ups").text(this.numberFormat(h)),$(".points-"+e+"-downs").text(this.numberFormat(i))),1==Math.abs(g)?$(".points-text-"+e).html("point"):$(".points-text-"+e).html("points")):l.signin({invokedRegisterSigninBy:"voteAttempt",type:q});var r=this._.sid;r||(r=Imgur.Environment.msid)||(r=Imgur.Caption.getInstance()._.sid,r||(r=$("#sid").val())),$.ajax({url:(this._.baseURL?this._.baseURL:"")+"/action/vote/"+e,type:"POST",data:{vote:k,sid:r,type:f,location:"outside",gallery:Imgur.Gallery.getInstance().getGalleryMetadata()},displayGenericError:!1,success:function(a){a.gallery&&a.gallery.message&&humanMsg.displayMsg(a.gallery.message),Imgur.Environment.signed&&Imgur.Util.jafoLog({event:"vote",meta:_.merge(Imgur.Gallery.getInstance().getGalleryMetadata(),{hash:e,type:q,vote:k,location:"outside"})})}})},getSettings:function(){return{host:this._.host,cdnUrl:this._.cdnUrl,signed:this._.signed,auth:this._.auth}},numberFormat:function(a,b){a=(""+a).split(".");for(var c=[],d=a[0],e=d.length;e>0;e-=3,d=d.substring(0,e))c.unshift(d.substr(-3));return c+(a[1]?"."+a[1]:"")+(b?" "+(1!==Math.abs(a)?b+"s":b):"")},setHash:function(a){this._.hash=a},getPageHash:function(){var a=window.location.hash;return a.substring(1)},getLinkCodes:function(){return this._.linkCodes},getImageSizes:function(){return this._.imageSizes},getExtension:function(a){return/[.]/.exec(a)?/[^.]+$/.exec(a):""},getExtension:function(a){return/[.]/.exec(a)?/[^.]+$/.exec(a):""},setPageHash:function(a){"function"==typeof history.replaceState&&history.replaceState(null,a,"#"+a)},setURL:function(a){"/"!=a.substr(0,1)&&(a="/"+a),this._.url=a},parseUri:function(a){for(var b={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},c=b.parser[b.strictMode?"strict":"loose"].exec(a),d={},e=14;e--;)d[b.key[e]]=c[e]||"";return d[b.q.name]={},d[b.key[12]].replace(b.q.parser,function(a,c,e){c&&(d[b.q.name][c]=e)}),d},setHost:function(a){this._.host=a},buildMap:function(a,b){var c={};for(var d in b){var e=b[d],f=e[a];c[f]=e}return c},previewBeta:function(){$.colorbox({href:"/lightboxes/betapreview",iframe:!0,width:"700px",height:"600px",transition:"none",className:"noHeader",fixed:!1,open:!0})},acceptBeta:function(){window.location="//"+this._.host+"/beta/enable"},getSearchUrl:function(a,b,c){var d="",e=a.sort,f="/search/"+e+"/"+a.window+(b?"/page/"+b:"");return c&&(f+=(Imgur.Environment.signed?"/miss":"/hit")+".json"),a.advSearch&&$.each(a.advSearch,_.bind(function(a,b){""!==d&&(d+="&"),d+=a+"="+b},this)),a.searchQuery&&(d="q="+a.searchQuery+"&"+d),ret={url:f,query:d}}}),Class.addSingleton(Imgur),Namespace("Imgur.Constants"),Imgur.Constants={MIN_TAG_LENGTH:2,MAX_TAG_LENGTH:36,MAX_TAGS_PER_POST:5},Namespace("Imgur.Emitter"),Imgur.Emitter=Class.extend({init:function(){this.callbacks={}},on:function(a,b,c){return"function"!=typeof c&&console.error("Tried to call on() with a non-functional argument",a,b,c),a.constructor===Array?_.each(a,_.bind(function(a){this.on(a,b,c)},this)):(a in this.callbacks||(this.callbacks[a]=[]),void this.callbacks[a].push({f:c,this_arg:b}))},once:function(a,b,c){if("function"!=typeof c&&console.error("Tried to call once() with a non-functional argument",a,b,c),a.constructor===Array)return _.each(a,_.bind(function(a){this.once(a,b,c)},this));a in this.callbacks||(this.callbacks[a]=[]);var d=!1,e=_.bind(function(){if(!d){var a=_.toArray(arguments);c.apply(b,a),d=!0}},this);this.callbacks[a].push({this_arg:b,f:e})},off:function(a,b,c){return a.constructor===Array?_.each(a,_.bind(function(a){this.off(a,b,c)},this)):void(a in this.callbacks&&(c?_.remove(this.callbacks[a],function(a,d){return a.f===c&&a.this_arg==b}):this.callbacks[a]=[]))},trigger:function(a){var b=_.toArray(arguments).slice(1);return a.constructor===Array?_.each(a,_.bind(function(a){this.trigger.apply(this,[a].concat(b))},this)):void(a in this.callbacks&&_.each(this.callbacks[a],function(a){a.f.apply(a.this_arg,b)}))}}),Class.addSingleton(Imgur.Emitter),Namespace("Imgur.Util"),Imgur.Util={hashtagRegex:/(#((?!\d+($|(?:[^a-z0-9_])))[a-z0-9]+(?:_[a-zA-Z0-9]+)*))(?=$|\s|\W)/gi,getAnalyticsCdnUrl:function(){return"//p."+Imgur.Environment.host},waitForFinalEvent:function(){var a={};return function(b,c,d){if(null==d)throw"waitForFinalEvent should be called with a uniqueId!";a[d]&&clearTimeout(a[d]),a[d]=setTimeout(b,c)}}(),newWindow:function(a,b,c){var d=function(){window.open(a,"t","scrollbars=yes,toolbar=0,resizable=1,status=0,width="+b+",height="+c)||(document.location.href=a)};/Firefox/.test(navigator.userAgent)?setTimeout(d,0):d()},firePixel:function(a){var b=document.createElement("img");b.src=a},getBrowserScrollbarWidth:function(){var a,b,c;return a=document.createElement("div"),b=a.style,b.position="absolute",b.width="100px",b.height="100px",b.overflow="scroll",b.top="-9999px",document.body.appendChild(a),c=a.offsetWidth-a.clientWidth,document.body.removeChild(a),c},numberFormat:function(a){a+="";var b=a.split("."),c=b[0];for(x2=b.length>1?"."+b[1]:"",rgx=/(\d+)(\d{3})/;rgx.test(c);)c=c.replace(rgx,"$1,$2");return c+x2},truncatedNumberFormat:function(a){if(void 0==a)return"n/a";if(0==a)return"0";if(a<0)return"-"+Imgur.Util.truncatedNumberFormat(-a);var b=["","k","m","b","t"],c=Math.log(Math.floor(a))/Math.log(10),d=Math.floor(c/3),e=b[d],f=Math.round(a/Math.pow(10,3*d));return String(f)+e},pluralize:function(a,b){return 1==a?b:b+"s"},obfuscateEmail:function(a){return"string"!=typeof a?"":a.replace(/^(.*)@(.*)$/,function(a,b,c){return Imgur.Util.obfuscateString(b)+"@"+Imgur.Util.obfuscateString(c)})},obfuscateString:function(a){return"string"!=typeof a?"":a.length<=5?a.replace(/./g,"*"):a.replace(/^(.{2})(.*)(.{2})$/,function(a,b,c,d){return b+c.replace(/./g,"*")+d})},byteSize:function(a,b){b||(b=2);var c=1024,d=1024*c,e=1024*d,f=1024*e;return a>=0&&a<c?a+" B":a>=c&&a<d?(a/c).toFixed(b)+" KB":a>=d&&a<e?(a/d).toFixed(b)+" MB":a>=e&&a<f?(a/e).toFixed(b)+" GB":a>=f?(a/f).toFixed(b)+" TB":a+" B"},closeMessage:function(a,b){var c=$(a);b=b?b:c.parent().attr("id")+"-closed",$.cookie(b,"true",{path:"/",expires:7,domain:".imgur.com"}),c.parent().fadeOut()},htmlEntity:function(a){if("string"!=typeof a)return"";var b=jQuery("<div/>");return a=a.split("\n"),jQuery.each(a,function(c,d){a[c]=b.text(d).html()}),a.join("\n")},linkify:function(a,b,c,d,e){var f=Imgur.Environment.host,g=Imgur.Util.escapeRegex(f),h={any:null,hash:new RegExp("https?://(?:[\\w-]+\\.)*"+g+"/(?!gallery)(?!contact)(?!random)(?!rules)([A-z0-9]{5}|[A-z0-9]{7})[sbtmlh]?(\\.(?:jpe?g|gif|png))?(\\?.*)?$","i"),imgur:new RegExp("^https?://([\\w-]+\\.)*"+g+"(\\/.*)?","i"),image:/.*\.(jpe?g|gif|png)$/i,permalink:new RegExp("^https?://([\\w-]+\\.)*"+g+"\\/.+\\/comment\\/[0-9]+","i"),albumImage:new RegExp("^https?://([\\w-]+\\.)*"+g+"\\/a\\/.*#.*","i"),youtubeLink:new RegExp("^https?://((?:www\\.)?(youtube\\.com\\/watch\\?v=[A-z0-9-]+|youtu\\.be\\/[A-z0-9-]+))"),youtubeLinkWithTime:new RegExp("^https?://((?:www\\.)?(youtube\\.com/watch\\?v=[A-z0-9-]+|youtu\\.be/[A-z0-9-]+))(\\?|&|&amp;)t=")};h.any=/(https?:\/\/(((\w|\.)+)(\/)?([^.\"!\s]+((\.(jpe?g|gif|png)))?))+[^.,?\"\'\!\:\s])/gi;var i=a.match(h.any),j="";if(i){for(var k=0;k<i.length;k++){var l=i[k],m=l.length,n=a.indexOf(l),o=l[m-1],p="";switch(o){case")":p="(";break;case"]":p="["}if(p){var q=0,r=0,s=0;for(q=0;q<m;q++)l[q]==p?r++:l[q]==o&&s++;s!=r?l=l.substring(0,m-1):o=""}else o="";var t=l,u=!!l.match(h.hash),v=!!l.match(h.imgur),w=!!l.match(h.image),x=!!l.match(h.permalink),y=!!l.match(h.albumImage),z=!!l.match(h.youtubeLink);isYoutubeLinkWithTime=!!l.match(h.youtubeLinkWithTime);var A=!(w||u||x||y);if(u){w=!0,v=!0;var B=l.match(h.hash);if(B.length>=4){var C=B[2]||".jpg",D=B[1];t=Imgur.Environment.cdnUrl+"/"+D+C}}var E;if(z){var F=isYoutubeLinkWithTime?"-no-embed":"",G=isYoutubeLinkWithTime?' target="_blank"':"";E='<a class="youtube-link'+F+'" href="'+t+'"'+G+">"+l+"</a>"+o}else E=u?'<a class="imgur-image" target="_blank" data-hash="'+B[1]+'" href="'+t+'">'+l+"</a>"+o:"<a "+(v||w?"":'rel="noreferrer nofollow" ')+(w?'class="image-link" ':"")+(A?'target="_blank" ':"")+'href="'+t+'">'+l+"</a>"+o;j+=a.substring(0,n),j+=E,a=a.substring(n+m)}j+=a}else j=a;if(b&&(j=j.replace(/(^|[^A-z0-9])(@)(([A-z]|[0-9]){4,})/g,'$1<a href="//'+f+'/user/$3">$2$3</a>')),d){var H="";e&&(H='data-jafo="{@@event@@:@@tagClick@@,@@meta@@:{@@tagName@@:@@$2@@,@@location@@:@@'+e+'@@}}"'),j=j.replace(this.hashtagRegex,"<a "+H+' href="//'+f+'/t/$2">$1</a>')}return c&&(j=j.replace(/(#[0-9]+)/g,'<a class="image-id-link" href="$1">$1</a>')),j},basename:function(a){return a.replace(/\?.*$/g,"").replace(/^.*[\/\\]/g,"")},overlay:function(a,b){var c=b.offset(),d=b.outerHeight(),e=b.outerWidth();a.css({position:"absolute",top:c.top,left:c.left,width:e,height:d,"z-index":b.css("z-index")+1e5})},forceHideColorBox:function(a){a?$("#colorbox, #cboxOverlay").hide():$("#colorbox, #cboxOverlay").fadeOut("fast")},fireImgurEvent:function(a){var b=document.createEvent("Events");b.initEvent(a,!0,!0),window.dispatchEvent(b)},TEMPLATE_ESCAPEES:{$$:"\0","$&":"","$`":"","$'":""},template:function(a,b){var c=Object.keys(b);return jQuery.each(b,function(a,c){b[a]=Imgur.Util._escapeTemplateValue(new String(c))}),jQuery.each(c,function(c,d){var e=new RegExp("{"+Imgur.Util.escapeRegex(d)+"}","g");a=a.replace(e,b[d])}),a=Imgur.Util._unescapeTemplateValue(a)},_escapeTemplateValue:function(a){for(var b in Imgur.Util.TEMPLATE_ESCAPEES)a=a.replace(new RegExp(Imgur.Util.escapeRegex(b),"g"),Imgur.Util.TEMPLATE_ESCAPEES[b]);return a},_unescapeTemplateValue:function(a){for(var b=0;b<a.length;b++){var c=a.charCodeAt(b);for(var d in Imgur.Util.TEMPLATE_ESCAPEES)c===Imgur.Util.TEMPLATE_ESCAPEES[d].charCodeAt(0)&&(a=a.substring(0,b)+d+a.substring(b+1),b+=d.length)}return a},escapeRegex:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},editDistance:function(a,b){if("string"!=typeof a||"string"!=typeof b)return 0;if(!a.length)return b.length;if(!b.length)return a.length;var c,d=[];for(c=0;c<=b.length;c++)d[c]=[c];var e;for(e=0;e<=a.length;e++)d[0][e]=e;for(c=1;c<=b.length;c++)for(e=1;e<=a.length;e++)b.charAt(c-1)==a.charAt(e-1)?d[c][e]=d[c-1][e-1]:d[c][e]=Math.min(d[c-1][e-1]+1,Math.min(d[c][e-1]+1,d[c-1][e]+1));return d[b.length][a.length]},getYoutubeEmbedLink:function(a){var b=a&&"string"==typeof a?a:this.href,c=b.split("&"),d=c[0].match(/\?v\=/)?c[0].substring(b.indexOf("v=")+2):c[0].substring(b.lastIndexOf("/")+1);return"//www.youtube.com/embed/"+d+"?autoplay=1"},truncate:function(a,b,c){return a.length<=b?a:a.substring(0,b)+(c?"...":"")},decorate:function(a,b,c){return Imgur.Util.decorateWithFunction(a,_.map(c,function(a){return{spot:a,cover:b.prototype[a]}}))},decorateDetailed:function(a,b,c){return _.each(c,function(a){a.cover=b.prototype[a.cover]}),Imgur.Util.decorateWithFunction(a,c)},decorateWith:function(a,b,c){return Imgur.Util.decorateWithDetailed(a,b,_.map(c,function(a){return{spot:a,cover:a}}))},decorateWithDetailed:function(a,b,c){var d=Object.getPrototypeOf(b);return _.each(c,function(a){a.cover=_.bind(d[a.cover],b)}),Imgur.Util.decorateWithFunction(a,c)},decorateWithFunction:function(a,b){var c=function(){};c.prototype=Object.create(Object.getPrototypeOf(a)),_.each(b,function(b){var d,e=b.cover,f=b.spot,g=b.args||[];if("pass"===b.type)d=function(){return e.apply(this,g.concat(_.toArray(arguments))),Object.getPrototypeOf(a)[f].apply(a,arguments)};else if("passAfter"===b.type)d=function(){var b=Object.getPrototypeOf(a)[f].apply(a,arguments);return e.apply(this,g.concat(_.toArray(arguments))),b};else{var h=[e,a].concat(g);d=_.partial.apply(_,h)}c.prototype[f]=d});var d=Object.create(c.prototype);return _.each(_.keys(a),function(b){d[b]=a[b]}),d},getGoogleTracker:function(){return"function"!=typeof __ga&&(!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","https://www.google-analytics.com/analytics.js","__ga"),__ga("create","UA-6671908-2","auto")),__ga},googleTrackPageview:function(){function a(a,b){var c,d,e,f,g,h="comScore=",i=document,j=i.cookie,k="",l="indexOf",m="substring",n="length",o=2048,p="&ns_",q="&",r=window,s=r.encodeURIComponent||escape;if(j[l](h)+1)for(f=0,e=j.split(";"),g=e[n];f<g;f++)d=e[f][l](h),d+1&&(k=q+unescape(e[f][m](d+h[n])));a+=p+"_t="+ +new Date+p+"c="+(i.characterSet||i.defaultCharset||"")+"&c8="+s(i.title)+k+"&c7="+s(i.URL)+"&c9="+s(i.referrer),a[n]>o&&a[l](q)>0&&(c=a[m](0,o-8).lastIndexOf(q),a=(a[m](0,c)+p+"cut="+s(a[m](c+1)))[m](0,o)),i.images?(d=new Image,r.ns_p||(ns_p=d),"function"==typeof b&&(d.onload=d.onerror=b),d.src=a):i.write("<","p","><",'img src="',a,'" height="1" width="1" alt="*"',"><","/p",">")}this.getGoogleTracker(),__ga("send","pageview"),$('<img src="//pixel.quantserve.com/pixel/p-f8oruOqDFlMeI.gif" border="0" height="1" width="1" alt="Quantcast"/>');var b=b||[];b.push({c1:"2",c2:"7770950",c3:"8",c4:"http%3A%2F%2Fimgur.com%2F"}),b.push({c1:"8",c2:"7770950",c3:"8",c4:"http%3A%2F%2Fimgur.com%2F"}),"undefined"==typeof b&&(b=[]),function(){var c,d="length",e=self,f=e.encodeURIComponent?encodeURIComponent:escape,g=".scorecardresearch.com",h="//app"+g+"/s2e/invite",i=Math,j="script",k="width",l=/c2=(\d*)&/,m=function(b){if(b){var c,e,h,i,j=[],k=0,l="";for(var m in b)e=typeof b[m],"string"!=e&&"number"!=e||(j[j[d]]=m+"="+f(b[m]),"c2"==m?l=b[m]:"c1"==m&&(k=1));if(j[d]<=0||""==l)return;if(i=b.options||{},i.d=i.d||document,"string"==typeof i.url_append){h=i.url_append.replace(/&amp;/,"&").split("&");for(var n,m=0,p=h[d];m<p;m++)n=h[m].split("="),2==n[d]&&(j[j[d]]=n[0]+"="+f(n[1]))}c=["http","s"==i.d.URL.charAt(4)?"s://sb":"://b",g,"/b?",k?"":"c1=2&",j.join("&").replace(/&$/,"")],a(c.join(""),function(){o(this,i)})}},n=function(a){a=a||b;for(var c=0,e=a[d];c<e;c++)m(a[c]);a=b=[]},o=function(a,b){if(!(a.src.indexOf("c1=2")<0)&&b.d.createElement&&(b.force_script_extension||2==a[k]&&a.height>i.round(100*i.random()))){var c=b.d.createElement(j),d=b.d.getElementsByTagName(j)[0],e=[b.script_extension_url||h,"?","c2=",a.src.match(l)[1]].join("");d&&(c.src=e,c.async=!0,d.parentNode.insertBefore(c,d))}};n(),(c=e.COMSCORE)?(c.purge=n,c.beacon=m):COMSCORE={purge:n,beacon:m}}()},getQueryParams:function(a){var b={};if(a.length>1)for(var c,d=0,e=a.substr(1).split("&");d<e.length;d++)c=e[d].split("="),b[decodeURIComponent(c[0])]=c.length>1?decodeURIComponent(c[1]):"";return b},createQueryUrl:function(a,b){var c,d=a.split("?"),e=d[1]?this.getQueryParams("?"+d[1]):{},f=d[0];return _.isArray(b)?(c=$.param(e),c.length&&(c+="&"),c+=b.join("&")):c=$.param(_.merge(e,b)),c&&(f+="?"+c),f},isSubdomain:function(a){return location.host!=a},registerInterestingEvents:function(a,b,c){if(c.type.prototype.getInterestingEvents().length)for(var d=c.type.prototype.getInterestingEvents(),e=0,f=d[e];e<d.length;e++,f=d[e])a.on(f,null,b)},triggerView:function(a,b){if(a){var c,d=!!b.discard,e=a[a.length-1];if(b.image||!b.album?c="image":!b.album&&b.image||(c="album"),7===a.length||5===a.length||a.length%2==0&&("h"==e||"l"==e)){var f;f=d?window.location.href.replace(/#.*/,"").replace(/\?.*/,""):document.referrer;var g="//p."+Imgur.Environment.host+"/"+c+"view.gif?a="+a+"&r="+encodeURIComponent(f),h=document.createElement("img");h.src=g}}},dive:function(a,b){var c=(""+b).replace(/^\./,"").split("."),d=c.length>0?c.shift():null;if(d&&a&&"undefined"!=typeof a[d])return 0===c.length?a[d]:Imgur.Util.dive(a[d],c.join("."))},PERFORMANCE_CHECKPOINT_USER_AGENT:"Ticktock performance monitor <ops@imgur.com>",triggerPerformanceCheckpoint:function(a){if(window.navigator.userAgent===Imgur.Util.PERFORMANCE_CHECKPOINT_USER_AGENT){var b=document.createElement("img");b.src="//s."+Imgur.Environment.host+"/images/blank.gif?ticktock="+a}},checkInIframe:function(){try{return window.self!==window.top}catch(a){return!0}},isRetinaDisplay:function(){if(window.matchMedia){var a=window.matchMedia("only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)");return a&&a.matches||window.devicePixelRatio>1}return!1},referrerIsImgur:function(){if(!document.referrer)return!1;var a=document.createElement("a");return a.href=document.referrer,a.host==Imgur.Environment.host}},Namespace("Imgur.Storage"),Imgur.Storage=Class.extend({get:function(){},exists:function(){},save:function(a){}}),Namespace("Imgur.Storage.Cookie"),Imgur.Storage.Cookie=Imgur.Storage.extend({init:function(a,b){this._={cookieName:a,cookieLife:b?b/86400:604800}},exists:function(){return null!==$.cookie(this._.cookieName)},save:function(a){$.cookie(this._.cookieName,Imgur.Util.Base64.encode(JSON.stringify(a)),{expires:this._.cookieLife,path:"/"})},get:function(a){try{return JSON.parse(Imgur.Util.Base64.decode($.cookie(this._.cookieName)))}catch(b){return null!=a?a:null}}}),Namespace("Imgur.LocalStorage"),Imgur.LocalStorage={supported:function(){try{if(!window.localStorage)return!1;var a="__canary__",b="1";if(localStorage.setItem(a,b),localStorage.getItem(a)===b)return localStorage.removeItem(a),!0}catch(c){return!1}},exists:function(a){return this.supported()&&("undefined"==typeof a||"string"==typeof localStorage.getItem(a))},save:function(a,b,c){if(!this.supported())return console.warn("Could not save",a,"to local storage because local storage not supported"),!1;if(this.purgeExpired(),"undefined"==typeof b||null===b)localStorage.removeItem(a);else{if("object"!=typeof b&&(b={_value:b}),c&&(b._expires=new Date(c),b._expires<new Date))return!1;localStorage.setItem(a,JSON.stringify(b))}return!0},get:function(a,b){var c,d=new Date;if(!this.supported())return console.warn("Could not get ",a,"from local storage because local storage not supported"),b;try{c=JSON.parse(localStorage.getItem(a))}catch(e){return b}return c&&"undefined"!=typeof c._expires&&d>new Date(c._expires)?void 0:c&&"undefined"!=typeof c._value?c._value:c?c:void 0},purgeExpired:function(){for(var a,b,c=new Date,d=0;d<localStorage.length;d++){a=localStorage.key(d);try{b=JSON.parse(localStorage.getItem(a))}catch(e){continue}"object"==typeof b&&null!==b&&b._expires&&c>new Date(b._expires)&&localStorage.removeItem(a)}}},Namespace("Imgur.Experiments"),Imgur.Experiments={initialSession:!1,activeExperiments:[],sessionNumber:null,config:null,isActive:function(a){return this.activeExperiments.indexOf(a)!==-1||this.activeExperiments.indexOf("exp"+a)!==-1},startExperiments:function(a){this.config=a;var b;for(var c in a)if(a.hasOwnProperty(c)&&a[c].active===!0&&(b=this.getUserBucket(c))){var d=b.included,e=!1;if(b&&d===!0){var f=this[c];"function"==typeof f&&(e=f.call(this,b.variation))}e!==!1&&(this.activeExperiments.push(c),Imgur.Util.registerExperiment(c,b.variation),Imgur.Util.jafoLog({event:"internalExperimentLoaded",meta:{expID:c,variation:b.variation}}))}},getUserBucket:function(a){var b;if(Imgur.LocalStorage.supported())return b=Imgur.LocalStorage.get("bucketParams-"+a),b||(b=this.setUserBucket(a)),"undefined"!=typeof b?b:void 0},setUserBucket:function(a){var b,c=this.config[a];if(!c)return!1;var d=Math.random(),e={included:!1,variation:"control"},f=d<=c.inclusionProbability;if(f===!0){e.included=!0,b=Math.random();for(var g=0;g<c.variations.length;g++){if(b<=c.variations[g].inclusionProbability){e.variation=c.variations[g].name;break}b-=c.variations[g].inclusionProbability}}return Imgur.LocalStorage.save("bucketParams-"+a,e,c.expirationDate),e},expT4377:function(a){if("lift-igniter-no-pp"==a||"control-no-pp"==a){!function(a,b,c,d,e,f,g){a.$igniter_var=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d+"?ts="+(+new Date/36e5|0),g.parentNode.insertBefore(f,g)}(window,document,"script","//cdn.petametrics.com/kdem4a3gdar4oq52.js","$p");var b={config:{globalTracking:!0,inventory:{version:1,collect:"lift-igniter-no-pp"==a},sdk:{multiFetch:!0,pushStateReset:!0}}};$p("init","kdem4a3gdar4oq52",b),$p("send","pageview")}"cxense-no-pp"==a&&(window.cX=window.cX||{},window.cX.callQueue=window.cX.callQueue||[],window.cX.callQueue.push(["setSiteId","1141841818742508432"]),window.cX.callQueue.push(["sendPageViewEvent"]),function(a,b,c,d){c=a.createElement(b),c.type="text/java"+b,c.async="async",c.src="http"+("https:"===location.protocol?"s://s":"://")+"cdn.cxense.com/cx.js",d=a.getElementsByTagName(b)[0],d.parentNode.insertBefore(c,d)}(document,"script"));var c=_widgetFactory._.config.gallery;if(!c)return!1;var d="hot"===c.section&&"day"===c.window&&"viral"===c.sort;d=d||null===c.section;var e=window.location.toString();return!(e.indexOf("/gallery/")>-1)&&!!d}},Imgur.ReactInfiniteScroll={getDefaultProps:function(){return{infiniteScrollStartingPage:0}},getInitialState:function(){return{infiniteScrollLoading:!1,infiniteScrollLastPage:this.props.infiniteScrollStartingPage-1,infiniteScrollEnabled:!0}},componentDidMount:function(){this.infiniteScrollNeedToLoadFirstPage()&&this._load(this.props.infiniteScrollStartingPage);var a;a=this.refs["infinite-scroll-container"]?$(this.refs["infinite-scroll-container"]):$(window),a.on("scroll scrollend",_.throttle(this._checkScroll,200))},componentDidUpdate:function(a,b){if(b.infiniteScrollLoading!=this.state.infiniteScrollLoading){var c=window.ReactDOM||window.React;this.state.infiniteScrollLoading?$(c.findDOMNode(this).parentNode).removeClass("infinite-scroll-loaded"):$(c.findDOMNode(this).parentNode).addClass("infinite-scroll-loaded")}},_checkScroll:function(){if(this.state.infiniteScrollEnabled&&!this.state.infiniteScrollLoading){var a=this.refs["infinite-scroll"];a&&$(a).is(":in-viewport")&&this._load(this.state.infiniteScrollLastPage+1)}},_load:function(a){this.setState({infiniteScrollLoading:!0,infiniteScrollLastPage:Math.max(a,this.state.infiniteScrollLastPage)}),this.infiniteScrollLoad(a,_.bind(function(b,c){void 0!==b&&this._store(a,b),c&&this.setState({infiniteScrollEnabled:!1}),this.setState({infiniteScrollLoading:!1},_.bind(function(){c||this._checkScroll()},this))},this))},_store:function(a,b){var c={};c["infinite-scroll-"+a]=b,this.setState(c)},infiniteScrollCountPages:function(){for(var a=0;;a++)if(!this.state["infinite-scroll-"+a])return a},infiniteScrollHavePage:function(a){return"infinite-scroll-"+a in this.state},infiniteScrollGetPage:function(a){return this.state["infinite-scroll-"+a]},infiniteScrollStart:function(){this.setState({infiniteScrollEnabled:!0})}};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};Namespace("Imgur.Factory"),Imgur.Factory.Widget=Class.extend({init:function(a){this._={},this._.env=a,this._.config={},this._.incus=null},mergeConfig:function(a,b){a in this._.config||(this._.config[a]={}),this._.config[a]=_.merge(this._.config[a],b||{})},_getConfig:function(a,b,c){if(b.indexOf(".")==-1)return a[b];var d=b.indexOf("."),e=b.substr(0,d),f=b.substr(d+1);return this._getConfig(a[e]||{},f)||c},getConfig:function(a,b){var c;if(a.indexOf(".")!=-1){var d=a.indexOf("."),e=a.substr(0,d),f=a.substr(d+1);c=this._.config[e]||{},a=f}else c=this._.config||{};return this._getConfig(c,a,b)},_getPostAuthorized:function(){var a=this._.env.msid;return function(b,c,d,e){return d=d||_.noop,e=e||_.noop,c=_.merge(c,{msid:a,sid:a,modhash:a}),$.post(b,c,d).fail(e)}},produceInsideGalleryFactory:function(){var a=_.merge(this._.env,this.getConfig("gallery"));return a.cdnURL=a.cdnUrl,new Imgur.Factory.InsideGallery(this,a,this.getConfig("groups"),_.bind(this._getPostAuthorized,this))},produceOutsideGalleryFactory:function(){var a=_.merge(this._.env,this.getConfig("gallery"));return a.cdnURL=a.cdnUrl,new Imgur.Factory.OutsideGallery(this._.env,a,this.getConfig("groups"),_.bind(this._getPostAuthorized,this))},produceLocationCommand:function(a){var b=new Imgur.Element.CommandLocation;a.on("command.location",b,b.handleCommand),a.on("command.refresh",b,b.handleRefreshCommand)},produceAccountBioEditor:function(){var a=$("#account-bio.access"),b=$("#account-bio-edit"),c=new Imgur.User.Bio(a,b);a.click(_.bind(c.editAccountBio,c)),b.blur(_.bind(c.saveAccountBio,c))},produceSearch:function(){var a=this.getConfig("search");if(0!=$("#global-search-container").length&&a){var b=this.getConfig("gallery"),c=a.type,d=new Imgur.Emitter,e=this._getAjaxGet(),f="//"+this._.env.host+"/search/suggest",g=new Imgur.Search.Store.Suggestions(d,a.q),h=new Imgur.Search.SuggestModel(e,g,f),i=Imgur.Search.TopBarView.getDefaultProps().SUGGESTION_TYPES,j=[i.TAG,i.MEME,i.USER,i.SEARCH,i.ECHO],k=new Imgur.Search.SuggestionFactory(this._.env.host),l=new Imgur.Search.Results(d,g,j,k);Imgur.Dev.DebugVar("searchresults",l);var m="advanced"===c?new Imgur.Search.Structured($("#search_advanced")):null,n=new Imgur.Search.Controller.Advanced(m),o="advanced"===c?b.sort:"relevance",p="advanced"===c?b.window:"all",q={sort:o,window:p,suggestionStore:g,searchResults:l,searchSuggestModel:h,host:this._.env.host,defaultSuggestOpened:"advanced"===c&&m.getIsHidden(),structured:m};Imgur.Dev.DebugVar("storesugg",g);var r=function(){var a=window.ReactDOM||window.React,b=a.render(React.createElement(Imgur.Search.TopBarView,q),$("#global-search-container").get(0));n.setTopBarComponent(b)};r(),d.on("new suggestions",null,r),d.on("new global search query",null,r),d.on("new active suggestion",null,r);var s=new Imgur.Search.HotkeyController($("#global-search-container"));if($(document).on("keyup",_.bind(s.handleKeyUp,s)),"advanced"===c){var t=$("#search_adv_toggle");m.get$AllOf().on("keyup",_.bind(n.handleKeyUpStructured,n)),t.on("click",_.bind(n.handleToggleAdvancedClick,n));var u=g.getQuery(),v=m.getFlatQuery();u?m.setFlatQuery(u):g.setQuery(v)}Imgur.Util.triggerPerformanceCheckpoint("search")}},initIdleMonitor:function(){var a=function(a,b){Imgur.Util.jafoLog({event:"resumedBrowsing",meta:{inactive:b-a}})},b=new Incus.Presence(300);b.on("return",a)},_getAjaxGet:function(){return function(a,b,c,d){return d=d||_.noop,c=c||_.noop,$.get(a,b,c).fail(d)}},produceLinkify:function(a){var b=new Imgur.Linkifier;return b.addGrabber(new Imgur.Linkify.ImgurGrabber(Imgur.Environment.host,Imgur.Environment.cdnUrl)),b.addGrabber(new Imgur.Linkify.PlainGrabber),b.addGrabber(new Imgur.Linkify.UsernameGrabber),b.addGrabber(new Imgur.Linkify.HashtagGrabber),b.addGrabber(new Imgur.Linkify.OpGrabber(a)),b.addViewer("youtube",new Imgur.Linkify.YoutubeViewer),b.addViewer("html5video",new Imgur.Linkify.Html5VideoViewer),b.addViewer("gifv",new Imgur.Linkify.ImgurGifvViewer(new Imgur.Linkify.Html5VideoViewer)),b.addViewer("imgur",new Imgur.Linkify.ImgurViewer),b.addViewer("image",new Imgur.Linkify.ImageViewer),b},produceCtaBanner:function(a){var b,c,d=this.getConfig("global"),e=document.referrer,f=window.location.pathname;if(d.ctaConfig){try{if(c=this.ctaOnPromoted(),!c&&$(".cta-content.pp-banner:visible").length>0&&ReactDOM.unmountComponentAtNode(document.getElementById("cta-container-placeholder")),c?b=this.getFirstActiveCtaProps(d,"promoted",f):Imgur.Environment.ctaConfig.betainvite?b=this.getFirstActiveCtaProps(Imgur.Environment,"betainvite",f):e.match(/^https?:\/\/([^\/]+\.)?twitch\.tv(\/|$)/i)||e.match(/^https?:\/\/([^\/]+\.)?reddit\.com\/r\/(gaming|games|dota2|globaloffensive|pcmasterrace|wow|ffxiv|smashbros|pathofexile|minecraft|dayz|leagueoflegends|starcraft|callofduty|battlefield)/i)?b=this.getFirstActiveCtaProps(d,"gaming",f):e.match(/^https?:\/\/([^\/]+\.)?facebook\.com(\/|$)/i)||d.likeDay?b=this.getFirstActiveCtaProps(d,"facebook",f):e.match(/^https?:\/\/([^\/]+\.)?(twitter\.com|t\.co)(\/|$)/i)||d.followDay?b=this.getFirstActiveCtaProps(d,"twitter",f):e.match(/^https?:\/\/([^\/]+\.)?pinterest\.com(\/|$)/i)?b=this.getFirstActiveCtaProps(d,"pinterest",f):d.ctaConfig.global&&(b=this.getFirstActiveCtaProps(d,"global",f)),b=d.ctaConfig.converted?this.getFirstActiveCtaProps(d,"converted",f):b,this.isSkipCta(b,f)&&(b=this.getFirstActiveCtaProps(d,d.signed?"user":"anonymous",f)),this.leaderboardBeatsCta(b))return;if(this.hideCta(d,b)||this.isFrontPageOnly(b,f))return void ReactDOM.unmountComponentAtNode(document.getElementById("cta-container-placeholder"))}catch(g){return}!d.signed&&a&&"/"==b.url&&(b.url=a);var h;switch(b.type){case"button":h=React.createElement(Imgur.Banner.Cta,b);break;case"nobutton":h=React.createElement(Imgur.Banner.CtaNoButton,b);break;case"custom":h=React.createElement(Imgur.Banner[b.jsReactClassName],b)}h&&(ReactDOM.render(h,document.getElementById("cta-container-placeholder")),this.logCtaRender(b.trackingName))}},logCtaRender:_.once(function(a){Imgur.Util.jafoLog({event:"bannerAppear",meta:{banner:a,bannerType:"headerCTA",location:"aboveTopNavBar",platform:"web"}}),"mobileApps"===a&&Imgur.Util.jafoLog({event:"appBannerAppear",meta:{banner:a,bannerType:"bannerCTA",location:"aboveTopNavBar",platform:"web"}})}),produceCtaLightbox:function(a){var b,c=this.getConfig("global"),d=(document.referrer,window.location.pathname);if(c.ctaConfig&&window.localStorage){try{if(c.ctaConfig["global-lightbox"]&&(b=this.getFirstActiveCtaProps(c,"global-lightbox",d)),this.isSkipCta(b,d)||this.hideCta(c,b)||this.isFrontPageOnly(b,d))return void ReactDOM.unmountComponentAtNode(document.getElementById("cta-lightbox-placeholder"))}catch(e){return}!c.signed&&a&&"/"==b.url&&(b.url=a);var f;switch(b.type){case"custom":f=React.createElement(Imgur.Lightbox[b.jsReactClassName],b)}if(f){var g=document.getElementById("cta-lightbox-placeholder");g.style.display="block",ReactDOM.render(f,g),this.logCtaLightboxRender(b.trackingName)}}},logCtaLightboxRender:_.once(function(a){Imgur.Util.jafoLog({event:"bannerAppear",meta:{banner:a,bannerType:"lightbox",platform:"web"}}),"mobileApps"===a&&Imgur.Util.jafoLog({event:"appBannerAppear",meta:{banner:a,bannerType:"lightbox",platform:"web"}})}),getFirstActiveCtaProps:function(a,b,c){for(var d=a.ctaConfig[b],e=0;e<d.length;e++){var f=d[e];if(!this.isSkipCta(f,c))return f}return null},isSkipCta:function(a,b){return!a||!a.active||this.hasSeenCta(a)||this.showOnHashOnly(a)||this.isFrontPageOnly(a,b)},leaderboardBeatsCta:function(a){var b=this.getConfig("gallery");return("object"!==_typeof(Imgur.Environment.auth)||!Imgur.Environment.auth.id)&&("object"===("undefined"==typeof b?"undefined":_typeof(b))&&("object"===_typeof(b.image)&&((!a||!a.insidePageOK)&&!this.ctaOnPromoted())))},isFrontPageOnly:function(a,b){return!a.insidePageOK&&("/"!=b&&0!=b.indexOf("/new/")&&0!=b.indexOf("/hot/"))},showOnHashOnly:function(a){return a.pageHash&&(!Imgur.InsideNav||Imgur.InsideNav&&Imgur.InsideNav.getInstance().getHash()!=a.pageHash)},ctaOnPromoted:function(){try{return Imgur.InsideNav&&Imgur.InsideNav.getInstance().getImage().isAd}catch(a){return Imgur.Environment.image&&Imgur.Environment.image.isAd}},hideCta:function(a,b){return!!a.isSubdomain||(!b.active||(!!Imgur.Environment.auth.is_spammer||(!(!b.targetAdblock||window.usesABP)||(!(!b.targetNoApp||!Imgur.Environment.auth.hasApp)||this.hasSeenCta(b)))))},hasSeenCta:function(a){return a.localStorageName&&localStorage&&void 0!=localStorage.getItem(a.localStorageName)},startExperiments:function(){Imgur.Experiments.startExperiments(Imgur.Environment.experiments)},produceJafo:function(){var a=this.getConfig("analytics"),b=new Imgur.Jafo(Imgur.Environment.auth.id,a.logPixel);b.bindDataAttr(),Imgur.Util.jafoLog=_.bind(b.logAction,b),Imgur.Util.jafoLog.direct=_.bind(b.directFire,b),Imgur.Util.registerExperiment=_.bind(b.registerExperiment,b),Imgur.Util.registerExperimentData=_.bind(b.registerExperimentData,b),Imgur.Dev.DebugVar("jafo",b)},produceGifgen:function(a,b,c){var d=React.createClass({displayName:"div",render:function(){return React.DOM.div()}}),e=React.createElement(ReactRouter.Route,{handler:Imgur.Gifgen,path:"/vidgif",src:c},React.createElement(ReactRouter.Route,{name:"video-specific",handler:Imgur.Gifgen.Video,path:"/vidgif/video/between/:start/:duration"}),React.createElement(ReactRouter.Route,{name:"video-general",handler:Imgur.Gifgen.Video,path:"/vidgif/video",params:{start:void 0,stop:void 0}}),React.createElement(ReactRouter.Route,{name:"upload",handler:Imgur.Gifgen.Upload,path:"/vidgif/ticket/:ticket"}),React.createElement(ReactRouter.DefaultRoute,{name:"query",handler:d}));ReactRouter.run(e,ReactRouter.HistoryLocation,function(b,c){var d=window.ReactDOM||window.React;d.render(React.createElement(b,c),a.get(0))})},_incusInstance:function(){if(Imgur.Environment.auth&&"undefined"!=typeof Imgur.Environment.auth.incus_id){if(!this._.incus){var a=Imgur.Environment.auth.incus_id;this._.incus=new Incus.Client(window.location.protocol+"//rt."+Imgur.Environment.host,a,window.location.pathname)}return this._.incus}},initNotifications:function(a,b){var c=this._incusInstance();if(c){this._initHBaseNotifications(a,b,c);var d=new Incus.Presence;new Incus.Presence.IncusNotifier(d,c)}},bindIncusGallery:function(a){var b=this._incusInstance(),c=this.getConfig("gallery");if(b&&c&&c.baseURL){var d=c.baseURL;a.on("select",null,function(a){b.setPage(d+"/"+a.hash)})}var e=new Imgur.PointsUpdater.Image("image",a);b.on("imagePoints",_.bind(e.handleUpdate,e));var f=new Imgur.PointsUpdater.Comment("comment",a);b.on("commentPoints",_.bind(f.handleUpdate,f)),a.on("select",f,f.kill),a.on("select",f,e.kill)},bindIncusMessages:function(a){this._.messageDropdown.setState({oldMessages:a})},_initHBaseNotifications:function(a,b,c){var d=$("#topbar .notification-events"),e=$("#topbar .notification-conversations");d.removeClass("nodisplay"),e.removeClass("nodisplay");var f={socket:c,reputation:new Imgur.Reputation(b)},g={unreadCount:Number(Imgur.Environment.auth.notifications_messages),socket:c},h=window.ReactDOM||window.React;h.render(React.createElement(Imgur.Notification.EventDropdown,f),d.get(0)),this._.messageDropdown=h.render(React.createElement(Imgur.Notification.MessageDropdown,g),e.get(0));var i=Imgur.Util.getQueryParams(window.location.search);if(!_.isUndefined(i.nid)){$.ajax({url:"/account/notifications/mark",method:"POST",data:_.merge({},i,{mark_type:"read","notifications[0][foreign_id]":i.nid,"notifications[0][foreign_type]":i.ntype,"notifications[0][snapshot]":i.nsnap,msid:Imgur.Environment.msid})});var j=[i.ntype,i.nid].join(":");if(Imgur.Util.jafoLog({event:"notificationRead",meta:{notifNum:i.nnum,notificationId:j,notificationTrigger:i.ntype}}),window.history&&window.history.replaceState){var k="";k="lr"in i?window.location.href.replace(window.location.search,"?lr="+parseInt(i.lr)):window.location.href.replace(window.location.search,""),window.history.replaceState(null,document.title,k)}}},produceFavorite:function(a){var b=new Imgur.Favorite(a);return b._init(),this._.favKeyBound||($(document).keydown(_.bind(b.handleKey,b)),this._.favKeyBound=!0),b},produceApocalypseCta:function(a,b){ReactDOM.render(React.createElement(Imgur.Elements.ApocalypseCta,{zombieScore:a,humanScore:b}),document.getElementById("apocalypse-cta"))}}),Namespace("Imgur"),Imgur.Loader=Class.extend({init:function(a,b){this._={counter:0,el:{$loader:a,$container:b||a}}},get$Loader:function(){return this._.el.$loader},isHidden:function(){return"none"==this._.el.$loader.css("display")},show:function(){this._.counter++,this._.el.$loader.css("display","inherit"),this._.el.$container.removeClass("nodisplay")},hide:function(){this._.counter--,0==this._.counter&&(this._.el.$loader.css("display","none"),this._.el.$container.hasClass("nodisplay")||this._.el.$container.addClass("nodisplay"))}}),Namespace("Imgur"),Imgur.Nanoscroll=React.createClass({displayName:"Nanoscroll",propTypes:{options:React.PropTypes.object},getDefaultProps:function(){return{options:{},contentClassNames:"",nanoStyle:{},contentStyle:{}}},componentDidMount:function(){$(this.refs["nano-container"]).nanoScroller(this.props.options)},componentDidUpdate:function(){$(this.refs["nano-container"]).nanoScroller(this.props.options)},render:function(){return React.DOM.div({ref:"nano-container",className:"nano",style:this.props.nanoStyle},React.DOM.div({className:"content "+this.props.contentClassNames,style:this.props.contentStyle},this.props.children))}}),Namespace("Imgur"),Imgur.BodyModal={componentDidMount:function(){$("body").on("click",this.handleBodyClick)},componentWillUnmount:function(){$("body").off("click",this.handleBodyClick)},getInitialState:function(){return{bodyModalVisible:!1}},handleBodyClick:function(a){var b=window.ReactDOM||window.React;0===$(a.target).closest(b.findDOMNode(this)).length&&this.setState({bodyModalVisible:!1})},handleBodyModalClick:function(a){this.setState({bodyModalVisible:!this.state.bodyModalVisible})}},Namespace("Imgur.Elements"),Imgur.Elements.FlashyText=React.createClass({propTypes:{value:React.PropTypes.string.isRequired},getInitialState:function(){return{flashNumber:0}},componentWillReceiveProps:function(a){this.props.value!==a.value&&this.setState({flashNumber:this.state.flashNumber+1})},render:function(){return React.createElement(React.addons.CSSTransitionGroup,{transitionName:"flash",transitionLeave:!1},React.DOM.span({key:this.state.flashNumber},this.props.value))}}),Imgur.Reputation=Class.extend({init:function(a){this.levels=a},getLevelName:function(a){for(var b=0;b<this.levels.length;b++)if(a<this.levels[b].reputation)return this.levels[b].name;return this.levels[this.levels.length-1].name}}),Imgur.PointsUpdater=Class.extend({init:function(a,b){this.type=a,this.emitter=b,this.aggregators={}},getForeignId:function(a){throw"abstract"},getPointsValue:function(a){throw"abstract"},handleUpdate:function(a){var b=this.getForeignId(a),c=this.getPointsValue(a);b in this.aggregators||(this.aggregators[b]=new Imgur.PointsUpdater.Aggregator(this.emitter));var d=_.merge({},a,{points:c,type:this.type});this.aggregators[b].handleUpdate(d)},kill:function(){_.each(this.aggregators,function(a){a.kill()}),this.aggregators={}}}),Imgur.PointsUpdater.Aggregator=Class.extend({init:function(a){this.emitter=a,this.pointsUpdate=null,this.timerRef=window.setInterval(_.bind(this.flush,this),3e3)},handleUpdate:function(a){this.pointsUpdate=a},flush:function(){this.pointsUpdate&&this.emitter.trigger("pointUpdate",this.pointsUpdate),this.pointsUpdate=null},kill:function(){window.clearInterval(this.timerRef)}}),Imgur.PointsUpdater.Comment=Imgur.PointsUpdater.extend({getForeignId:function(a){return Number(a.comment)},getPointsValue:function(a){return Number(a.points)}}),Imgur.PointsUpdater.Image=Imgur.PointsUpdater.extend({getForeignId:function(a){return a.hash},getPointsValue:function(a){return a.ups-a.downs}}),Namespace("Imgur.Notification"),Imgur.Notification=Imgur.extend({init:function(a){return this._=$.extend(!0,{openingDropDown:!1,baseUrl:"/account/notifications",loaderSrc:"//s.imgur.com/images/loaders/ddddd1_181817/48.gif",cacheArray:{},originalTitle:document.title,unreadCounts:{},titleTimeout:null,focusType:"focus"},a),this.setFocusHandler(),this._},setTitle:function(a){this._.originalTitle=a,this._updateTitleToReflectCount()},setUnreadCount:function(a,b){this._.unreadCounts[a]=b,this._updateTitleToReflectCount()},_updateTitleToReflectCount:function(){var a=0;for(var b in this._.unreadCounts)a+=this._.unreadCounts[b];a>0?document.title="("+a+") "+this._.originalTitle:document.title=this._.originalTitle},viewed:function(a,b){var c={id:a,type:b};this.updateSubCounter(a,b);$.ajax({type:"POST",url:this._.baseUrl+"/viewed/",data:c})},showNotificationsDropdown:function(){var a=this,b=$("<div/>",{id:"notification-dropdown"}).html('<img src="http://s.imgur.com/images/loaders/181817_ededed/24.gif" alt="">'),c=$("<div/>",{"class":"notification-dropdown-wrapper"}).html(b);$(".notification-container").append(c),c.mouseleave(a.hideNotificationsDropdown);var d=function(c,d){b.html('<a href="//'+Imgur.getInstance()._.host+"/user/"+a._.auth.url+'/replies">replies ('+c+")</a>"),b.append('<div class="hairline"></div>'),b.append('<a href="//'+Imgur.getInstance()._.host+'/account/messages">messages ('+d+")</a>")};"undefined"!=typeof this._.cacheArray.dropdown?d(this._.cacheArray.dropdown.replies,this._.cacheArray.dropdown.messages):$.ajax({type:"GET",url:"//"+Imgur.getInstance()._.host+"/account/notifications.json",crossDomain:!0,xhrFields:{withCredentials:!0},success:function(b){d(b.data.trending_captions.length,b.data.messages.length),a._.cacheArray.dropdown={replies:b.data.trending_captions.length,messages:b.data.messages.length}}})},initNotificationsDropdown:function(){var a=this;$(".notification-container").mouseenter(function(){a._.openingDropDown=!0,setTimeout(function(){a._.openingDropDown&&a.showNotificationsDropdown()},600)}).mouseleave(function(){a._.openingDropDown=!1})},hideNotificationsDropdown:function(){$(".notification-dropdown-wrapper").fadeOut("fast",function(){this.remove()})},updateSubCounter:function(a,b){var c=$("#unread-"+b),d=parseInt(c.html())-a.length;d>0?c.html("("+d+")"):c.remove()},updateTotalCounter:function(a,b){var c=$("#topbar").find(".notification-area");if(b){var d=0;c.length&&parseInt(c.html())?d=parseInt(c.html()):c.length||(this.insertNotificationArea(),c=$("#topbar").find(".notification-area")),d+=a}else var d=parseInt(c.html())-a;d<1?$(".notification-container").remove():c.html(d)},insertNotificationArea:function(){$(".user-nav .account").before('<li class="notification-container red">                 <a href="//'+Imgur.getInstance()._.host+'/account/notifications" class="notification-area new-notification ">0</a>             </li>'),this.initNotificationsDropdown()},setFocusHandler:function(a){"focus"==this._.focusType&&"function"==typeof a&&(a(),a=null);var b=this;$(window).unbind("blur"),$(window).unbind("focus"),$(window).on("blur focus",function(c){b._.focusType!=c.type&&"focus"==c.type&&"function"==typeof a&&(a(),a=null),b._.focusType=c.type})},initRealtime:function(a){var b=this;a.on("newMessage",function(a){b.handleMessageNotification(a)}),a.on("newReply",function(a){b.handleReplyNotification(a)}),a.on("readNotification",function(a){"undefined"!=typeof a.count&&b.updateTotalCounter(a.count)})},handleMessageNotification:function(a){var b='<span class="bold margin-bottom">New message from '+Imgur.Util.truncate(a.from,15,!0)+"</span><br>"+Imgur.Util.htmlEntity(Imgur.Util.truncate(a.body,40,!0)),c="//"+Imgur.getInstance()._.host+"/account/messages";this.showGrowl(b,c,""),this.updateTotalCounter(1,!0)},handleReplyNotification:function(a){var b='<span class="bold margin-bottom">You have a new reply!</span>',c="//"+Imgur.getInstance()._.host+"/user/"+this._.auth.url+"/replies",d="//i.imgur.com/"+a.hash+"b.jpg";this.showGrowl(b,c,d),this.updateTotalCounter(1,!0)},showGrowl:function(a,b,c){noty({text:a,link:b,image:c})}}),Class.addSingleton(Imgur.Notification),Namespace("Imgur.Notification"),Imgur.Notification.UIMessage=Class.extend({init:function(a,b,c,d,e){this._={reputation:a,levels:b,reachedMode:d,host:e}},knowHowToRender:function(a){return["post","account","comment","trophy"].indexOf(a)!==-1},getLinkHref:function(a,b,c,d,e){var f;switch(a){case"post":f="//"+this._.host+"/gallery/"+b.post.hash;break;case"account":f="//"+this._.host+"/user/"+Imgur.Environment.auth.url;break;case"comment":f="//"+this._.host+"/gallery/"+b.post.hash+"/comment/"+c+"/1";break;case"trophy":f="//"+this._.host+(b.trophy.data_link?b.trophy.data_link:"/user/"+Imgur.Environment.auth.url)}var g=$(".unseen-count").text(),h="";return h+="&nsnap="+d,h+="&ntype="+a,h+="&nid="+c,h+="&nnum="+(g?g:0),h=h.substr(1),f+"?"+h+"&lr="+(null===e?0:e)},getIcon:function(a,b){var c;switch(a){case"post":case"comment":var d=b.post,e=Number(d.is_album)?d.album_cover:d.hash;c=Imgur.Environment.cdnUrl+"/"+e+"s.jpg";break;case"trophy":c=b.trophy.image_url;break;default:c=null}return c},getThumb:function(a,b){var c,d=this.getIcon(a,b);return"comment"==a?c=React.DOM.div({className:"thumb"},React.DOM.img({src:d}),React.DOM.span({className:"icon-comment-bubble"})):"account"==a?c=React.DOM.div({className:"thumb"},React.DOM.span({className:"icon-stars-notoriety"})):null!==d&&(c=React.DOM.div({className:"thumb"},React.DOM.img({src:d}))),c},getCardTitle:function(a,b){switch(a){case"post":return b.post.title;case"comment":return b.comment.caption;case"trophy":return"New trophy!";case"account":return"New notoriety level!"}},getCommentReplyTimeLastRead:function(a){return"commentReply"in a?a.commentReply.milestone_read_time:0},getMilestoneLine:function(a,b){var c="",d={event:!0,unseen:!a.seen};switch(a.event_type){case"userNotoriety":d["event-notoriety"]=!0,c="Congratulations! You've earned enough reputation points to move up one notoriety level. You are now "+this._.reputation.getLevelName(a.event_count)+".";break;case"postComment":d["event-comment"]=!0,c=[React.createElement(Imgur.Elements.FlashyText,{key:a.event_count,value:String(a.event_count)})," "+Imgur.Util.pluralize(a.event_count,"comment")];break;case"postUpvote":d["event-upvote"]=!0,c=1===a.event_count?"Your post received an upvote!":[React.createElement(Imgur.Elements.FlashyText,{key:a.milestone_level,value:String(a.event_count)})," "+Imgur.Util.pluralize(a.event_count,"point")];break;case"postView":d["event-view"]=!0,c=[React.createElement(Imgur.Elements.FlashyText,{key:a.milestone_level,value:String(a.event_count)})," "+Imgur.Util.pluralize(a.event_count,"view")];break;case"postViral":d["event-viral"]=!0,c="Nice! Your post made it to Most Viral!";break;case"postEmbed":d["event-embed"]=!0,c=1===a.event_count?"You're famous! "+a.event_data.embed.publisher+" thought your post was so great that they embedded it outside of Imgur.":["You're famous! ",React.createElement(Imgur.Elements.FlashyText,{key:a.milestone_level,value:String(a.event_count)})," sites embedded your post. "];break;case"commentMention":d["event-mention"]=!0,c=1===a.event_count?[React.DOM.span({className:"mention"},a.event_data.commentator.url)," mentioned you in a comment."]:[React.createElement(Imgur.Elements.FlashyText,{key:a.milestone_level,value:String(a.event_count)})," users mentioned you in a comment."];break;case"commentUpvote":d["event-upvote"]=!0,c=1===a.event_count?"Your comment received its first upvote!":[React.createElement(Imgur.Elements.FlashyText,{key:a.milestone_level,value:String(a.event_count)})," "+Imgur.Util.pluralize(a.event_count,"point")];break;case"commentTop7":d["event-top7"]=!0,c="Your comment scored in the top 7 of the day. Nice job! ";break;case"commentReply":d["event-reply"]=!0;var e=1==a.event_count?"reply":"replies";c=[React.createElement(Imgur.Elements.FlashyText,{key:a.milestone_level,value:String(a.event_count)})," "+e];break;case"userTrophy":d["event-trophy"]=!0,c=b.trophy.description}return React.DOM.p({key:a.evt_type,className:classNames(d)},c)}}),Namespace("Imgur.NotificationBase"),Imgur.NotificationBase=Class.extend({init:function(a){return this._=$.extend({viewing:{},type:"base",cdnUrl:"//i.imgur.com",baseUrl:"/account/notifications",noNotifications:".no-notifications",notifications:{},notificationInstances:{},handlingHistoryState:!1,previous:{type:""},el:{noType:".no-type",noNotifications:".no-notifications",viewNotification:".message-type",loaderId:"#notification-loader",selectedButtonClass:"selected"},lookupTypes:{trending_captions:"Replies",messages:"Message"}},a),this._},viewed:function(a,b){a instanceof Object?a.length&&Imgur.Notification.getInstance().viewed(a,b):a&&Imgur.Notification.getInstance().viewed([a],b)},showDisabledNotification:function(a){a=a.charAt(0).toUpperCase()+a.slice(1),$(this._.el.noType).text(a),$(this._.el.noNotifications+" .disabled").show(),$(this._.el.noNotifications+" .empty").hide(),$(this._.el.noNotifications).show(),this.hideLoader()},showNoNotification:function(a){$(this._.el.noType).text(a),$(this._.el.noNotifications+" .disabled").hide(),$(this._.el.noNotifications+" .empty").show(),$(this._.el.noNotifications).show(),$(".gallery-images img").tipsy({gravity:"n",opacity:.95,offset:-8,html:!0})},hideNoNotifications:function(){$(this._.el.noNotifications).hide()},showLoader:function(){this.hideNoNotifications(),$(this._.el.loaderId).show()},hideLoader:function(){$(this._.el.loaderId).hide()},clearLoad:function(){Imgur.InfiniteScroll.getInstance().stopInfiniteScroll(),this.hideLoader(),$(this._.target).empty()},getNewNotifications:function(a,b){if("messages"===a&&this._.messagesDisabled){var c=this._.notificationInstances[a];return c.addWindowState(),this.showDisabledNotification(a)}$.ajax({url:this._.baseUrl+".json",data:{type:a},success:function(a){null!=a&&a.success&&"function"==typeof b&&(this._.notifications=a.data,b())}.bind(this)})}}),Class.addSingleton(Imgur.NotificationBase),Namespace("Imgur.Notification"),Imgur.Notification.EventDropdown=React.createClass({displayName:"Notification.EventDropdown",propTypes:{socket:React.PropTypes.object.isRequired,reputation:React.PropTypes.object.isRequired},mixins:[Imgur.ReactInfiniteScroll,Imgur.BodyModal],getInitialState:function(){return{notifications:{},pending_event_snapshots:{}}},_update_pagination_token:function(){if(this.infiniteScrollCountPages()>0)try{"localStorage"in window&&null!==window.localStorage&&localStorage.setItem("notifications_last_token",this.infiniteScrollGetPage(0).response_latest_as_of)}catch(a){}},_markEventsAsSeen:function(){var a=[];if(_.each(this.state.notifications,function(b){"unseen"!=b.state&&"received"!=b.state||a.push({foreign_type:b.foreign_type,foreign_id:b.foreign_id,snapshot:b.snapshot})}),a.length>0){$.ajax({method:"POST",url:"/account/notifications/mark",data:{mark_type:"seen",notifications:a,msid:Imgur.Environment.msid}});var b={};_.each(a,_.bind(function(a){var c=[a.foreign_type,a.foreign_id].join(":"),d=_.merge({},this.state.notifications[c]);d.state="seen-pending-close",b[c]=d,Imgur.Util.jafoLog({event:"notificationSeen",meta:{bbType:"bubble",cardId:c}})},this)),this.setState({notifications:_.merge({},this.state.notifications,b)})}},componentDidUpdate:function(a,b){if(this.state.bodyModalVisible)this._update_pagination_token(),b.bodyModalVisible||(0===this.infiniteScrollCountPages()&&this._load(0),this._markEventsAsSeen());else if(b.bodyModalVisible){var c={};_.each(this.state.notifications,function(a,b){c[b]=_.merge({},a),"seen-pending-close"==a.state&&(c[b].state="seen")}),_.each(this.state.pending_event_snapshots,function(a){var b=c[a.notificationKey];_.each(b.events,function(b){b.event_type==a.eventType&&(b.seen=b.event_snapshot<=a.snapshot)})}),this.setState({notifications:c,pending_event_snapshots:{}})}this._publishUnreadCount()},_publishUnreadCount:function(){for(var a=0,b=_.values(this.state.notifications),c=0;c<b.length;c++){var d=b[c];"received"!=d.state&&"unseen"!=d.state||(a+=1)}Imgur.Notification.getInstance().setUnreadCount("notifications",a)},_mergeData:function(a){var b=new Imgur.Notification.UIMessage(this.props.reputation,null,null,(!0),Imgur.Environment.host),c=_.merge({},this.state.notifications);this.state.bodyModalVisible;_.each(a,function(a){if(b.knowHowToRender(a.foreign_type)){var d=[a.foreign_type,a.foreign_id].join(":");if(_.isUndefined(c[d]))c[d]=a;else{var e,f=c[d],g={};a.snapshot>=f.snapshot?e=_.merge({},a):(console.log("discarding stale notification data ",a," because new snapshot ",a.snapshot," < ",f.snapshot),e=_.merge({},f)),_.each(f.events,function(a){g[a.event_type]=a}),_.each(a.events,function(a){var b=a.event_type;if(_.isUndefined(g[b]))g[b]=a;else{var c=g[b];a.event_snapshot>=c.event_snapshot?g[b]=a:(console.log("discarding stale event ",a," because new event snapshot ",a.event_snapshot," < ",c.event_snapshot),g[b]=c)}}),e.events=g,c[d]=e}}}),this.setState({notifications:c})},_displayGrowls:function(a){var b=_.indexBy(a,function(a){return[a.foreign_type,a.foreign_id].join(":")});_.each(b,_.bind(function(a,b){_.each(a.events,_.bind(function(c){if("message-msg"!=c.event_type){var d,e=new Imgur.Notification.UIMessage(this.props.reputation,null,a.events,(!1),Imgur.Environment.host),f=e.getLinkHref(c.notification_foreign_type,a.foreign_data,c.notification_foreign_id,a.snapshot,a.last_read_snapshot);if("commentReply"==c.event_type){var g=a.foreign_data.post,h=Number(g.is_album)?g.album_cover:g.hash;d=Imgur.Environment.cdnUrl+"/"+h+"s.jpg"}else d=e.getIcon(c.notification_foreign_type,a.foreign_data);var i={text:Imgur.Util.htmlEntity(c.title_long),link:f};null!==d&&(i.image=d),noty(i),Imgur.Util.jafoLog({event:"notificationBBAppear",meta:{bbType:"bubble",cardId:[String(Imgur.Environment.auth.id),b,c.event_type].join(":"),notificationId:[String(Imgur.Environment.auth.id),b,c.event_type].join(":")}})}},this))},this))},infiniteScrollNeedToLoadFirstPage:function(){if(!Imgur.Environment.auth.notifications_last_token)return!1;try{if("localStorage"in window&&null!==window.localStorage&&Imgur.Environment.auth.notifications_last_token===localStorage.getItem("notifications_last_token"))return!1}catch(a){}return!0},infiniteScrollLoad:function(a,b){var c=this.infiniteScrollCountPages(),d="";c>0&&(d="/"+this.infiniteScrollGetPage(c-1).next_page),$.ajax({url:"/account/notifications/list"+d+".json",displayGenericError:!1,success:_.bind(function(a){a?a.data.notifications&&a.data.notifications.length?(this._mergeData(a.data.notifications),this.state.bodyModalVisible&&this._markEventsAsSeen(),b({first_token:a.data.first_token,next_page:a.data.next_page,response_latest_as_of:a.data.response_latest_as_of},!1)):b({},!0):b(null,!0)},this)})},componentDidMount:function(){this.props.socket.on("newNotification",this.handleRealTimeNewNotifications),this.props.socket.on("markNotification",this.handleRealTimeMarkNotification),this._publishUnreadCount()},handleRealTimeNewNotifications:function(a){this._mergeData(a.notifications),this.state.bodyModalVisible&&this._markEventsAsSeen(),this._displayGrowls(a.notifications)},handleRealTimeMarkNotification:function(a){var b=[a.foreign_type,a.foreign_id].join(":"),c=this.state.notifications[b],d=a.snapshot;if(!_.isUndefined(c)){var e={},f={};"seen"==a.mark_type?(c.last_seen_snapshot=d,"unseen"===c.state&&this.state.bodyModalVisible?c.state="seen-pending-close":"unseen"!==c.state||this.state.bodyModalVisible||(c.state="seen")):"read"==a.mark_type&&(c.last_read_snapshot=d,c.state="read"),e[b]=c,this.state.bodyModalVisible?_.each(c.events,function(a){var c=[b,a.event_type].join(":");f[c]={snapshot:d,notificationKey:b,eventType:a.event_type}}):_.each(c.events,function(a){a.seen=a.event_snapshot<=d}),this.setState({notifications:_.merge({},this.state.notifications,e),pending_event_snapshots:_.merge({},this.state.pending_event_snapshots,f)})}},render:function(){var a=_.merge({},this.state.notifications),b=_.filter(_.values(a),function(a){return"unseen"==a.state||"seen-pending-close"==a.state}),c=_.filter(_.values(a),function(a){return"unseen"!=a.state&&"seen-pending-close"!=a.state});b=_.sortBy(b,"snapshot"),c=_.sortBy(c,"snapshot"),b.reverse(),c.reverse();var d=b.concat(c),e=[],f=0,g=0;_.each(d,_.bind(function(a,b){var c=_.merge({},a,{reputation:this.props.reputation}),h=null;b===d.length-1&&(h="infinite-scroll"),e.push(React.createElement(React.addons.CSSTransitionGroup,{ref:h,key:[a.foreign_type,a.foreign_id].join(":"),transitionName:"card"},React.createElement(Imgur.NotificationCard,c))),"received"==a.state?(f+=1,g+=1):"unseen"==a.state?(f+=1,g+=1):"seen-pending-close"==a.state&&(g+=1)},this)),0===this.infiniteScrollCountPages()&&e.push(React.createElement(Imgur.NotificationCard.Empty,{key:"notifcard-empty"}));var h=React.DOM.div({className:"notifications-dropdown"},React.DOM.div({className:"notifications-header"},React.DOM.div({className:"left"},React.DOM.h3(null,"Notifications"),g>0?React.DOM.span({className:"unseen-count"},g):""),React.DOM.div({className:"clear"})),React.DOM.div({className:"notifications-content"},React.createElement(Imgur.Nanoscroll,{options:{preventPageScrolling:!0},ref:"infinite-scroll-container",height:300},e))),i=classNames({"icon-notifications":!0,events:!0,unseen:f>0,active:this.state.bodyModalVisible});return React.DOM.div({},React.DOM.i({onClick:this.handleBodyModalClick,className:i},React.DOM.span({className:"unseen-count"},Math.min(99,f))),this.state.bodyModalVisible?h:"")}}),Namespace("Imgur.Notification"),Imgur.Notification.MessageDropdown=React.createClass({displayName:"Notification.MessageDropdown",propTypes:{unreadCount:React.PropTypes.number,socket:React.PropTypes.object.isRequired},getInitialState:function(){return{delta:0,oldMessages:null}},componentDidMount:function(){this.props.socket.on("newMessage",this.handleNewMessage),this.props.socket.on("readNotification",this.handleReadNotification),Imgur.Notification.getInstance().setUnreadCount("messages",this.props.unreadCount+this.state.delta)},componentDidUpdate:function(a,b){Imgur.Notification.getInstance().setUnreadCount("messages",this.props.unreadCount+this.state.delta)},handleNewMessage:function(a){this.setState({delta:this.state.delta+1});var b='<span class="bold margin-bottom">';b+="New message from ",b+=Imgur.Util.truncate(a.from,15,!0),b+="</span><br>",b+=Imgur.Util.htmlEntity(Imgur.Util.truncate(a.body,40,!0)),noty({text:b,link:"//"+Imgur.Environment.host+"/account/messages",image:""}),this.state.oldMessages&&this.state.oldMessages.handleRealtimeMessage(a)},handleReadNotification:function(a){this.setState({delta:this.state.delta-a.count})},render:function(){var a=classNames({"icon-messages":!0,conversations:!0,unread:this.props.unreadCount+this.state.delta>0}),b=classNames({"unread-count":!0,unread:this.props.unreadCount+this.state.delta>0});return React.DOM.div(null,React.DOM.a({href:"//"+Imgur.Environment.host+"/account/messages",className:b},React.DOM.span({className:b},Math.min(99,this.props.unreadCount+this.state.delta))),React.DOM.i({className:a},""))}}),Namespace("Imgur.NotificationCard"),Imgur.NotificationCard=React.createClass({displayName:"NotificationCard",propTypes:{foreign_type:React.PropTypes.string.isRequired,foreign_data:React.PropTypes.object.isRequired,events:React.PropTypes.array.isRequired,state:React.PropTypes.string.isRequired,snapshot:React.PropTypes.number.isRequired,last_read_snapshot:React.PropTypes.number,reputation:React.PropTypes.object.isRequired},render:function(){var a=[],b=new Imgur.Notification.UIMessage(this.props.reputation,null,this.props.events,(!0),Imgur.Environment.host);for(var c in this.props.events){var d=b.getMilestoneLine(this.props.events[c],this.props.foreign_data);a.push(d)}var e={"notification-card":!0,unread:"read"!==this.props.state,unseen:"unseen"===this.props.state||"received"===this.props.state||"seen-pending-close"===this.props.state};e["notification-card-"+this.props.foreign_type]=!0;var f,g=b.getThumb(this.props.foreign_type,this.props.foreign_data);"comment"==this.props.foreign_type&&(f=b.getCommentReplyTimeLastRead(this.props.events));var h=b.getLinkHref(this.props.foreign_type,this.props.foreign_data,this.props.foreign_id,this.props.snapshot,this.props.last_read_snapshot),i=b.getCardTitle(this.props.foreign_type,this.props.foreign_data);return React.DOM.div({className:classNames(e)},g,React.DOM.div({className:"events"},React.DOM.h4(null,i),a),React.DOM.a({href:h}))}}),Namespace("Imgur.NotificationCard"),Imgur.NotificationCard.Empty=React.createClass({render:function(){var a=classNames({"notification-card":!0,"notification-card-empty":!0});return React.DOM.div({className:a},"You have no new notifications.")}}),"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),function(a){var b={init:function(b){return this.options=a.extend({},a.noty.defaults,b),this.options.layout=this.options.custom?a.noty.layouts.inline:a.noty.layouts[this.options.layout],delete b.layout,this.options=a.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this.options=a.extend({},this.options,b),this._build(),this},_build:function(){var b=a('<div class="noty_bar"></div>').attr("id",this.options.id);if(b.append(this.options.template).find(".noty_text").html(this.options.text),""!==this.options.image?b.find(".noty_image").html('<img style="width: 60px;" src="'+this.options.image+'" />'):b.find(".noty_image").remove(),this.$bar=null!==this.options.layout.parent.object?a(this.options.layout.parent.object).css(this.options.layout.parent.css).append(b):b,this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var c=a("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(c):this.$bar.append(c);var d=this;a.each(this.options.buttons,function(b,c){var e=a("<button/>").addClass(c.addClass?c.addClass:"gray").html(c.text).appendTo(d.$bar.find(".noty_buttons")).bind("click",function(){a.isFunction(c.onClick)&&c.onClick.call(e,d)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),a.noty.store[this.options.id]=this},show:function(){var b=this;return a(b.options.layout.container.selector).append(b.$bar),"function"===a.type(b.options.layout.css)?this.options.layout.css.apply(b.$bar):b.$bar.css(this.options.layout.css||{}),b.$bar.addClass(b.options.layout.addClass),b.options.layout.container.style.apply(a(b.options.layout.container.selector)),a.inArray("click",b.options.closeWith)>-1&&b.$bar.css("cursor","pointer").one("click",function(a){b.stopPropagation(a),b.options.callback.onCloseClick&&b.options.callback.onCloseClick.apply(b),b.close()}),a.inArray("hover",b.options.closeWith)>-1&&b.$bar.one("mouseenter",function(){b.close()}),a.inArray("button",b.options.closeWith)>-1&&b.$closeButton.one("click",function(a){b.stopPropagation(a),b.close()}),a.inArray("button",b.options.closeWith)==-1&&b.$closeButton.remove(),b.options.callback.onShow&&b.options.callback.onShow.apply(b),b.$bar.animate(b.options.animation.open,b.options.animation.speed,b.options.animation.easing,function(){b.options.callback.afterShow&&b.options.callback.afterShow.apply(b),b.shown=!0}),b.$bar.click(function(){""!=b.options.link&&(window.location=b.options.link)}),b.options.timeout&&b.$bar.delay(b.options.timeout).promise().done(function(){b.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var b=this;if(!this.shown){var c=[];return a.each(a.noty.queue,function(a,d){d.options.id!=b.options.id&&c.push(d)}),void(a.noty.queue=c)}b.$bar.addClass("i-am-closing-now"),b.options.callback.onClose&&b.options.callback.onClose.apply(b),b.$bar.clearQueue().stop().fadeOut("slow",function(){b.options.callback.afterClose&&b.options.callback.afterClose.apply(b)}).promise().done(function(){b.options.modal&&(a.notyRenderer.setModalCount(-1),0==a.notyRenderer.getModalCount()&&a(".noty_modal").fadeOut("fast",function(){a(this).remove()})),a.notyRenderer.setLayoutCountFor(b,-1),0==a.notyRenderer.getLayoutCountFor(b)&&a(b.options.layout.container.selector).remove(),"undefined"!=typeof b.$bar&&null!==b.$bar&&(b.$bar.remove(),b.$bar=null,b.closed=!0),delete a.noty.store[b.options.id],b.options.dismissQueue||(a.noty.ontap=!0,a.notyRenderer.render()),b.options.maxVisible>0&&b.options.dismissQueue&&a.notyRenderer.render()})}},setText:function(a){return this.closed||(this.options.text=a,this.$bar.find(".noty_text").html(a)),this},setType:function(a){return this.closed||(this.options.type=a),this},setTimeout:function(a){if(!this.closed){var b=this;this.options.timeout=a,b.$bar.delay(b.options.timeout).promise().done(function(){b.close()})}return this},stopPropagation:function(a){a=a||window.event,"undefined"!=typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},closed:!1,shown:!1};a.notyRenderer={},a.notyRenderer.init=function(c){var d=Object.create(b).init(c);return d.options.force?a.noty.queue.unshift(d):a.noty.queue.push(d),a.notyRenderer.render(),"object"==a.noty.returns?d:d.options.id},a.notyRenderer.render=function(){var b=a.noty.queue[0];"object"===a.type(b)?b.options.dismissQueue?b.options.maxVisible>0?a(b.options.layout.container.selector+" li").length<b.options.maxVisible&&a.notyRenderer.show(a.noty.queue.shift()):a.notyRenderer.show(a.noty.queue.shift()):a.noty.ontap&&(a.notyRenderer.show(a.noty.queue.shift()),a.noty.ontap=!1):a.noty.ontap=!0},a.notyRenderer.show=function(b){b.options.modal&&(a.notyRenderer.createModalFor(b),a.notyRenderer.setModalCount(1)),0==a(b.options.layout.container.selector).length?b.options.custom?b.options.custom.append(a(b.options.layout.container.object).addClass("i-am-new")):a("body").append(a(b.options.layout.container.object).addClass("i-am-new")):a(b.options.layout.container.selector).removeClass("i-am-new"),a.notyRenderer.setLayoutCountFor(b,1),b.show()},a.notyRenderer.getLayoutCountFor=function(b){return a(b.options.layout.container.selector).data("noty_layout_count")||0},a.notyRenderer.setLayoutCountFor=function(b,c){return a(b.options.layout.container.selector).data("noty_layout_count",a.notyRenderer.getLayoutCountFor(b)+c)},a.notyRenderer.getModalCount=function(){return a(".noty_modal").data("noty_modal_count")||0},a.notyRenderer.setModalCount=function(b){return a(".noty_modal").data("noty_modal_count",a.notyRenderer.getModalCount()+b)},a.fn.noty=function(b){return b.custom=a(this),a.notyRenderer.init(b)},a.noty={},a.noty.queue=[],a.noty.ontap=!0,a.noty.layouts={},a.noty.returns="object",a.noty.store={},a.noty.get=function(b){return!!a.noty.store.hasOwnProperty(b)&&a.noty.store[b]},a.noty.close=function(b){return!!a.noty.get(b)&&a.noty.get(b).close()},a.noty.setText=function(b,c){return!!a.noty.get(b)&&a.noty.get(b).setText(c)},a.noty.setType=function(b,c){return!!a.noty.get(b)&&a.noty.get(b).setType(c)},a.noty.clearQueue=function(){a.noty.queue=[]},a.noty.closeAll=function(){a.noty.clearQueue(),a.each(a.noty.store,function(a,b){b.close()})};var c=window.alert;a.noty.consumeAlert=function(b){window.alert=function(c){b?b.text=c:b={text:c},a.notyRenderer.init(b)}},a.noty.stopConsumeAlert=function(){window.alert=c},a.noty.defaults={layout:"bottomRight",theme:"defaultTheme",type:"information",text:"",link:"",image:"",dismissQueue:!0,template:'<div class="noty_message"><div class="noty_image"></div><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},timeout:8e3,force:!1,modal:!1,maxVisible:5,closeWith:["button"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){}},buttons:!1},a(window).resize(function(){a.each(a.noty.layouts,function(b,c){c.container.style.apply(a(c.container.selector))})})}(jQuery),window.noty=function(a){var b=0,c={animateOpen:"animation.open",animateClose:"animation.close",easing:"animation.easing",speed:"animation.speed",onShow:"callback.onShow",onShown:"callback.afterShow",onClose:"callback.onClose",onCloseClick:"callback.onCloseClick",onClosed:"callback.afterClose"};return jQuery.each(a,function(d,e){if(c[d]){b++;var f=c[d].split(".");a[f[0]]||(a[f[0]]={}),a[f[0]][f[1]]=e?e:function(){},delete a[d]}}),a.closeWith||(a.closeWith=jQuery.noty.defaults.closeWith),a.hasOwnProperty("closeButton")&&(b++,a.closeButton&&a.closeWith.push("button"),delete a.closeButton),a.hasOwnProperty("closeOnSelfClick")&&(b++,a.closeOnSelfClick&&a.closeWith.push("click"),delete a.closeOnSelfClick),a.hasOwnProperty("closeOnSelfOver")&&(b++,a.closeOnSelfOver&&a.closeWith.push("hover"),delete a.closeOnSelfOver),a.hasOwnProperty("custom")&&(b++,"null"!=a.custom.container&&(a.custom=a.custom.container)),a.hasOwnProperty("cssPrefix")&&(b++,delete a.cssPrefix),"noty_theme_default"==a.theme&&(b++,a.theme="defaultTheme"),a.hasOwnProperty("dismissQueue")||(a.dismissQueue=jQuery.noty.defaults.dismissQueue),a.hasOwnProperty("maxVisible")||(a.maxVisible=jQuery.noty.defaults.maxVisible),a.buttons&&jQuery.each(a.buttons,function(a,c){c.click&&(b++,c.onClick=c.click,delete c.click),c.type&&(b++,c.addClass=c.type,delete c.type)}),b&&"undefined"!=typeof console&&console.warn&&console.warn("You are using noty v2 with v1.x.x options. @deprecated until v2.2.0 - Please update your options."),jQuery.notyRenderer.init(a)},function(a){a.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){window.innerWidth<600&&a(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"250px"},addClass:""}}(jQuery),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t={}.hasOwnProperty,u=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},v=[].slice;null==this.Tether&&(this.Tether={modules:[]}),l=function(a){var b,c,d,e,f;if(c=getComputedStyle(a).position,"fixed"===c)return a;for(d=void 0,b=a;b=b.parentNode;){try{e=getComputedStyle(b)}catch(g){}if(null==e)return b;if(/(auto|scroll)/.test(e.overflow+e.overflowY+e.overflowX)&&("absolute"!==c||"relative"===(f=e.position)||"absolute"===f||"fixed"===f))return b}return document.body},q=function(){var a;return a=0,function(){return a++}}(),s={},j=function(a){var b,d,f,g,h;if(f=a._tetherZeroElement,null==f&&(f=a.createElement("div"),f.setAttribute("data-tether-id",q()),e(f.style,{top:0,left:0,position:"absolute"}),a.body.appendChild(f),a._tetherZeroElement=f),b=f.getAttribute("data-tether-id"),null==s[b]){s[b]={},h=f.getBoundingClientRect();for(d in h)g=h[d],s[b][d]=g;c(function(){return s[b]=void 0})}return s[b]},n=null,g=function(a){var b,c,d,e,f,g,h;a===document?(c=document,a=document.documentElement):c=a.ownerDocument,d=c.documentElement,b={},h=a.getBoundingClientRect();for(e in h)g=h[e],b[e]=g;return f=j(c),b.top-=f.top,b.left-=f.left,null==b.width&&(b.width=document.body.scrollWidth-b.left-b.right),null==b.height&&(b.height=document.body.scrollHeight-b.top-b.bottom),b.top=b.top-d.clientTop,b.left=b.left-d.clientLeft,b.right=c.body.clientWidth-b.width-b.left,b.bottom=c.body.clientHeight-b.height-b.top,b},i=function(a){return a.offsetParent||document.documentElement},k=function(){var a,b,c,d,f;return a=document.createElement("div"),a.style.width="100%",a.style.height="200px",b=document.createElement("div"),e(b.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),b.appendChild(a),document.body.appendChild(b),d=a.offsetWidth,b.style.overflow="scroll",f=a.offsetWidth,d===f&&(f=b.clientWidth),document.body.removeChild(b),c=d-f,{width:c,height:c}},e=function(a){var b,c,d,e,f,g,h;for(null==a&&(a={}),b=[],Array.prototype.push.apply(b,arguments),h=b.slice(1),f=0,g=h.length;f<g;f++)if(d=h[f])for(c in d)t.call(d,c)&&(e=d[c],a[c]=e);return a},o=function(a,b){var c,d,e,f,g,i;if(null!=a.classList){for(g=b.split(" "),i=[],e=0,f=g.length;e<f;e++)d=g[e],d.trim()&&i.push(a.classList.remove(d));return i}return c=h(a).replace(new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi")," "),p(a,c)},b=function(a,b){var c,d,e,f,g;if(null!=a.classList){for(f=b.split(" "),g=[],d=0,e=f.length;d<e;d++)c=f[d],c.trim()&&g.push(a.classList.add(c));return g}return o(a,b),c=h(a)+(" "+b),p(a,c)},m=function(a,b){return null!=a.classList?a.classList.contains(b):new RegExp("(^| )"+b+"( |$)","gi").test(h(a))},h=function(a){return a.className instanceof SVGAnimatedString?a.className.baseVal:a.className},p=function(a,b){return a.setAttribute("class",b)},r=function(a,c,d){var e,f,g,h,i,j;for(f=0,h=d.length;f<h;f++)e=d[f],u.call(c,e)<0&&m(a,e)&&o(a,e);for(j=[],g=0,i=c.length;g<i;g++)e=c[g],m(a,e)?j.push(void 0):j.push(b(a,e));return j},d=[],c=function(a){return d.push(a)},f=function(){var a,b;for(b=[];a=d.pop();)b.push(a());return b},a=function(){function a(){}return a.prototype.on=function(a,b,c,d){var e;return null==d&&(d=!1),null==this.bindings&&(this.bindings={}),null==(e=this.bindings)[a]&&(e[a]=[]),this.bindings[a].push({handler:b,ctx:c,once:d})},a.prototype.once=function(a,b,c){return this.on(a,b,c,!0)},a.prototype.off=function(a,b){var c,d,e;if(null!=(null!=(d=this.bindings)?d[a]:void 0)){if(null==b)return delete this.bindings[a];for(c=0,e=[];c<this.bindings[a].length;)this.bindings[a][c].handler===b?e.push(this.bindings[a].splice(c,1)):e.push(c++);return e}},a.prototype.trigger=function(){var a,b,c,d,e,f,g,h,i;if(c=arguments[0],a=2<=arguments.length?v.call(arguments,1):[],null!=(g=this.bindings)?g[c]:void 0){for(e=0,i=[];e<this.bindings[c].length;)h=this.bindings[c][e],d=h.handler,b=h.ctx,f=h.once,d.apply(null!=b?b:this,a),f?i.push(this.bindings[c].splice(e,1)):i.push(e++);return i}},a}(),this.Tether.Utils={getScrollParent:l,getBounds:g,getOffsetParent:i,extend:e,addClass:b,removeClass:o,hasClass:m,updateClasses:r,defer:c,flush:f,uniqueId:q,Evented:a,getScrollBarSize:k}}.call(this),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=[].slice,E=function(a,b){return function(){return a.apply(b,arguments)}};if(null==this.Tether)throw new Error("You must include the utils.js file before tether.js");d=this.Tether,C=d.Utils,p=C.getScrollParent,q=C.getSize,n=C.getOuterSize,l=C.getBounds,m=C.getOffsetParent,j=C.extend,e=C.addClass,w=C.removeClass,z=C.updateClasses,i=C.defer,k=C.flush,o=C.getScrollBarSize,A=function(a,b,c){return null==c&&(c=1),a+c>=b&&b>=a-c},y=function(){var a,b,c,d,e;for(a=document.createElement("div"),e=["transform","webkitTransform","OTransform","MozTransform","msTransform"],c=0,d=e.length;c<d;c++)if(b=e[c],void 0!==a.style[b])return b}(),x=[],v=function(){var a,b,c;for(b=0,c=x.length;b<c;b++)a=x[b],a.position(!1);return k()},r=function(){var a;return null!=(a="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?a:+new Date},function(){var a,b,c,d,e,f,g,h,i;for(b=null,c=null,d=null,e=function(){if(null!=c&&c>16)return c=Math.min(c-16,250),void(d=setTimeout(e,250));if(!(null!=b&&r()-b<10))return null!=d&&(clearTimeout(d),d=null),b=r(),v(),c=r()-b},h=["resize","scroll","touchmove"],i=[],f=0,g=h.length;f<g;f++)a=h[f],i.push(window.addEventListener(a,e));return i}(),a={center:"center",left:"right",right:"left"},b={middle:"middle",top:"bottom",bottom:"top"},c={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},h=function(c,d){var e,f;return e=c.left,f=c.top,"auto"===e&&(e=a[d.left]),"auto"===f&&(f=b[d.top]),{left:e,top:f}},g=function(a){var b,d;return{left:null!=(b=c[a.left])?b:a.left,top:null!=(d=c[a.top])?d:a.top}},f=function(){var a,b,c,d,e,f,g;for(b=1<=arguments.length?D.call(arguments,0):[],c={top:0,left:0},e=0,f=b.length;e<f;e++)g=b[e],d=g.top,a=g.left,"string"==typeof d&&(d=parseFloat(d,10)),"string"==typeof a&&(a=parseFloat(a,10)),c.top+=d,c.left+=a;return c},s=function(a,b){return"string"==typeof a.left&&a.left.indexOf("%")!==-1&&(a.left=parseFloat(a.left,10)/100*b.width),"string"==typeof a.top&&a.top.indexOf("%")!==-1&&(a.top=parseFloat(a.top,10)/100*b.height),a},t=u=function(a){var b,c,d;return d=a.split(" "),c=d[0],b=d[1],{top:c,left:b}},B=function(){function a(a){this.position=E(this.position,this);var b,c,e,f,g;for(x.push(this),this.history=[],this.setOptions(a,!1),f=d.modules,c=0,e=f.length;c<e;c++)b=f[c],null!=(g=b.initialize)&&g.call(this);this.position()}return a.modules=[],a.prototype.getClass=function(a){var b,c;return(null!=(b=this.options.classes)?b[a]:void 0)?this.options.classes[a]:(null!=(c=this.options.classes)?c[a]:void 0)!==!1?this.options.classPrefix?""+this.options.classPrefix+"-"+a:a:""},a.prototype.setOptions=function(a,b){var c,d,f,g,h,i;for(this.options=a,null==b&&(b=!0),c={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},this.options=j(c,this.options),h=this.options,this.element=h.element,this.target=h.target,this.targetModifier=h.targetModifier,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),i=["element","target"],f=0,g=i.length;f<g;f++){if(d=i[f],null==this[d])throw new Error("Tether Error: Both element and target must be defined");null!=this[d].jquery?this[d]=this[d][0]:"string"==typeof this[d]&&(this[d]=document.querySelector(this[d]))}if(e(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&e(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");if(this.targetAttachment=t(this.options.targetAttachment),this.attachment=t(this.options.attachment),this.offset=u(this.options.offset),this.targetOffset=u(this.options.targetOffset),null!=this.scrollParent&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParent=this.target:this.scrollParent=p(this.target),this.options.enabled!==!1)return this.enable(b)},a.prototype.getTargetBounds=function(){var a,b,c,d,e,f,g,h,i;if(null==this.targetModifier)return l(this.target);switch(this.targetModifier){case"visible":return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:(a=l(this.target),e={height:a.height,width:a.width,top:a.top,left:a.left},e.height=Math.min(e.height,a.height-(pageYOffset-a.top)),e.height=Math.min(e.height,a.height-(a.top+a.height-(pageYOffset+innerHeight))),e.height=Math.min(innerHeight,e.height),e.height-=2,e.width=Math.min(e.width,a.width-(pageXOffset-a.left)),e.width=Math.min(e.width,a.width-(a.left+a.width-(pageXOffset+innerWidth))),e.width=Math.min(innerWidth,e.width),e.width-=2,e.top<pageYOffset&&(e.top=pageYOffset),e.left<pageXOffset&&(e.left=pageXOffset),e);case"scroll-handle":return i=this.target,i===document.body?(i=document.documentElement,a={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):a=l(i),h=getComputedStyle(i),c=i.scrollWidth>i.clientWidth||"scroll"===[h.overflow,h.overflowX]||this.target!==document.body,f=0,c&&(f=15),d=a.height-parseFloat(h.borderTopWidth)-parseFloat(h.borderBottomWidth)-f,e={width:15,height:.975*d*(d/i.scrollHeight),left:a.left+a.width-parseFloat(h.borderLeftWidth)-15},b=0,d<408&&this.target===document.body&&(b=-11e-5*Math.pow(d,2)-.00727*d+22.58),this.target!==document.body&&(e.height=Math.max(e.height,24)),g=this.target.scrollTop/(i.scrollHeight-d),e.top=g*(d-e.height-b)+a.top+parseFloat(h.borderTopWidth),this.target===document.body&&(e.height=Math.max(e.height,24)),e}},a.prototype.clearCache=function(){return this._cache={}},a.prototype.cache=function(a,b){return null==this._cache&&(this._cache={}),null==this._cache[a]&&(this._cache[a]=b.call(this)),this._cache[a]},a.prototype.enable=function(a){if(null==a&&(a=!0),this.options.addTargetClasses!==!1&&e(this.target,this.getClass("enabled")),e(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position),a)return this.position()},a.prototype.disable=function(){if(w(this.target,this.getClass("enabled")),w(this.element,this.getClass("enabled")),this.enabled=!1,null!=this.scrollParent)return this.scrollParent.removeEventListener("scroll",this.position)},a.prototype.destroy=function(){var a,b,c,d,e;for(this.disable(),e=[],a=c=0,d=x.length;c<d;a=++c){if(b=x[a],b===this){x.splice(a,1);break}e.push(void 0)}return e},a.prototype.updateAttachClasses=function(a,b){var c,d,e,f,g,h,j,k,l,m=this;for(null==a&&(a=this.attachment),null==b&&(b=this.targetAttachment),f=["left","top","bottom","right","middle","center"],(null!=(l=this._addAttachClasses)?l.length:void 0)&&this._addAttachClasses.splice(0,this._addAttachClasses.length),c=null!=this._addAttachClasses?this._addAttachClasses:this._addAttachClasses=[],a.top&&c.push(""+this.getClass("element-attached")+"-"+a.top),a.left&&c.push(""+this.getClass("element-attached")+"-"+a.left),b.top&&c.push(""+this.getClass("target-attached")+"-"+b.top),b.left&&c.push(""+this.getClass("target-attached")+"-"+b.left),d=[],g=0,j=f.length;g<j;g++)e=f[g],d.push(""+this.getClass("element-attached")+"-"+e);for(h=0,k=f.length;h<k;h++)e=f[h],d.push(""+this.getClass("target-attached")+"-"+e);return i(function(){if(null!=m._addAttachClasses)return z(m.element,m._addAttachClasses,d),m.options.addTargetClasses!==!1&&z(m.target,m._addAttachClasses,d),m._addAttachClasses=void 0})},a.prototype.position=function(a){var b,c,e,i,j,n,p,q,r,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T=this;if(null==a&&(a=!0),this.enabled){for(this.clearCache(),D=h(this.targetAttachment,this.attachment),this.updateAttachClasses(this.attachment,D),b=this.cache("element-bounds",function(){return l(T.element)}),I=b.width,e=b.height,0===I&&0===e&&null!=this.lastSize?(N=this.lastSize,I=N.width,e=N.height):this.lastSize={width:I,height:e},G=F=this.cache("target-bounds",function(){return T.getTargetBounds()}),r=s(g(this.attachment),{width:I,height:e}),E=s(g(D),G),j=s(this.offset,{width:I,height:e}),n=s(this.targetOffset,G),r=f(r,j),E=f(E,n),i=F.left+E.left-r.left,H=F.top+E.top-r.top,O=d.modules,J=0,L=O.length;J<L;J++){if(p=O[J],y=p.position.call(this,{left:i,top:H,targetAttachment:D,targetPos:F,attachment:this.attachment,elementPos:b,offset:r,targetOffset:E,manualOffset:j,manualTargetOffset:n,scrollbarSize:B}),y===!1)return!1;null!=y&&"object"==typeof y&&(H=y.top,i=y.left)}if(q={page:{top:H,left:i},viewport:{top:H-pageYOffset,bottom:pageYOffset-H-e+innerHeight,left:i-pageXOffset,right:pageXOffset-i-I+innerWidth}},document.body.scrollWidth>window.innerWidth&&(B=this.cache("scrollbar-size",o),q.viewport.bottom-=B.height),document.body.scrollHeight>window.innerHeight&&(B=this.cache("scrollbar-size",o),q.viewport.right-=B.width),(""!==(P=document.body.style.position)&&"static"!==P||""!==(Q=document.body.parentElement.style.position)&&"static"!==Q)&&(q.page.bottom=document.body.scrollHeight-H-e,q.page.right=document.body.scrollWidth-i-I),(null!=(R=this.options.optimizations)?R.moveElement:void 0)!==!1&&null==this.targetModifier){for(u=this.cache("target-offsetparent",function(){return m(T.target)}),x=this.cache("target-offsetparent-bounds",function(){return l(u)}),w=getComputedStyle(u),c=getComputedStyle(this.element),v=x,t={},S=["Top","Left","Bottom","Right"],K=0,M=S.length;K<M;K++)C=S[K],t[C.toLowerCase()]=parseFloat(w["border"+C+"Width"]);x.right=document.body.scrollWidth-x.left-v.width+t.right,x.bottom=document.body.scrollHeight-x.top-v.height+t.bottom,q.page.top>=x.top+t.top&&q.page.bottom>=x.bottom&&q.page.left>=x.left+t.left&&q.page.right>=x.right&&(A=u.scrollTop,z=u.scrollLeft,q.offset={top:q.page.top-x.top+A-t.top,left:q.page.left-x.left+z-t.left})}return this.move(q),this.history.unshift(q),this.history.length>3&&this.history.pop(),a&&k(),!0}},a.prototype.move=function(a){var b,c,d,e,f,g,h,k,l,n,o,p,q,r,s,t,u,v=this;if(null!=this.element.parentNode){k={};for(n in a){k[n]={};for(e in a[n]){for(d=!1,t=this.history,r=0,s=t.length;r<s;r++)if(h=t[r],!A(null!=(u=h[n])?u[e]:void 0,a[n][e])){d=!0;break}d||(k[n][e]=!0)}}b={top:"",left:"",right:"",bottom:""},l=function(a,c){var d,e,f;return(null!=(f=v.options.optimizations)?f.gpu:void 0)===!1?(a.top?b.top=""+c.top+"px":b.bottom=""+c.bottom+"px",a.left?b.left=""+c.left+"px":b.right=""+c.right+"px"):(a.top?(b.top=0,e=c.top):(b.bottom=0,e=-c.bottom),a.left?(b.left=0,d=c.left):(b.right=0,d=-c.right),b[y]="translateX("+Math.round(d)+"px) translateY("+Math.round(e)+"px)","msTransform"!==y?b[y]+=" translateZ(0)":void 0)},f=!1,(k.page.top||k.page.bottom)&&(k.page.left||k.page.right)?(b.position="absolute",l(k.page,a.page)):(k.viewport.top||k.viewport.bottom)&&(k.viewport.left||k.viewport.right)?(b.position="fixed",l(k.viewport,a.viewport)):null!=k.offset&&k.offset.top&&k.offset.left?(b.position="absolute",g=this.cache("target-offsetparent",function(){return m(v.target)}),m(this.element)!==g&&i(function(){return v.element.parentNode.removeChild(v.element),g.appendChild(v.element)}),l(k.offset,a.offset),f=!0):(b.position="absolute",l({top:!0,left:!0},a.page)),f||"BODY"===this.element.parentNode.tagName||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element)),q={},p=!1;for(e in b)o=b[e],c=this.element.style[e],""===c||""===o||"top"!==e&&"left"!==e&&"bottom"!==e&&"right"!==e||(c=parseFloat(c),o=parseFloat(o)),c!==o&&(p=!0,q[e]=b[e]);return p?i(function(){return j(v.element.style,q)}):void 0}},a}(),d.position=v,this.Tether=j(B,d)}.call(this),Namespace("Imgur.Store.AlbumImage"),Imgur.Store.AlbumImage=Class.extend({init:function(){this._={posts:{},pendingRequestUrl:null}},getImages:function(a){return this._.posts[a]?this._.posts[a]:null},setImages:function(a,b){this._.posts[a]=b},deleteImage:function(a,b){var c=this._.posts[a],d=c.images.indexOf(b);d!=-1&&(c.count--,c.images.splice(d,1))},fetchImages:function(a,b){var c="/ajaxalbums/getimages/"+a+"/hit.json";this._.pendingRequestUrl!=c&&(this._.pendingRequestUrl=c,$.getJSON(c,_.bind(function(c){null!=c&&"success"in c&&c.success&&(this._.posts[a]=c.data,this._.pendingRequestUrl=null,"function"==typeof b&&b(c.data))},this)).fail(_.bind(function(){this._.pendingRequestUrl=null},this)))}}),Namespace("Imgur.Upload"),Imgur.Upload=React.createClass({displayName:"UploadGlobal",propTypes:{emitter:React.PropTypes.object,instance:React.PropTypes.string.isRequired,host:React.PropTypes.string.isRequired,hash:React.PropTypes.string,datetime:React.PropTypes.string,images:React.PropTypes.object,historyBackOnModalClose:React.PropTypes.bool},TOAST_LEVELS:{INFO:"info",ERROR:"error"},DEFAULT_TOAST_TIMEOUTS:5e3,ACCEPTED_EXTENSIONS:".jpg,.jpeg,.png,.gif,.apng,.tiff,.tif,.bmp,.pdf,.xcf,.webp",PREVIEW_EXTENSIONS:[".jpg",".jpeg",".png",".gif",".bmp"],PREVIEW_SIZE_LIMIT:5242880,UPLOAD_ATTEMPT_LIMIT:3,CHECK_CAPTCHA_PATH:"/upload/checkcaptcha",UPLOAD_PATH:"/upload",MODAL_ANIMATION_ENTER_TIMEOUT:100,MODAL_ANIMATION_LEAVE_TIMEOUT:300,POST_ANIMATION_ENTER_TIMEOUT:600,uploadIndex:0,loadedScriptCount:0,uploadIntentFired:!1,totalUploads:0,virtualStore:Class.extend({getImages:function(){return this.data},setImages:function(a,b){this.data=b},fetchImages:function(){},deleteImage:function(a,b){var c=this.data.images.map(function(a){return a.hash}).indexOf(b);c!=-1&&(this.data.count--,this.data.images.splice(c,1))}}),getInitialState:function(){var a=new this.virtualStore;return this.props.images?a.setImages(null,this.props.images):a.setImages(null,{count:0,images:[]}),{hash:this.props.hash||null,deletehash:this.props.deletehash||null,uploadStore:a,datetime:this.props.datetime||null,display:!0,toasts:[],showingModal:this.props.initiallyShowingModal,showAddExistingImage:!1,uploadComplete:"global"!==this.props.instance,creatingPost:!1,published:"album"==this.props.instance&&Imgur.Environment.inGallery}},componentDidMount:function(){this.el={$body:$("body"),$topBar:$("#topbar"),$topBarUploadButton:$("#topbar .upload-button,#topbar .upload-subitem"),$accountUploadButton:$(".account-upload-button"),$cta:$("#cta-container-placeholder"),$existingContent:$("#content,#inside,#upload-album,.content-container-upload-remove,.message-container"),$ads:null,$dropLayer:$("#drop-layer"),$newMemeButton:$("#new-meme-button"),$allPageUploadProgress:$(".all-page-upload-progress")};var a=this.props.instance;this.bypassPostRendering="all_page"==a||this.isMemeGen();var b=this;if("global"===a&&this.el.$topBarUploadButton.on("click.globalupload",function(a){a.preventDefault(),b.analyticsIntent($(this).hasClass("upload-button")?"topNav":"uploadImagesDropdown"),b.showModal()}),"all_page"===a&&this.el.$accountUploadButton.click(this.showModal.bind(null,!1)),this.isMemeGen()&&this.el.$newMemeButton.click(this.showModal.bind(null,!1)),this.props.initiallyShowingModal&&(this.analyticsIntent("topNav"),this.showModal()),this.isMemeGen()||"album"===a||"all_page"===a||"global"===a&&this.props.has_access===!1){document.addEventListener("paste",_.throttle(this.handlePaste,500)),document.addEventListener("drop",this.handleDragDrop);var c=document.getElementById("drop-layer");c&&c.addEventListener("dragleave",this.hideDropLayer),document.addEventListener("dragstart",this.handleDragStart),document.addEventListener("dragend",this.handleDragEnd),document.addEventListener("dragover",this.handleDragOver),document.addEventListener("keyup",this.handleKeyUp)}this.checkCaptchaEndpoint="//"+this.props.host+this.CHECK_CAPTCHA_PATH,this.uploadEndpoint="//"+this.props.host+this.UPLOAD_PATH;var d=function(){var a=this.refs["total-upload-progress"];if(a){var b=window.ReactDOM||window.React,c=b.findDOMNode(a);$(window).scrollTop()>50?(c.style.position="fixed",c.style.top="0",c.style.height="3px",c.style.boxShadow="0 0 5px 4px rgba(57, 196, 66, 0.4)"):(c.style.position="absolute",c.style.top="50px",c.style.height="1px",c.style.boxShadow="0 0 5px 4px rgba(57, 196, 66, 0.3)")}}.bind(this);$(window).on("scroll",_.throttle(d,50))},showUploadNotice:function(a){var b=a+" image"+(1===a?"":"s")+" saved",c=document.getElementById("FlipInfo-Container");c&&ReactDOM.render(React.createElement(Imgur.Elements.FlipInfo,{message:b}),c)},shouldComponentUpdate:function(a,b){return b.showAddExistingImage&&!this.state.showAddExistingImage?this.showExistingImageDialog():!b.showAddExistingImage&&this.state.showAddExistingImage&&$.colorbox.close(),!0},showExistingImageDialog:function(){var a="AddExistingImage-Colorbox";$.colorbox({href:"<div id="+a+"></div>",open:!0,inline:!0,top:"15%",transition:"none",scrolling:!1,width:655,className:"blurbox",title:"Your Images",onComplete:function(){ReactDOM.render(React.createElement(Imgur.Upload.AddExistingImage,{selectSingle:this.isMemeGen(),album:0,handleDone:this.closeAddExistingImageDialog}),document.getElementById(a),$.colorbox.resize)}.bind(this),onCleanup:function(){this.setState({showAddExistingImage:!1})}.bind(this)})},isMemeGen:function(){return"memegen"===this.props.instance},componentDidUpdate:function(){if("pasting-your-image"==humanMsg.msgType&&(humanMsg.msgType=null,humanMsg.removeMsg()),"all_page"==this.props.instance){var a=this.getUploadingCount();a?this.el.$allPageUploadProgress.removeClass("nodisplay").text(a+" image"+(a>1?"s":"")+" uploading..."):this.el.$allPageUploadProgress.addClass("nodisplay")}},targetIsInputField:function(a){var b=a.target,c=b.parentNode,d=b&&b.tagName&&b.tagName.toLowerCase();if("textarea"===d||"input"===d)return!0;window.ReactDOM||window.React;return!(!c||!c.getAttribute("contenteditable"))||"account-bio"==b.id},handleKeyUp:function(a){if(!this.targetIsInputField(a)){var b=192,c=27;if(!(a.metaKey||a.ctrlKey||a.shiftKey||a.altKey))switch(a.keyCode){case b:this.analyticsIntent("tilde"),this.showModal();break;case c:this.blur(!1,{showAddExistingImage:!1})}}},addToast:function(a){var b=a.timeout||this.DEFAULT_TOAST_TIMEOUTS,c=a.id=Date.now();this.state.toasts.push(a),this.setState({toasts:this.state.toasts}),setTimeout(function(){fitleredToasts=this.state.toasts.filter(function(a){return a.id!==c}),this.setState({toasts:fitleredToasts})}.bind(this),b)},showCaptcha:function(){if("undefined"==typeof grecaptcha)$.getScript("https://www.google.com/recaptcha/api.js?render=explicit",function(){this.showCaptcha.apply(this,arguments)}.bind(this));else{if(this.showingCaptcha)return;this.showingCaptcha=!0,$.colorbox({html:'<div id="upload-global-captcha"></div>',top:"15%",width:"480px",height:"200px",transition:"none",overlayClose:!1,escKey:!1,className:"blurbox",title:"Just making sure you're not a robot",onComplete:function(){grecaptcha.render("upload-global-captcha",{sitekey:Imgur.Environment.recaptcha_key,theme:"dark",callback:function(a){$.colorbox.close(),this.captchaResponse=a,this.checkUploadsLimits()}.bind(this)})}.bind(this),onCleanup:function(){this.showingCaptcha=!1}.bind(this)})}},blur:function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c={showingModal:a};c=_.assign(c,b),this.setState(c)},blurInvokedByUser:function(){this.uploadIntentFired=!1,this.blur(!1)},showModal:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state.showAddExistingImage||(this.blur(!0),this.setState({showingModal:!0,dropTargetOnly:a}),Imgur.GalleryBundleLoaded||this.bypassPostRendering||this.loadScripts())},loadScripts:_.once(function(){if(!Imgur.GalleryBundleLoaded){var a=Imgur.Environment.galleryScripts.length,b=function(){return this.loadedScriptCount==a?void this.forceUpdate():(this.loadedScriptCount+=1,void $.ajax({url:Imgur.Environment.galleryScripts.shift(),dataType:"script",success:b,error:b}))}.bind(this);b(),Imgur.Environment.galleryCSS.forEach(function(a){$("head").append('<link type="text/css" rel="stylesheet" href="'+a+'" />')})}}),addImage:function(a){this.uploadIndex=a,this.showModal()},showDropLayer:_.debounce(function(){this.el.$dropLayer.css({display:"block"}),this.showModal(!0)},100,!0),hideDropLayer:function(){this.blur(!1),this.el.$dropLayer.css({display:"none"})},handleDragStart:function(a){this.ignoreDrag=!0},handleDragEnd:function(a){this.ignoreDrag=!1},handleDragOver:function(a){if(!a.dataTransfer.types)return!0;if(this.ignoreDrag)return!0;var b=Array.prototype.slice.call(a.dataTransfer.types);return b.indexOf("Files")===-1&&b.indexOf("text/uri-list")===-1||(a.preventDefault(),this.analyticsIntent("drag"),this.showDropLayer(),!1)},analyticsIntent:function(a){this.uploadIntentFired||(Imgur.Util.jafoLog({event:"uploadIntent",meta:{method:a}}),this.uploadIntentFired=!0)},analyticsImgIntent:function(a){Imgur.Util.jafoLog({event:"uploadImgIntent",meta:{method:a}})},handleDragDrop:function(a){if(!this.ignoreDrag){if(this.analyticsImgIntent("drag"),a.preventDefault(),this.el.$dropLayer.css({display:"none"}),!a.dataTransfer)return!1;var b=a.dataTransfer.getData("text/uri-list");if(b)return void this.handleURL(b);var c=this.state.uploadStore.getImages();this.queueLength=this.queueLength||c.images.length;var d=a.dataTransfer.items||a.dataTransfer.files;return this.loadItems(d),!1}},loadItems:function(a){var b=this;this.queueLength+=a.length,_.each(a,function(a){return b.loadItem(a)})},loadItem:function(a){var b=void 0;return(b=a.isFile||a.isDirectory?a:a.getAsEntry?a.getAsEntry():a.webkitGetAsEntry&&a.webkitGetAsEntry())?void this.handleEntry(b):"function"==typeof a.getAsFile?(this.handleFile(a.getAsFile(),this.uploadIndex),void this.uploadIndex++):File&&a instanceof File?(this.handleFile(a,this.uploadIndex),void this.uploadIndex++):void this.queueLength--},handleEntry:function(a){var b=this;if(a.isFile){var c=this.uploadIndex;return a.file(function(a){return b.handleFile(a,c)},function(a){return console.warn(a)}),void this.uploadIndex++}a.isDirectory&&a.createReader().readEntries(function(a){b.queueLength--,b.loadItems(a)},function(a){return console.warn(a)})},base64URItoBlob:function(a,b){b=b||512;for(var a=a.split(","),c=a[0].split(":")[1].split(";")[0],d=a[1],e=atob(d),f=[],g=0;g<e.length;g+=b){for(var h=e.slice(g,g+b),i=new Array(h.length),j=0;j<h.length;j++)i[j]=h.charCodeAt(j);var k=new Uint8Array(i);f.push(k)}var l=new Blob(f,{type:c});return l},handlePaste:function(a){var b=this;if(!this.targetIsInputField(a)){this.queueLength=this.queueLength||this.state.uploadStore.getImages().images.length;var c=!1,d=a.clipboardData.items;_.find(d,function(a){return"file"===a.kind})?_.each(d,function(a){a.type.indexOf("image")!==-1&&(b.queueLength++,humanMsg.msgType="pasting-your-image",humanMsg.displayMsg("Pasting your image...",null,null,!0),b.analyticsIntent("pasteImage"),b.analyticsImgIntent("pasteImage"),b.loadItem(a),c=!0)}):_.each(d,function(a){return a.getAsString(b.handleURL)}),c&&this.state.hash&&this.blur(!1)}},handleURL:function(a){if(this.analyticsIntent("url"),this.analyticsImgIntent("url"),"data:"==a.substr(0,5)){var b=this.base64URItoBlob(a);return this.handleFile(b,this.uploadIndex),void this.uploadIndex++}var c=this.state.uploadStore.getImages(),d=/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*\.?(jpe?g|gif|a?png|tiff?|bmp|pdf|xcf|webp))?(?:\?([^#]*))?(?:#(.*))?/,e=a.match(d)[4];e=e?"."+e.toLowerCase():".jpg";var f=new Image;f.onload=function(){var b=_.merge(this.getBaseImageObject(),{file:null,ext:e,externalURL:a,blobURL:a,reactKey:a+Date.now(),name:a,size:0,type:null,width:f.width,height:f.height,captchaSuccess:!1});c.images.splice(this.uploadIndex,0,b),c.count+=1,this.renderBackendPost()}.bind(this),f.onerror=function(){this.blur(!1),humanMsg.displayMsg("URL Failed to Upload","error-msg")}.bind(this),f.src=a},handleFileList:function(a){var b=a.target.files;this.analyticsImgIntent("browse");var c=this.state.uploadStore.getImages();this.queueLength=(this.queueLength||c.images.length)+b.length;for(var d=0;d<b.length;d++)this.handleFile(b[d],this.uploadIndex),this.uploadIndex++},handleAddExistingImage:function(){return Imgur.Environment.auth.url?void this.blur(!1,{showAddExistingImage:!0}):void Imgur.getInstance().signin("upload-modal-my-uploads",!0)},getBaseImageObject:function(){return{uploading:!0,preloaded:!1,loaded:0,datetime:moment().format("YYYY-MM-DD HH:mm:ss"),progress:0,progressText:"0%"}},handleFile:function(a,b){if(!a)return void this.queueLength--;if(a.type.indexOf("image")===-1&&a.type.indexOf("pdf")===-1&&this.queueLength--,this.state.published)return this.queueLength--,humanMsg.displayMsg("Adding images is disabled while your post is in the gallery","error-msg"),void this.blur(!1);var c=this.state.uploadStore.getImages(),d=a.name?"."+a.name.split(".").pop().toLowerCase():".jpg";if(this.PREVIEW_EXTENSIONS.indexOf(d)>-1&&a.size<=this.PREVIEW_SIZE_LIMIT){var e=new FileReader;e.onload=function(a,e){var f=new Image;f.onload=function(){var e=window.URL.createObjectURL(a),g=_.merge(this.getBaseImageObject(),{file:a,ext:d,blobURL:e,reactKey:e,name:a.name,size:a.size,type:a.type,width:f.width,height:f.height});c.images.splice(b,0,g),c.count+=1,c.images.length===this.queueLength&&this.renderBackendPost()}.bind(this),f.src=e.result}.bind(this,a,e),e.readAsDataURL(a)}else{var f=_.merge(this.getBaseImageObject(),{file:a,ext:d,blobURL:Imgur.Environment.staticUrl+"/images/large-image-placeholder.png",reactKey:Date.now(),name:a.name,size:a.size,type:a.type,width:1360,height:782});c.images.splice(b,0,f),c.count+=1,c.images.length===this.queueLength&&this.renderBackendPost()}},renderBackendPost:function(){this.uploadIndex=0,this.queueLength=null,this.state.hash?(this.blur(!1),this.prepareUpload(),this.state.display||(this.togglePage(!1),this.setState({display:!0}),history.pushState({globalUpload:!0},null,"/a/"+this.state.hash))):(this.captchaType="album",this.checkUploadsLimits())},checkUploadsLimits:function(a){var b="album"==this.captchaType&&!this.bypassPostRendering,c={total_uploads:this.getUploadingCount(),create_album:b,"g-recaptcha-response":this.captchaResponse};if(b)this.setState({creatingPost:!0});else{for(var d=this.state.uploadStore.getImages().images,e=0;e<d.length;e++)if(d[e].captchaSuccess===!1){c.url=d[e].externalURL;break}this.blur(!1)}$.ajax({method:"POST",url:this.checkCaptchaEndpoint,data:c,success:function(c){if("function"==typeof a&&a(c.data.new_album_id),1===c.data.overLimits)return void this.showCaptcha();if(!b){for(var d=this.state.uploadStore.getImages().images,e=0;e<d.length;e++)if(d[e].captchaSuccess===!1){d[e].captchaSuccess=!0;break}return void this.prepareUpload()}"global"==this.props.instance&&this.el.$topBarUploadButton.off("click.globalupload"),this.setState({hash:c.data.new_album_id,deletehash:c.data.deletehash,datetime:moment.utc().format("YYYY-MM-DD HH:mm:ss")},function(){this.prepareUpload()}),this.blur(!1),setTimeout(function(){this.togglePage(!1),this.el.$topBar.addClass("noopacity").animate({opacity:1},this.POST_ANIMATION_ENTER_TIMEOUT),this.setState({creatingPost:!1})}.bind(this),this.MODAL_ANIMATION_LEAVE_TIMEOUT);var f="/a/"+c.data.new_album_id;"upload_all"!=this.props.instance&&history.pushState({globalUpload:!0},null,f),window.addEventListener("popstate",function(a){var b=null==a.state||!a.state.globalUpload;this.togglePage(b),this.setState({display:!b})}.bind(this))}.bind(this),error:function(a){humanMsg.displayMsg("Failed to Create Post","error-msg")}.bind(this)})},togglePage:function(a){if(!this.bypassPostRendering){this.el.$cta.toggle(a),this.el.$existingContent.toggle(a),this.el.$ads=this.el.$ads||$("#div-gpt-ad-top_banner"),this.el.$ads.toggle(a);var b=Imgur.InfiniteScroll.getInstance();a?b.continueInfiniteScroll():b.stopInfiniteScroll(),this.props.emitter.trigger("blockHotKeys",!a),"undefined"!=typeof runSlots&&runSlots.clearAdRefreshTimeout()}},prepareUpload:function(){this.totalUploads=this.getUploadingCount(),this.upload()},upload:function(){var a=this.state.uploadStore.getImages();a.images.forEach(function(b,c){if(!b.hash){if(b.uploadAttempts>this.UPLOAD_ATTEMPT_LIMIT)return a.images.splice(c,1),a.count--,void this.forceUpdate();if(b.uploadAttempts=b.uploadAttempts||1,b.uploadAttempts++,b.xhr&&b.xhr.readyState!==XMLHttpRequest.DONE)return void(b.xhr.readyState==XMLHttpRequest.UNSENT&&(b.xhr.open("POST",this.uploadEndpoint),b.xhr.send(b.formData)));b.xhr=new XMLHttpRequest,b.formData=new FormData;var d="all_page"==this.props.instance;b.xhr.upload.addEventListener("progress",function(a,b){if(b.lengthComputable){var c=Math.round(100*b.loaded/b.total);a.progress=c,a.progressText=c+"%",a.loaded=b.loaded,this.forceUpdate()}}.bind(this,b),!1),b.xhr.upload.addEventListener("load",function(a,b){a.progress=null,a.progressText="Processing...",this.forceUpdate()}.bind(this,b),!1),b.xhr.onload=function(b){if(200===b.xhr.status){var c=JSON.parse(b.xhr.response);c.data&&c.data.msid&&(Imgur.Environment.sid=c.data.msid,Imgur.Environment.msid=c.data.msid);var e=this.PREVIEW_EXTENSIONS.indexOf(b.ext)==-1,f=b.size>this.PREVIEW_SIZE_LIMIT;if(b.triggerSaveTitleDesc=!0,b.uploading=!1,b.hash=c.data.hash,b.deletehash=c.data.deletehash,b.animated=c.data.animated,b.width=c.data.width,b.height=c.data.height,b.ext=c.data.ext,delete b.file,this.finishUploadIfDone(),this.isMemeGen())return void Imgur.MemeGen.getInstance().uploadFinishedCallback(c);if(b.animated)return b.needsRecalc=f,d?Imgur.Account.getInstance().addImageToThumbs(b):null,void this.forceUpdate();var g=new Image;g.onload=function(){b.preloaded=!0,b.needsRecalc=e,this.forceUpdate(),window.URL.revokeObjectURL(b.blobURL),d?Imgur.Account.getInstance().addImageToThumbs(b):null}.bind(this);var h="0"===localStorage.getItem("retina")?"g":"r";h=$.browser.mozilla?"":h;var i=d?"s":h;g.src=Imgur.Environment.cdnUrl+"/"+b.hash+i+b.ext}else 429==b.xhr.status?(a.images.forEach(function(a){a.xhr&&a.xhr.abort()}),this.captchaType="image",this.showCaptcha()):(this.addToast({level:b.uploadAttempts<=this.UPLOAD_ATTEMPT_LIMIT?this.TOAST_LEVELS.INFO:this.TOAST_LEVELS.ERROR,message:b.uploadAttempts<=this.UPLOAD_ATTEMPT_LIMIT?"Retrying Upload":"Your Image Failed to Upload"}),this.upload())}.bind(this,b),b.xhr.withCredentials=!0,b.xhr.open("POST",this.uploadEndpoint);var e=d?$("#upload-album-val").val():this.state.hash;b.formData.append("new_album_id",e),d&&b.formData.append("resize",$("#upload-album-resize-val").val()),b.externalURL?b.formData.append("url",b.externalURL):b.formData.append("Filedata",b.file),b.xhr.send(b.formData)}}.bind(this)),this.getUploadingCount()>0&&(window.onbeforeunload=function(a){return"Your images are still being uploaded."})},getTotalSize:function(){var a=this.state.uploadStore.getImages().images;return a.map(function(a){return a.uploading?a.size:0}).reduce(function(a,b){return a+b},0)},getTotalLoaded:function(){var a=this.state.uploadStore.getImages().images;return a.map(function(a){return a.uploading?a.loaded:0}).reduce(function(a,b){return a+b},0)},getUploadingCount:function(){var a=this.state.uploadStore.getImages().images;return a.map(function(a){return a.uploading?1:0}).reduce(function(a,b){return a+b},0)},finishUploadIfDone:function(){this.getUploadingCount()||(window.onbeforeunload=null,this.rearrangeImages(this.state.uploadStore.getImages(this.state.hash).images),Imgur.Util.jafoLog({event:"uploadFlowComplete"}),this.setState({uploadComplete:!0}),this.showUploadNotice(this.totalUploads),this.totalUploads=0)},rearrangeImages:function(a){if("all_page"!=this.props.instance&&!(this.getUploadingCount()||(this.rearrangeRequest&&this.rearrangeRequest.abort(),a.length<=1))){var b=a.map(function(a){return a.hash}).join(",");this.postSavingStore.add(this.state.deletehash,"rearrange"),this.rearrangeRequest=$.post("/ajaxalbums/rearrangeImages/"+this.state.hash,{order:b,msid:Imgur.Environment.msid},function(){this.postSavingStore.remove(this.state.deletehash,"rearrange"),this.state.uploadStore.setImages(this.state.hash,{count:a.length,images:a})}.bind(this))}},saveImages:function(a,b){var c=a.map(function(a){return a.hash}).join(",");return this.state.hash?void $.post("/ajaxalbums/images/"+this.state.hash,{hashes:c,change_cover:!1},b):(this.captchaType="album",void this.checkUploadsLimits(function(a){c&&$.post("/ajaxalbums/images/"+a,{hashes:c,change_cover:!1},b)}.bind(this)))},closeAddExistingImageDialog:function(a){var b=this,c=this.state.uploadStore.getImages(),d=c.images.slice(0,this.uploadIndex).concat(a).concat(c.images.slice(this.uploadIndex,c.images.length));if(!d||!d.length)return void this.setState({showAddExistingImage:!1},function(){b.props.initiallyShowingModal&&b.showModal()});if(this.isMemeGen()){var e=d[0].hash;return this.setState({showAddExistingImage:!1}),void Imgur.MemeGen.getInstance().setAccountImageFromhash(e)}this.uploadIndex=0,this.state.uploadStore.setImages(null,{count:d.length,images:d}),this.saveImages(d,function(){return b.rearrangeImages(d)}),this.setState({showAddExistingImage:!1,uploadComplete:0==this.getUploadingCount()})},render:function(){var a=React.addons.CSSTransitionGroup,b=null,c=this.getTotalLoaded()/this.getTotalSize()*100,d=this.getUploadingCount()>0,e=Imgur.GalleryBundleLoaded&&this.state.hash&&this.state.display&&!this.bypassPostRendering&&!this.state.creatingPost;if(e){var f={title:"global"==this.props.instance?"":Imgur.Environment.image.title,is_album:!0,deletehash:this.state.deletehash,hash:this.state.hash,datetime:this.state.datetime};this.postSavingStore=this.postSavingStore||new Imgur.Gallery.Store.Saving(this.props.emitter);var g=new Imgur.Tag.TagValidator(Imgur.Constants.MIN_TAG_LENGTH,Imgur.Constants.MAX_TAG_LENGTH),h=new Imgur.Gallery.Store.Tag(Imgur.Constants.MAX_TAGS_PER_POST,g,this.props.emitter),i={noNav:!0,initialImage:f,emitter:this.props.emitter,postSavingStore:this.postSavingStore,published:this.state.published,showEditTools:!0},j={data:_.extend({hash:this.state.hash,deletehash:this.state.deletehash,is_album:!0},this.props.data),emitter:this.props.emitter,initial:!1,all_loaded:!0,album_image_store:this.state.uploadStore,in_gallery:this.state.published,has_access:!0,showEditTools:!0,postSavingStore:this.postSavingStore,addImage:this.addImage,insideTagController:this.props.insideTagController,analytics:this.props.analytics||null,hide_points:!0,hide_views:!0,hide_tags:!0,hide_report:!0,linkifier:this.props.linkifier,rearrangeImages:this.rearrangeImages,tagStore:h},k={initialHash:this.state.hash,initialIsPublished:this.state.published,emitter:this.props.emitter,deletehash:this.state.deletehash,isAlbum:!0,image:f,showShareButton:this.state.uploadComplete,showRearrange:this.state.uploadStore.getImages().images.length>1,imageStore:this.state.uploadStore,privacy:this.props.privacy,showUploadModal:this.showModal.bind(this,!1),uploadStore:this.state.uploadStore,tagStore:h},l=this.state.toasts.map(function(a){return React.createElement("div",{key:"toast-"+a.id,className:"toast toast-"+a.level},React.createElement("i",{className:"icon-alert toast-"+a.level}),a.message)});b=React.createElement("div",{className:"upload-global-post"},React.createElement("div",{className:"left post-pad"},React.createElement("div",{className:"post-container"},React.createElement("div",{className:"post-header is-owner"},React.createElement(Imgur.Gallery.Header,i)),React.createElement("div",{className:"post-images is-owner"},React.createElement(Imgur.Gallery.Post,j)),React.createElement("div",{className:"post-toasts"},l))),React.createElement("div",{id:"right-content",className:"right"},React.createElement("div",{id:"post-options"},React.createElement(Imgur.PostOptions,k))))}var m=d?Math.round(c/100*100)/100:0,n={transform:"scaleX("+m+")"};return d||(n.transformOrigin="100% 100%"),React.createElement("div",{className:"upload-global-layout"},React.createElement("div",{ref:"total-upload-progress",className:"total-upload-progress",style:n}),React.createElement(a,{transitionName:"upload-modal",transitionEnterTimeout:this.MODAL_ANIMATION_ENTER_TIMEOUT,transitionLeaveTimeout:this.MODAL_ANIMATION_LEAVE_TIMEOUT},this.state.showingModal?React.createElement(Imgur.Upload.Modal,{key:"modal",handleFileList:this.handleFileList,handleAddExistingImage:this.handleAddExistingImage,handleURL:this.handleURL,blurInvokedByUser:this.blurInvokedByUser,dropTargetOnly:this.state.dropTargetOnly,creatingPost:this.state.creatingPost,historyBackOnClose:this.props.historyBackOnModalClose,isNewUpload:!this.state.hash,accept:this.ACCEPTED_EXTENSIONS}):null),React.createElement(a,{transitionName:"upload-post",transitionEnterTimeout:this.POST_ANIMATION_ENTER_TIMEOUT,transitionLeave:!1},b))}}),function(){"use strict";Namespace("Imgur.Upload.AddExistingImage");var a=60;Imgur.Upload.AddExistingImage=React.createClass({displayName:"AddExistingImage",getInitialState:function(){return{currentPage:1,images:[],selectedImages:[],total:Number.MAX_VALUE}},propTypes:{album:React.PropTypes.number.isRequired,handleDone:React.PropTypes.func.isRequired,selectSingle:React.PropTypes.bool},componentDidMount:function(){this.fetchImages()},fetchImages:function(){var b=this;if(!(this.state.images.length>=this.state.total)){var c=this.state.currentPage;this.setState({currentPage:c+1},function(){$.get("/ajax/images?sort=0&order=1&album="+b.props.album+"&page="+c+"&perPage="+a,function(a){if(a.success&&a.data&&a.data.images){var c=b.state.images;b.setState({images:c.concat(a.data.images),total:a.data.count})}})})}},toggleImageSelect:function(a){var b=this.props.selectSingle?[]:this.state.selectedImages,c=b.indexOf(a);return c===-1?void this.setState({selectedImages:b.concat([a])}):void this.setState({selectedImages:b.filter(function(b){return b!==a})})},handleDone:function(){var a=this;this.props.handleDone(this.state.images.filter(function(b){return a.state.selectedImages.indexOf(b.hash)!==-1}))},render:function(){var a=this,b=this.state.images.map(function(b){var c="AddExistingImage-image";return a.state.selectedImages.indexOf(b.hash)!==-1&&(c+=" AddExistingImage-selectedImage"),React.createElement("div",{key:"existing-image-"+b.hash,className:c,onClick:_.bind(a.toggleImageSelect,a,b.hash)},React.createElement("img",{className:"AddExistingImage-imagetag",width:"90",height:"90",src:Imgur.Environment.cdnUrl+"/"+b.hash+"s.jpg"}))});return React.createElement("div",{className:"AddExistingImage"},React.createElement(Imgur.Elements.NanoScroller,{classes:"AddExistingImage-images",onScroll:_.debounce(this.fetchImages,500)},React.createElement("div",{className:"AddExistingImage-imagesContainer"},b)),React.createElement("div",{className:"AddExistingImage-buttonbar"},React.createElement("button",{className:"beta btn btn-action",onClick:this.handleDone},"Done")))}})}(),Namespace("Imgur.Dev"),Imgur.Dev.DebugVars={},Imgur.Dev.DebugVar=function(a,b){},Namespace("Imgur.Promise"),Imgur.PromiseXHR=Imgur.Emitter.extend({init:function(a){this.aborted=!1,this.doneSoFar=0,this.comparer=_.isEqual,this.tasks=[],this.jqXHRs=[],this._doAjax=a||_.bind(jQuery.ajax,jQuery),this._super()},pushAjax:function(a,b){if(this.aborted)return this;b=_.merge({success:_.noop,fail:_.noop},b);var c=_.merge(a,{success:_.bind(function(a,c,d){this.aborted||(null!=a&&"object"==typeof a&&200===a.status?(b.success(a.data),this.success()):(b.fail(d,c),this.abort(c,d)))},this),error:_.bind(function(a,c){this.aborted||(b.fail(a,c),this.abort(c,a))},this)});return this.tasks.push(c),this},start:function(){return this.aborted?this:(_.each(this.tasks,_.bind(function(a){this.jqXHRs.push(this._doAjax(a))},this)),0===this.tasks.length?this.trigger("success"):(this.trigger("beginajax"),this.trigger("progress",0)),this)},success:function(){if(this.aborted)return this;var a=++this.doneSoFar,b=this.tasks.length;return a=Math.min(b,a),b>0&&this.trigger("progress",a/b),this.doneSoFar===b&&this.trigger("success"),this},then:function(a){return this.aborted?this:(a=_.merge({success:_.noop,fail:_.noop,progress:_.noop,beginajax:_.noop},a),this.on("success",null,a.success),this.on("fail",null,a.fail),this.on("progress",null,a.progress),this.on("beginajax",null,a.beginajax),this)},abort:function(a){a=a||"aborted",this.aborted=!0,_.each(this.jqXHRs,function(a){a.abort()});var b=[a].concat(_.toArray(arguments).slice(1));return this.trigger.apply(this,["fail"].concat(b)),this.jqXHRs=[],this.trigger("progress",1),this.off(["success","fail","progress","beginajax"]),this}}),Namespace("Imgur"),Imgur.Linkifier=Class.extend({init:function(){this._={viewerOrder:[],viewers:{},grabbers:[]}},addGrabber:function(a){this._.grabbers.push(a)},addViewer:function(a,b){this._.viewers[a]=b,this._.viewerOrder.indexOf(a)===-1&&this._.viewerOrder.push(a)},prependViewer:function(a,b){this._.viewers[a]=b,this._.viewerOrder.indexOf(a)===-1&&this._.viewerOrder.unshift(a)},prependGrabber:function(a){this._.grabbers.unshift(a)},grab:function(a){for(var b=[],c=0,d=this._.grabbers[c];c<this._.grabbers.length;c++,d=this._.grabbers[c]){var e=d.scan(a);if(e!==!1)for(var f=0;f<e.length;f++){var g=a.substr(e[f].begin,e[f].end-e[f].begin+1);b.push({scan:e[f],grabbed:g,replaced:d.grab(g),priority:c})}}b.sort(function(a,b){return a.scan.begin<b.scan.begin?-1:a.scan.begin>b.scan.begin?1:a.scan.end>b.scan.end?-1:a.scan.end<b.scan.end?1:a.priority<b.priority?-1:a.priority>b.priority?1:0});for(var h={},c=0;c<b.length;c++){var e=b[c].scan;if(b.length>c+1)for(var f=1;f<b.length-c;f++){var i=b[c+f].scan,j=!1;j=j||i.begin>=e.begin&&i.begin<=e.end,j=j||i.end>=e.begin&&i.end<=e.end,j&&(h[c+f]=!0)}}var k=_.map(Object.keys(h),Number);k.sort(function(a,b){return a<b?-1:a>b?1:0});for(var c=0;c<k.length;c++)b.splice(k[c]-c,1);var l={},m=[];if(b.length){var n=a.substr(0,b[0].scan.begin);n.length&&m.push(React.DOM.span({key:"prefix"+n},n));for(var c=0;c<b.length;c++){var e=b[c].scan,o=b[c].replaced;if(c>0){var p=b[c-1].scan,q=a.substr(p.end+1,e.begin-1-p.end);q.length&&m.push(React.DOM.span({key:"before"+c},q))}var r={href:o.href.replace(/^https:/,""),target:"_blank",key:"link"+c};o.rel&&(r.rel=o.rel),m.push(React.DOM.a(r,o.text))}var s=a.substr(b[b.length-1].scan.end+1);s.length&&m.push(React.DOM.span({key:"suffix"+s},s)),l.className="linkified"}else m.push(React.DOM.span({key:a},a));return React.DOM.span(l,m)},attach:function(a){$(a).on("click","a",_.partial(this._handleLinkClicked,this)),$(a).on("mouseover","a",_.partial(this._handleLinkHovered,this,!0)),$(a).on("mouseout","a",_.partial(this._handleLinkHovered,this,!1))},attachDelegate:function(a){$(a).on("click","span.linkified a",_.partial(this._handleLinkClicked,this)),$(a).on("mouseover","span.linkified a",_.partial(this._handleLinkHovered,this,!0)),$(a).on("mouseout","span.linkified a",_.partial(this._handleLinkHovered,this,!1))},_handleLinkClicked:function(a,b){for(var c=$(this).attr("href"),d=0,e=a._.viewerOrder[d];d<a._.viewerOrder.length;d++,e=a._.viewerOrder[d]){var f=a._.viewers[e];if(f.canView(b,c))return void f.dispatch(b,c,$(this))}},_handleLinkHovered:function(a,b,c){for(var d=$(this).attr("href"),e=0,f=a._.viewerOrder[e];e<a._.viewerOrder.length;e++,f=a._.viewerOrder[e]){var g=a._.viewers[f];if(g.canHover(d,$(this)))return void(b?g.hoverover(c,d,$(this)):g.hoverout(c,d,$(this)))}}}),Namespace("Imgur.Linkify"),Imgur.Linkify.UsernameGrabber=Class.extend({REGEX:/(?:^|[^A-z0-9])@([A-z0-9]{4,})/g,scan:function(a){for(var b=null,c=[];null!==(b=this.REGEX.exec(a));){var d=b.index,e=b.index+b[1].length;"@"!==b[0][0]&&(d++,e++),c.push({begin:d,end:e})}return c},grab:function(a){var b=a.substr(1);return{href:"/user/"+b,text:a}}}),Namespace("Imgur.Linkify"),Imgur.Linkify.HashtagGrabber=Class.extend({scan:function(a){for(var b,c=[];null!==(b=Imgur.Util.hashtagRegex.exec(a));){var d=b.index,e=b.index+b[0].length-1;c.push({begin:d,end:e})}return c},grab:function(a){var b=a.substr(1);return{href:"/t/"+b,text:a}}}),Namespace("Imgur.Linkify"),Imgur.Linkify.OpGrabber=Class.extend({init:function(a){this._={currentOp:null},a.on("beforeComments",this,this.handleImageChange),a.on("select",this,this.handleImageChange)},REGEX:/(?:^|[^A-z0-9])@([A-z0-9]{4,}|op(?=([^A-z0-9]|$)))/gi,scan:function(a){var b=null,c=[];if(!this._.currentOp)return c;for(;null!==(b=this.REGEX.exec(a));){var d=b.index,e=b.index+b[1].length;"@"!==b[0][0]&&(d++,e++),c.push({begin:d,end:e})}return c},handleImageChange:function(a){this._.currentOp=a&&a.account_url?a.account_url:null},grab:function(a){return{href:"/user/"+this._.currentOp,text:a}}}),Namespace("Imgur.Linkify"),Imgur.Linkify.PlainGrabber=Class.extend({scan:function(a){for(var b=/(https?:\/\/(((\w|\.)+)(\/)?([^.\"!\s]+((\.(jpe?g|gif|png)))?))+[^.,?&\/\"\'\!\:\s])/gi,c=null,d=[];null!==(c=b.exec(a));)d.push({begin:c.index,end:c.index+c[0].length-1});return d},grab:function(a){var b={};return b.href=b.text=a,0>a.indexOf(Imgur.Environment.host)&&(b.rel="noreferrer nofollow"),b}}),Namespace("Imgur.Linkify"),Imgur.Linkify.AlbumImageGrabber=Class.extend({scan:function(a){for(var b=/(#[0-9]+)/g,c=null,d=[];null!==(c=b.exec(a));)d.push({begin:c.index,end:c.index+c[0].length-1});return d},grab:function(a){a.substr(1);return{href:a,text:a}}}),Namespace("Imgur.Linkify"),Imgur.Linkify.ImgurGrabber=Class.extend({init:function(a,b){this._={REGEX:new RegExp("(?:https?:)?//(?:www.|img.|i.)?"+Imgur.Util.escapeRegex(a)+"/(?!gallery)(?!contact)(?!random)(?!rules)([A-z0-9]{5,7})(.(?:gif|png|jpe?g))?","g"),REGEX_SINGLE:new RegExp("(?:https?:)?//(?:www.|img.|i.)?"+Imgur.Util.escapeRegex(a)+"/(?!gallery)(?!contact)(?!random)(?!rules)([A-z0-9]{5,7})(.(?:gif|png|jpe?g))?"),cdnUrl:b}},scan:function(a){for(var b=null,c=[];null!==(b=this._.REGEX.exec(a));)c.push({begin:b.index,end:b.index+b[0].length-1});return c},grab:function(a){var b=this._.REGEX_SINGLE.exec(a),c=b[1],d=b[2]?b[2]:".jpg";return{href:this._.cdnUrl+"/"+c+d,text:a}}}),Namespace("Imgur.Linkify"),Imgur.Linkify.YoutubeViewer=Class.extend({REGEX:new RegExp("^(?:https?:)?//(?:www\\.)?(?:youtube\\.com\\/watch\\?v=([A-z0-9-]+)|youtu\\.be\\/([A-z0-9-]+))"),canView:function(a,b){return!a.ctrlKey&&!a.metaKey&&!a.altKey&&!a.shiftKey&&b.match(this.REGEX)},canHover:function(a){return!1},dispatch:function(a,b,c){a.preventDefault();var d=this.REGEX.exec(b),e=d[1]||d[2];c.colorbox({href:"//www.youtube.com/embed/"+e+"?autoplay=1",transition:"none",className:"noHeader",fixed:!0,width:"600px",height:"400px",iframe:!0,scrolling:!1})}}),Namespace("Imgur.Linkify"),Imgur.Linkify.Html5VideoViewer=Class.extend({REGEX:new RegExp("^(?:https?:)?//.*.(mp4|webm)$"),init:function(){this._={heightCache:{}}},canView:function(a,b){return!a.ctrlKey&&!a.metaKey&&!a.altKey&&!a.shiftKey&&b.match(this.REGEX)},canHover:function(a){return a.match(this.REGEX)},hoverover:function(a,b,c){var d,e=this.REGEX.exec(b),f=e[1];if(this._.heightCache.hasOwnProperty(b)){if(d=String(this._.heightCache[b])+"px",c.data("tipsy")){var g=c.data("tipsy").$tip;g.remove(),c.data("tipsy",null)}}else d="0px";var h='<video style="max-width: 250px; height: '+d+'; max-height: 250px;" loop autoplay muted><source type="video/'+Imgur.Util.htmlEntity(f)+'" src="'+Imgur.Util.htmlEntity(b)+'" /></video>';c.tipsy({gravity:$.fn.tipsy.autoNS,title:function(){return h},html:!0,opacity:1,offset:2,trigger:"manual"}),c.tipsy("show");var i=c.data("tipsy").$tip.find("video");this._.heightCache.hasOwnProperty(b)||i.one("timeupdate",_.bind(function(a){i.css("height","auto"),a.target.clientHeight>0&&(this._.heightCache[b]=a.target.clientHeight),this.hoverover(a,b,c)},this))},hoverout:function(a,b,c){$(".tipsy").remove()},dispatch:function(a,b,c){a.preventDefault();var d=this.REGEX.exec(b),e=d[1],f=$('<video loop id="videocbox"><source type="video/'+Imgur.Util.htmlEntity(e)+'" src="'+Imgur.Util.htmlEntity(b)+'" /></video>');f[0].onloadedmetadata=function(a){var b=f[0].videoWidth,d=f[0].videoHeight;c.colorbox.resize({innerWidth:b,innerHeight:d}),f[0].play()},c.colorbox({html:f,className:"noHeader",scrolling:!1,fixed:!0})}}),Namespace("Imgur.Linkify"),Imgur.Linkify.ImageViewer=Class.extend({REGEX:new RegExp("^(?:https?:)?//.*.(jpe?g|gif|png)(?:[?#].*)?$"),init:function(){this._={currentTipsy:null}},canView:function(a,b){return!a.ctrlKey&&!a.metaKey&&!a.altKey&&!a.shiftKey&&b.match(this.REGEX)},canHover:function(a){return a.match(this.REGEX)},hoverout:function(a,b,c){null!==this._.currentTipsy&&(this._.currentTipsy.abort(),this._.currentTipsy=null),$(".tipsy").remove()},hoverover:function(a,b,c){this._.currentTipsy=new Imgur.Linkify.Tipsy(c,b),this._.currentTipsy.load()},dispatch:function(a,b,c){a.preventDefault(),c.colorbox({initialHeight:240,initialWidth:320,maxWidth:"95%",maxHeight:"95%",className:"noHeader",scalePhotos:!0,photo:!0,fixed:!0,transition:"elastic",scrolling:!1,onOpen:function(){$(".tipsy").remove()},onComplete:function(){$(".tipsy").remove()}})}}),Namespace("Imgur.Linkify"),Imgur.Linkify.ImgurViewer=Class.extend({init:function(){this._={currentTipsy:null,REGEX:new RegExp(Imgur.Util.escapeRegex(Imgur.Environment.cdnUrl)+"/(?!gallery)(?!random)([A-z0-9]{5,7})(?!.gifv)","g")}},canView:function(a,b){return!a.ctrlKey&&!a.metaKey&&!a.altKey&&!a.shiftKey&&b.match(this._.REGEX)},canHover:function(a){return!1},hoverout:function(a,b,c){},hoverover:function(a,b,c){},dispatch:function(a,b,c){var d=this._.REGEX.exec(b)[1];c.colorbox({initialHeight:240,initialWidth:320,maxWidth:"95%",maxHeight:"95%",className:"noHeader",scalePhotos:!0,photo:!0,fixed:!0,transition:"elastic",scrolling:!1,onOpen:function(){$(".tipsy").remove()},onComplete:function(){$(".tipsy,#favorite-bar").remove(),$.getJSON("/ajax/favorited/"+d,_.bind(Imgur.getInstance().appendFavoriteBar,Imgur.getInstance(),d,b))},onClosed:function(){$(".tipsy,#favorite-bar").remove()}})}}),Namespace("Imgur.Linkify"),Imgur.Linkify.ImgurGifvViewer=Class.extend({init:function(a){this._={REGEX:new RegExp(Imgur.Util.escapeRegex(Imgur.Environment.cdnUrl)+"/(?!gallery)(?!random)([A-z0-9]{5,7}).gifv"),html5viewer:a}},canView:function(a,b){return!a.ctrlKey&&!a.metaKey&&!a.altKey&&!a.shiftKey&&b.match(this._.REGEX)},canHover:function(a){return a.match(this._.REGEX)},hoverout:function(a,b,c){this._.html5viewer.hoverout(a,b.replace(/\.gifv$/,".mp4"),c)},hoverover:function(a,b,c){this._.html5viewer.hoverover(a,b.replace(/\.gifv$/,".mp4"),c)},dispatch:function(a,b,c){var d=this._.REGEX.exec(b)[1];this._.html5viewer.dispatch(a,b.replace(/\.gifv$/,".mp4"),c),c.colorbox({initialHeight:240,initialWidth:320,maxWidth:"95%",maxHeight:"95%",className:"noHeader",scalePhotos:!0,photo:!0,fixed:!0,transition:"elastic",scrolling:!1,onOpen:function(){$(".tipsy").remove()},onComplete:function(){$(".tipsy,#favorite-bar").remove(),$.getJSON("/ajax/favorited/"+d,_.bind(Imgur.getInstance().appendFavoriteBar,Imgur.getInstance(),d,b))},onClosed:function(){$(".tipsy,#favorite-bar").remove()}})}}),Namespace("Imgur.Linkify"),Imgur.Linkify.Tipsy=Class.extend({init:function(a,b){this._={state:void 0,img:null,$el:a,href:b,overrideHtml:null}},STATE:{LOADING:1,LOADED:2,ERROR:3,ABORTED:4,OVERRIDDEN:5},abort:function(){this._.state=this.STATE.ABORTED,this._.img&&(this._.img.onload=function(){},this._.img.onerror=function(){}),this._.$el.tipsy("hide")},override:function(a){this._.overrideHtml=a,this._.state=this.STATE.OVERRIDDEN,this.render()},render:function(){if(this._.state!=this.STATE.ABORTED){var a="";switch(this._.state){case this.STATE.LOADED:a='<img style="max-width:100%; max-height: 300px" src="'+this._.href+'">';break;case this.STATE.LOADING:a='<img style="width: 25px;" src="//s.imgur.com/images/loaders/ddddd1_121211/48.gif">';break;case this.STATE.ERROR:a="<div>Image could not be loaded</div>";break;case this.STATE.OVERRIDDEN:a=this._.overrideHtml}void 0!==this._.$el.data("tipsy")&&(this._.$el.data("tipsy").$tip.remove(),this._.$el.removeData("tipsy")),this._.$el.tipsy({delayIn:200,gravity:$.fn.tipsy.autoNS,title:function(){return a},html:!0,opacity:1,offset:2,trigger:"manual"}),this._.$el.tipsy("show")}},load:function(){this._.img=new Image,this._.img.src=this._.href,this._.img.complete?this._.state=this.STATE.LOADED:(this._.state=this.STATE.LOADING,this._.img.onerror=_.bind(function(){this._.state!==this.STATE.ABORTED&&(this._.state=this.STATE.ERROR,this.render())},this),this._.img.onload=_.bind(function(){this._.state!==this.STATE.ABORTED&&(this._.state=this.STATE.LOADED,this.render())},this)),this.render(),this._.img=null}}),Namespace("Imgur.Linkify"),Imgur.Linkify.AlbumImageViewer=Class.extend({init:function(a){this._={hash:a,pendingRef:null}},handleUpdatedImage:function(a){this._.abortedHash=this._.hash,this._.hash=a.hash},canView:function(a){return!1},canHover:function(a){return!!a.match(/#\d+/)},hoverover:function(a,b,c){if(b.match(/#\d+/)){var d=b.replace("#",""),e=this._.hash,f=$.ajax({url:"/gallery/action/image/"+e,type:"GET",data:{order:d},success:_.bind(function(a){this._.abortedHash!==e&&a.data&&a.data.url&&a.data.hash&&(c.attr("href",a.data.url),c.trigger("mouseover"))},this)});this._.pendingRef=f,this._.abortedHash=null}},hoverout:function(){this._.pendingRef&&this._.pendingRef.abort(),this._.abortedHash=this._.hash},dispatch:function(a,b,c){a.preventDefault(),c.colorbox({initialHeight:240,initialWidth:320,maxWidth:"95%",maxHeight:"95%",className:"noHeader",scalePhotos:!0,photo:!0,fixed:!0,transition:"elastic",scrolling:!1,onOpen:function(){$(".tipsy").remove()},onComplete:function(){$(".tipsy").remove()}})}}),Namespace("Imgur.Linkify"),Imgur.Linkify.NSFWViewer=Class.extend({init:function(a){this._={captions:a}},canView:function(){return!1},canHover:function(a,b){if(b.closest(".comment").length){var c=Number(b.closest(".caption").attr("data-id"));if(this._.captions.isCaptionOrItsSubtreeNSFW(c))return!0}return!1},hoverout:function(a,b,c){$(".tipsy").remove()},hoverover:function(a,b,c){c.tipsy({gravity:$.fn.tipsy.autoNS,title:function(){return"<div>nsfw link</div>"},html:!0,opacity:1,offset:2,trigger:"manual"}),c.tipsy("show")}}),Namespace("Imgur.Element"),Imgur.Element.CommandLocation=Class.extend({handleCommand:function(a){setTimeout(function(){window.location=a},50)},handleRefreshCommand:function(){setTimeout(function(){window.location=window.location.href},50)}}),Namespace("Imgur.Search.Store"),Imgur.Search.Store.Suggestions=Class.extend({init:function(a,b){this._={emitter:a,cacheRetention:10,lastQueries:b?[b]:[],suggestions:{}}},getQuery:function(){return 0==this._.lastQueries.length?"":this._.lastQueries[0]},haveQueryData:function(a){return this._.suggestions.hasOwnProperty(a)},setQuery:function(a){for(this._.lastQueries.unshift(a);this._.lastQueries.length>Math.abs(this._.cacheRetention);){var b=this._.lastQueries.pop();this._.lastQueries.indexOf(b)===-1&&delete this._.suggestions[b]}this._.emitter.trigger("new global search query")},addSuggestion:function(a,b,c,d){this._.suggestions.hasOwnProperty(a)||(this._.suggestions[a]={}),this._.suggestions[a].hasOwnProperty(b)||(this._.suggestions[a][b]={}),this._.suggestions[a][b][c]=d,this._.emitter.trigger("new suggestions"),this._.emitter.trigger("new "+b+" suggestions")},getSuggestions:function(a,b){return this._.suggestions.hasOwnProperty(a)?_.values(this._.suggestions[a][b]):[]}}),Namespace("Imgur.Search"),Imgur.Search.Structured=Class.extend({init:function(a){this._={el:{$container:a,$form:a.find("form"),$toggleIcon:$("#search_adv_toggle").parent(),$q_all:a.find('form input[name="q_all"]')}}},get$AllOf:function(){return this._.el.$q_all},get$Form:function(){return this._.el.$form},setFlatQuery:function(a){this._.el.$q_all.val(a)},getFlatQuery:function(){return this._.el.$q_all.val()},hide:function(){this._.el.$container.hasClass("nodisplay")||(this._.el.$toggleIcon.removeClass("active"),this._.el.$container.addClass("nodisplay"))},show:function(){this._.el.$toggleIcon.addClass("active"),this._.el.$container.removeClass("nodisplay"),this._.el.$q_all.focus()},getIsHidden:function(){return this._.el.$container.hasClass("nodisplay")},empty:function(){this._.el.$q_all.val("")}}),Namespace("Imgur.AppStore"),Imgur.AppStore.Buttons=React.createClass({displayName:"AppStore-Buttons",getDefaultProps:function(){return{className:"app-buttons",campaign:"AppStore_Button",onClick:function(a,b){},jafo:{}}},render:function(){var a={display:"inline-block",overflow:"hidden",background:"url(//linkmaker.itunes.apple.com/images/badges/en-us/badge_appstore-lrg.png) no-repeat",width:"165px",height:"40px"},b={height:"40px"};return React.createElement("div",{className:this.props.className},React.createElement("a",{onClick:this._handleClickIos,href:"https://geo.itunes.apple.com/app/apple-store/id639881495?pt=2036292&ct="+this.props.campaign+"&mt=8&at=1001l5T8",target:"itunes_store",style:a}),React.createElement("a",{onClick:this._handleClickAndroid,href:"https://play.google.com/store/apps/details?id=com.imgur.mobile"},React.createElement("img",{style:b,alt:"Get it on Google Play",src:"https://developer.android.com/images/brand/en_generic_rgb_wo_45.png"})))},_handleClickIos:function(a){this._handleClick(a,"ios")},_handleClickAndroid:function(a){this._handleClick(a,"android")},_handleClick:function(a,b){Imgur.Util.jafoLog({event:"appInstall",meta:_.extend({app:b,campaign:this.props.campaign,platform:"web"},this.props.jafo)}),this.props.onClick(a,b)}}),Namespace("Imgur.Lightbox"),Imgur.Lightbox.GetTheApp=React.createClass({displayName:"Lightbox-Cta-GetTheApp",getDefaultProps:function(){return{url:"/apps"}},render:function(){return React.DOM.div({className:"lightbox-container"},this._createModalBackgroundDiv(),React.DOM.div({className:"lightbox-content-container"},this._createBackgroundDiv(),this._createCloseButton(),this._createContentDiv()))},_createContentDiv:function(){var a=this.props.newTab?"_blank":"_self",b=Imgur.Environment.staticUrl,c=b+"/images/house-cta/android-frame.png",d={backgroundImage:"url('"+b+"/images/house-cta/android-share.gif')",backgroundPosition:"center center",backgroundSize:"100% 100%"};return React.createElement("div",{className:"lightbox-content"},React.createElement("a",{className:"lightbox-hero",href:this.props.url,target:a,onClick:this._handleClickHero},React.createElement("img",{className:"lightbox-hero-image",src:c,style:d})),React.createElement("div",{className:"lightbox-text"},React.createElement("h1",null,React.createElement("a",{href:this.props.url,target:a,onClick:this._handleClickTitle},"It's dangerous to go alone! ",React.createElement("br",null),React.createElement("strong",null,"Take Imgur")," with you next time")),React.createElement(Imgur.AppStore.Buttons,{className:"lightbox-text-cta",onClick:this._handleClickAppStore,campaign:"Lightbox_GetTheApp"})))},_handleClickHero:function(){this._setAsViewed("hero"),this._hide()},_handleClickAppStore:function(){this._setAsViewed("appstore-buttons"),this._hide()},_handleClickTitle:function(){this._setAsViewed("title"),this._hide()},componentDidMount:function(){$(window).on("resize",this._center),this._center()},componentWillUnmount:function(){$(window).off("resize",this._center)},_center:_.throttle(function(){var a=ReactDOM.findDOMNode(this).querySelector(".lightbox-content-container"),b=-a.offsetWidth/2,c=-a.offsetHeight/2;a.style.marginLeft=b+"px",a.style.marginTop=c+"px"},200),_createCloseButton:function(){return React.DOM.a({className:"lightbox-close icon-x",href:"#",onClick:this._close,title:"Never see this again"})},_createModalBackgroundDiv:function(){return React.DOM.div({className:"lightbox-modal-background",onClick:this._close})},_createBackgroundDiv:function(){var a=this.props.background.replace(/{STATIC}/g,Imgur.Environment.staticUrl);return React.DOM.div({className:"lightbox-background",style:{backgroundImage:'url("'+a+'")'}})},_setAsViewed:function(a){window.localStorage&&this.props.localStorageName&&localStorage.setItem(this.props.localStorageName,!0),"close"!==a&&Imgur.Util.jafoLog({event:"bannerClickThrough",meta:{action:a,banner:this.props.trackingName,bannerType:"lightbox",platform:"web"}})},_hide:function(){$(ReactDOM.findDOMNode(this)).parent().slideUp({duration:250,easing:"easeInOutExpo"})},_close:function(a){a.preventDefault(),this._hide(),this._setAsViewed("close"),Imgur.Util.jafoLog({event:"bannerX",meta:{banner:this.props.trackingName,platform:"web",bannerType:"lightbox"}}),Imgur.Util.jafoLog({event:"appBannerX",meta:{banner:this.props.trackingName,platform:"web",bannerType:"lightbox"}})}}),Namespace("Imgur.Elements"),Imgur.Elements.Timestamp=React.createClass({name:"Timestamp",propTypes:{timestamp:React.PropTypes.string.isRequired,shouldUpdate:React.PropTypes.bool.isRequired},shouldComponentUpdate:function(){return this.props.shouldUpdate},formatDate:function(a){var b=/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/.exec(a);return new Date(b[1],b[2]-1,b[3],b[4],b[5],b[6])},formatTimestamp:function(a){var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=Math.floor(((new Date).getTime()-(a.getTime()-6e4*a.getTimezoneOffset()))/1e3);if(c<1)return"1s";var d=Math.floor(c/86400),e=Math.floor(c/3600),f=Math.floor(c/60);return d>365?b[a.getMonth()]+" "+a.getDate()+" "+a.getFullYear():d>31?b[a.getMonth()]+" "+a.getDate():d>0?d+"d":e>0?e+"h":f>0?f+"m":c+"s"},render:function(){var a=this.formatDate(this.props.timestamp);return React.DOM.span({title:a,className:this.props.classNames},this.formatTimestamp(a))}}),Namespace("Imgur.Elements"),Imgur.Elements.Analytics=React.createClass({displayName:"Elements-Analytics",getInitialState:function(){return{piePartOneRotation:"0deg",piePartThreeRotation:"0deg",pieClass:"",favorites:"-"}},componentWillMount:function(){this._setDonutChartRotation(),this.props.inGallery&&$.getJSON("/gallery/"+this.props.galleryHash+"/getfavs?is_album="+(this.props.isAlbum?1:0),function(a){this.setState({favorites:a.data})}.bind(this))},_setDonutChartRotation:function(){var a=this.props.downs/this.props.ups,b=this.props.downs/(this.props.ups+this.props.downs),c=0,d=0,e="";a>=1?d=0==this.props.ups&&0==this.props.downs?0:360*b-180:(e="half",c=0==this.props.ups&&0==this.props.downs?0:Math.abs(360*b)),this.setState({piePartOneRotation:c+"deg",piePartThreeRotation:d+"deg",pieClass:e})},render:function(){return React.createElement("div",{id:"analytics-wrapper"},React.createElement("div",{id:"info-analytics",ref:"infoAnalytics",className:this.props.inGallery?"gallery-image":""},React.createElement("div",{className:"stats-overview"},React.createElement("div",{className:"stats-overview-info-bar"},React.createElement("div",{className:"left gallery-title"},this.props.title),React.createElement("div",{className:"uploaded-time right"},"Uploaded ",React.createElement("span",{id:"stat-upload-time",className:"value"},React.createElement(Imgur.Elements.Timestamp,{timestamp:this.props.timestamp,shouldUpdate:!1}))),React.createElement("div",{className:"clear"})),React.createElement("div",{id:"stats-overview-thumb",className:"left"},React.createElement("img",{src:Imgur.Environment.cdnUrl+"/"+this.props.thumbhash+"b.jpg",alt:""})),React.createElement("div",{className:"points-chart left"},React.createElement("div",{className:"pie circle "+this.state.pieClass},React.createElement("div",{style:{transform:"rotate("+this.state.piePartOneRotation+")"},className:"part-one circle"}),React.createElement("div",{className:"part-two circle"}),React.createElement("div",{style:{transform:"rotate("+this.state.piePartThreeRotation+")"},className:"part-three circle full-bar-color"}),React.createElement("div",{className:"part-four circle"}),React.createElement("div",{className:"part-five circle full-bar-color"}),React.createElement("div",{className:"pie-contents circle"},React.createElement("div",{className:"points-total"},React.createElement("div",{className:"value stat"},Imgur.Util.numberFormat(this.props.ups-this.props.downs)),React.createElement("br",null),"Points"),React.createElement("div",{className:"ups-total"},React.createElement("div",{className:"value green"},Imgur.Util.numberFormat(this.props.ups)),React.createElement("div",{className:"vote-text"},"ups")),React.createElement("div",{className:"downs-total"},React.createElement("div",{className:"value red"},Imgur.Util.numberFormat(this.props.downs)),React.createElement("div",{className:"vote-text"},"downs"))))),React.createElement("div",null,React.createElement("div",{id:"stats-overview-views",className:"info-block left"},React.createElement("div",{className:"value"},Imgur.Util.numberFormat(this.props.views)),React.createElement("div",null,"Views")),React.createElement("div",{id:"stats-overview-band",className:"info-block left"},React.createElement("div",{className:"value"},Imgur.Util.byteSize(this.props.views*this.props.size)),React.createElement("div",null,"Bandwidth usage"))),React.createElement("div",null,React.createElement("div",{id:"stats-overview-comments",className:"info-block left"},React.createElement("div",{className:"value"},Imgur.Util.numberFormat(this.props.comments)),React.createElement("div",null,"Comments")),React.createElement("div",{id:"stats-overview-favs",className:"info-block left"},React.createElement("div",{className:"value"},Imgur.Util.numberFormat(this.state.favorites)),React.createElement("div",null,"Favorites"))),React.createElement("div",{className:"clear"}))))}}),Namespace("Imgur.Banner.Mixin"),Imgur.Banner.Mixin={getInitialState:function(){return{visibleClassName:""}},getClassName:function(){var a=""==this.props.description?"small-cta ":"";return a+=this.props.customClass?" "+this.props.customClass:"",this.props.hero&&(a+="cta-with-hero"),a+this.state.visibleClassName},_createCloseButton:function(){return React.DOM.a({className:"cta-close icon-x",href:"#",onClick:this._handleClickClose})},_createBackgroundDiv:function(){var a={className:"cta-background",style:{}};if("none"===this.props.backgroundImage)a.style.backgroundImage="none";else if(this.props.backgroundImage){var b=this.props.backgroundImage.replace(/{STATIC}/g,Imgur.Environment.staticUrl);a.style.backgroundImage='url("'+b+'")'}return this.props.backgroundColor&&(a.style.backgroundColor=this.props.backgroundColor),React.DOM.div(a)},_createContentDiv:function(){var a=this.props.newTab?"_blank":"_self",b="cta-content";return b+=this.props.customClass?" "+this.props.customClass:"",React.DOM.div({className:b},this._createHero(),React.DOM.h1(null,React.DOM.a({href:this.props.url,target:a,onClick:this._handleClickTitle,dangerouslySetInnerHTML:{__html:this.props.title}})),React.DOM.p({dangerouslySetInnerHTML:{__html:this.props.description}}))},_createHero:function(){if(!this.props.hero)return null;var a=this.props.newTab?"_blank":"_self",b={className:"cta-hero",href:this.props.url,target:a,onClick:this._handleClickTitle},c=this.props.hero.replace(/{STATIC}/g,Imgur.Environment.staticUrl);return React.DOM.a(b,React.DOM.img({src:c}))},_handleClickTitle:function(){this._setAsViewed("clickTitle"),this._closeCta()},_handleClickButton:function(){this._setAsViewed("clickButton"),this._closeCta()},_handleClickClose:function(a){a&&a.preventDefault(),this._setAsViewed("close"),this._closeCta()},_saveViewedState:function(){Imgur.LocalStorage.supported()&&this.props.localStorageName&&Imgur.LocalStorage.save(this.props.localStorageName,Date.now())},_setAsViewed:function(a){this._saveViewedState(),"string"!=typeof a&&(a=void 0),"close"===a?(Imgur.Util.jafoLog({event:"bannerX",meta:{banner:this.props.trackingName,bannerType:"headerCTA",location:"aboveTopNavBar",platform:"web"}}),"mobileApps"===this.props.trackingName&&Imgur.Util.jafoLog({event:"appBannerX",meta:{banner:this.props.trackingName,bannerType:"headerCTA",location:"aboveTopNavBar",platform:"web"}})):(Imgur.Util.jafoLog({event:"bannerClickThrough",meta:{banner:this.props.trackingName,action:a,bannerType:"headerCTA",location:"aboveTopNavBar",platform:"web"}}),"mobileApps"===this.props.trackingName&&Imgur.Util.jafoLog({event:"appInstall",meta:{banner:this.props.trackingName,bannerType:"headerCTA",location:"aboveTopNavBar",platform:"web"}}))},_createButton:function(){var a=this.props.newTab?"_blank":"_self";return this.props.buttonImg?React.DOM.a({className:"cta-img-button",href:this.props.url,target:a,onClick:this._handleClickButton},React.DOM.img({className:"cta-img",src:this.props.buttonImg})):React.DOM.a({className:"cta-button",style:{backgroundColor:this.props.buttonColor},href:this.props.url,target:a,onClick:this._handleClickButton},this.props.buttonText)},_closeCta:function(a){$(ReactDOM.findDOMNode(this)).parent().slideUp({duration:250,easing:"easeInOutExpo"})}},Namespace("Imgur.Banner"),Imgur.Banner.SMS=React.createClass({displayName:"Banner-Newsletter",mixins:[Imgur.Banner.Mixin],getDefaultProps:function(){return{title:"Get Imgur In Your Pocket",description:"5/7 - A perfect score!",cta:"We'll text you a link",placeholder:"555 123 4567",buttonText:"Send Link"}},getInitialState:function(){return{enabled:!1,success:!1,submitting:!1,error:!1}},loadbranchWebSDK:function(){!function(a,b,c,d,e,f,g,h,i,j){if(!a[d]||!a[d]._q){for(;h<g.length;)e(f,g[h++]);i=b.createElement(c),i.async=1,i.src="https://cdn.branch.io/branch-latest.min.js",j=b.getElementsByTagName(c)[0],j.parentNode.insertBefore(i,j),a[d]=f}}(window,document,"script","branch",function(a,b){a[b]=function(){a._q.push([b,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode".split(" "),0)},componentDidMount:function(){var a=this;this.eventLog("smsMeTheAppImpression"),this.loadbranchWebSDK(),branch.init("key_live_cjjQIIE2tMns5AZEouVU2bjdFyeQxPvd",function(){a.setState({enabled:!0})})},SMS:function(a){var b=this;Imgur.Util.jafoLog({event:"submissionInvoke",meta:{type:"smsTheApp"}});var c={tags:[],channel:"smsAppCTA",feature:"SMSMeTheApp",campaign:"smsMeTheApp",data:{source:"imgurDesktop",bannerType:"ctaBanner",location:"aboveTopNav",referrer:document.referrer}},d={};branch.sendSMS(a,c,d,function(a,c){return a?void b.handleSubmitError(a,c):void b.handleSubmitSuccess()})},handleSubmit:function(a){this.setState({error:!1}),a.preventDefault(),this.eventLog("smsMeTheAppSubmit"),this.SMS(this.refs.phoneNumber.value)},handleSubmitSuccess:function(){this.eventLog("smsMeTheAppTextSent"),this._saveViewedState(),this.setState({success:!0})},handleSubmitError:function(){this.setState({error:!0})},handleClose:function(a){a.preventDefault(),this.eventLog("smsMeTheAppDismissal"),this._saveViewedState(),this._closeCta()},eventLog:function(a){Imgur.Util.jafoLog({event:a,meta:{location:"aboveTopNav",smsMeTheAppInvokedBy:"ctaBanner"}})},render:function(){return React.createElement("div",{id:"cta-container",className:this.getClassName()+" cta-container-sms"},React.createElement("div",{className:"cta-background cta-background-sms"},"Â "),React.createElement("div",{className:"cta-content-container cta-content-container-sms"},React.createElement("div",{className:"cta-content cta-content-sms"},React.createElement("h2",null,this.props.title),React.createElement("div",null,this.props.description)),React.createElement("form",{className:classNames({"cta-sms":!0,"cta-form":!0,"cta-form-sms":!0,"cta-form-error":this.state.error,"cta-form-success":this.state.success,"cta-form-submitting":this.state.submitting}),onSubmit:this.handleSubmit},React.createElement("div",{className:"cta-form-input-container"},React.createElement("label",{className:"cta-form-input-label-sms","for":"cta-input-sms"},this.props.cta),React.createElement("div",{className:"cta-form-input-sms"},React.createElement("input",{id:"cta-input-sms",ref:"phoneNumber",placeholder:this.props.placeholder,type:"text",className:"'cta-form-control cta-sms'"}),React.createElement("button",{disabled:!this.state.enabled,className:"cta-form-control btn btn-small btn-main"},this.props.buttonText),this.state.success&&React.createElement("div",{className:"cta-form-input-success-sms"},"Yay! Check your phone for the link."))),this.state.error&&React.createElement("div",{className:"cta-error-message-sms"},"Hmm that didn't work. Please try again."))),React.createElement("a",{className:"cta-close icon-x",href:"#",onClick:this.handleClose},"Â "))}}),Namespace("Imgur.Banner.Cta"),Imgur.Banner.Cta=React.createClass({displayName:"Banner-Cta",mixins:[Imgur.Banner.Mixin],render:function(){return React.DOM.div({id:"cta-container",className:this.getClassName()},this._createBackgroundDiv(),React.DOM.div({className:"cta-content-container"},this._createButton(),this._createContentDiv(),this._createCloseButton()))}}),Namespace("Imgur.Banner.Cta"),Imgur.Banner.CtaNoButton=React.createClass({displayName:"Banner-CtaNoButton",mixins:[Imgur.Banner.Mixin],render:function(){return React.DOM.div({id:"cta-container",className:this.state.visibleClassName},this._createBackgroundDiv(),React.DOM.div({className:"cta-content-container"},this._createCloseButton(),this._createContentDiv()))}}),Namespace("Imgur.Banner.Facebook"),Imgur.Banner.Facebook=React.createClass({displayName:"Banner-Facebook",mixins:[Imgur.Banner.Mixin],render:function(){return React.DOM.div({id:"cta-container",className:this.state.visibleClassName},this._createBackgroundDiv(),React.DOM.div({className:"cta-content-container"},this._createCloseButton(),this._createContentDiv(),this._createLikeButton()))},_createLikeButton:function(){return React.DOM.div({className:"cta-facebook-button"},this._createFbRoot(),React.DOM.div({className:"facebook-overflow"},this._loadButton()))},_createFbRoot:function(){return React.DOM.div({id:"fb-root",className:"nodisplay"})},_loadButton:function(){return function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/all.js#xfbml=1&appId=127621437303857",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk"),React.DOM.div({className:"fb-like","data-href":"https://www.facebook.com/pages/Imgur/67691197470","data-send":"false","data-layout":"button_count","data-width":"80","data-show-faces":"false","data-colorscheme":"dark","data-font":"arial"})}}),Namespace("Imgur.Banner.Twitter"),Imgur.Banner.Twitter=React.createClass({displayName:"Banner-Twitter",mixins:[Imgur.Banner.Mixin],render:function(){return React.DOM.div({id:"cta-container",className:"twitter-banner "+this.getClassName()},React.DOM.div({className:"cta-content-container"},this._createCloseButton(),this._addTwitterIcon(),this._createContentDiv(),this._createFollowButton()))},_addTwitterIcon:function(){return React.DOM.a({className:"icon-twttr",href:this.props.url,target:"_blank"})},_createFollowButton:function(){return React.DOM.div({className:"cta-twitter-button"},this._loadButton())},_loadButton:function(){return React.DOM.iframe({src:"//platform.twitter.com/widgets/follow_button.html?screen_name=imgur&show_count=false",className:"twitter-follow-button",frameBorder:"0",scrolling:"no",allowTransparency:"true"},"Follow @imgur")}}),Namespace("Imgur.Banner.Pinterest"),Imgur.Banner.Pinterest=React.createClass({displayName:"Banner-Pinterest",mixins:[Imgur.Banner.Mixin],render:function(){return React.DOM.div({id:"cta-container",className:this.state.visibleClassName},this._createBackgroundDiv(),React.DOM.div({className:"cta-content-container"},this._createCloseButton(),this._createContentDiv(),this._createFollowButton()))},_createFollowButton:function(){return React.DOM.div({className:"cta-pinterest-button"},React.DOM.div({className:"pinterest-overflow"},this._loadButton()))},_loadButton:function(){return function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//assets.pinterest.com/js/pinit.js",e.parentNode.insertBefore(d,e))}(document,"script","pinterest-pinit"),React.DOM.a({href:"http://www.pinterest.com/imgur/","data-pin-do":"buttonFollow"},"Follow Imgur")}}),Namespace("Imgur.Banner.Converted"),Imgur.Banner.Converted=React.createClass({displayName:"Banner-Converted",mixins:[Imgur.Banner.Mixin],render:function(){return React.DOM.div({id:"cta-container",className:this.state.visibleClassName},this._createBackgroundDiv(),React.DOM.div({className:"cta-content-container"},this._createContentDiv()))}}),Namespace("Imgur.Banner.Cta"),Imgur.Banner.TeeSpring=React.createClass({displayName:"Banner-TeeSpring",mixins:[Imgur.Banner.Mixin],render:function(){return React.DOM.div({id:"cta-container",className:this.getClassName()},this._createBackgroundDiv(),React.DOM.div({className:"cta-content-container"},this._createCloseButton(),this._createContentDiv(),this._createTshirtImage(),this._createButton()))},_createTshirtImage:function(){return React.DOM.img({src:this.props.tshirtImage,className:"tshirt"})}}),Namespace("Imgur.Banner.Cta"),Imgur.Banner.Promoted=React.createClass({displayName:"Banner-Promoted",mixins:[Imgur.Banner.Mixin],render:function(){return React.DOM.div({id:"cta-container",className:this.getClassName()},this._createBackgroundDiv(),React.DOM.div({className:"cta-content-container"},this._createContentDiv(),this._createButton()))}}),Namespace("Imgur.Banner"),Imgur.Banner.Newsletter=React.createClass({displayName:"Banner-Newsletter",mixins:[Imgur.Banner.Mixin],getDefaultProps:function(){return{url:"/inbox",title:"Get Imgur beamed to your inbox",description:"The best of Imgur teleported to you every week",placeholder:"enter your email",buttonText:"Activate!"}},getInitialState:function(){return{email:Imgur.Environment.signed&&!/@example.com$/.test(Imgur.Environment.auth.email)?Imgur.Environment.auth.email:"",success:!1,submitting:!1,error:void 0}},render:function(){return React.DOM.div({id:"cta-container",className:this.getClassName()},this._createBackgroundDiv(),React.DOM.div({className:"cta-content-container"},this._createCloseButton(),this._createContentDiv(),this._createForm()))},_createForm:function(){var a=classNames({"cta-icymi":!0,"cta-form":!0,"cta-form-error":this.state.error,"cta-form-success":this.state.success,"cta-form-submitting":this.state.submitting}),b=this.state.error===!0?"An error occurred :/ Try again?":this.state.error,c=this.state.success===!0?"Thanks for signing up!":this.state.success;return React.DOM.form({className:a,onSubmit:this.handleSubmit},React.DOM.span({className:"cta-form-input-container"},React.DOM.input({type:"text",className:"cta-form-control cta-icymi-email",placeholder:this.props.placeholder,defaultValue:this.obfuscateEmail(this.state.email),onFocus:this.handleFocusText,onBlur:this.handleBlurText,onChange:this.handleChangeText}),React.DOM.button({type:"submit",className:"cta-form-control btn btn-small btn-main",disabled:this.state.submitting?"disabled":""},this.props.buttonText)),React.DOM.span({className:"cta-form-success cta-icymi-success"},c),React.DOM.span({className:"cta-form-error cta-icymi-error"},b))},handleFocusText:function(a){a.target.value===this.obfuscateEmail(this.state.email)&&(a.target.value=this.state.email)},handleBlurText:function(a){a.target.value===this.getInitialState().email&&(a.target.value=this.obfuscateEmail(this.state.email))},handleChangeText:function(a){this.setState({email:a.target.value})},handleSubmitSuccess:function(a,b,c){this._setAsViewed("close"),this.setState({success:a.data||!0,error:!1})},handleSubmitError:function(a,b,c){var d=(a.status,!0);try{a.responseJSON.data.error&&(d=a.responseJSON.data.error)}catch(e){}Imgur.Util.jafoLog({event:"submissionFailure",meta:{error:d,type:"newsletter"}}),this.setState({success:!1,error:d})},handleSubmit:function(a){a.preventDefault(),this.setState({submitting:!0});var b=this;Imgur.Util.jafoLog({event:"submissionInvoke",meta:{type:"newsletter"}}),$.ajax({method:"post",url:"/newsletter/subscribe",data:{email:this.state.email,msid:Imgur.Environment.msid,source:"cta-banner-newsletter"},success:this.handleSubmitSuccess,error:this.handleSubmitError,complete:function(){b.setState({submitting:!1})}})},obfuscateEmail:function(){return Imgur.Util.obfuscateEmail(this.state.email)}}),Namespace("Imgur.Search"),Imgur.Search.TopBarView=React.createClass({displayName:"Search-TopBarView",getDefaultProps:function(){return{componentList:[],KEYCODES:{ESC:27,UP_ARROW:38,DOWN_ARROW:40,ENTER:13,RIGHT_ARROW:39,TAB:9},SUGGESTION_TYPES:{SEARCH:"post_titles",TAG:"tags",USER:"users",MEME:"memes",ECHO:"echo"},defaultSuggestOpened:!1}},getInitialState:function(){return{focused:!1,selectedIdx:null,forcedOpen:!1,open:this.props.defaultSuggestOpened}},getStore:function(){return this.props.suggestionStore},close:function(){this.setState({focused:!1,open:!1,forcedOpen:!1}),$(this.refs.query).blur()},open:function(){this.setState({focused:!1,open:!0})},openAndFocus:function(){this.setState({focused:!0,open:!0}),$(this.refs.query).focus()},isOpened:function(){return this.state.open},isClosed:function(){return!this.state.open},handleChange:function(a){this.resetQuery(a.target.value)},resetQuery:function(a){this.setState({open:!0}),this.props.suggestionStore.setQuery(a),this.props.searchResults.setActiveQuery(a),this.props.suggestionStore.haveQueryData(a)||(a.length>1?this.props.searchSuggestModel.fetch(a):this.props.searchSuggestModel.cancel())},_doActionActive:function(a){var b=this.props.searchResults.getActiveIdx(a),c=this.props.searchResults.getIthSuggestion(a,b).href;window.location=c},_onSuggestHoverIn:function(a,b){this.props.searchResults.setActiveIdx(a,b)},_onSuggestHoverOut:function(a,b){this.props.searchResults.getActiveIdx(a)===b&&this.props.searchResults.setActiveIdx(a,null)},_produceSection:function(a,b){if(b.payload.length){for(var c=[],d=0;d<b.payload.length;d++){var e=b.index+d===this.props.searchResults.getActiveIdx(a);c.push(React.createElement(Imgur.Search.Suggestions[b.reactClsName],_.merge({},b.payload[d],{className:"suggestion"+(e?" hover":""),onMouseEnter:_.partial(this._onSuggestHoverIn,a,b.index+d),onMouseLeave:_.partial(this._onSuggestHoverOut,a,b.index+d)})))}return React.createElement(Imgur.Search.TopBar.Section,{title:b.title,icon:b.iconClass},c)}},_getCaretPosition:function(a){if(a.selectionStart)return a.selectionStart;if(document.selection){a.focus();var b=document.selection.createRange();if(null==b)return 0;var c=a.createTextRange(),d=c.duplicate();return c.moveToBookmark(b.getBookmark()),d.setEndPoint("EndToStart",c),d.text.length}return 0},_getFooterDom:function(){return React.DOM.div({className:"global-search-footer"},React.DOM.div(null,React.DOM.div({className:"footer-label"},"search syntax"),React.DOM.div({className:"footer-content"},React.DOM.div({className:"keyword"},"title:"),React.DOM.div({className:"keyword-desc"},"titles only"),React.DOM.div({className:"keyword"},"tag:"),React.DOM.div({className:"keyword-desc"},"images of a tag"),React.DOM.div({className:"keyword nextline"},"user:"),React.DOM.div({className:"keyword-desc"},"find a user"),React.DOM.div({className:"keyword"},"ext:"),React.DOM.div({className:"keyword-desc"},"image extension"))))},render:function(){var a,b=this.props.searchResults.getVisibleQuery(),c=this.props.suggestionStore.getQuery();if(this.state.focused){for(var d=this.props.searchResults.getSections(),e=[],f=0,g=d[0];f<d.length;f++,g=d[f])e.push(this._produceSection(c,g));var a=React.DOM.div({ref:"suggestion-container",className:"global-search-autocomplete",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},e,this._getFooterDom())}var h="//"+this.props.host+"/search";h+="relevance"===this.props.sort?"":"/"+this.props.sort,h+="all"===this.props.window?"":"/"+this.props.window;var i=" search-focused";return this.isClosed()&&(i=" search-closed",b=""),React.DOM.div({onKeyUp:_.partial(this.handleKeyUp,c),onKeyDown:_.partial(this.handleKeyDown,c),onFocus:_.partial(this.props.structured?this.handleFocus_Advanced:this.handleFocus,c),onSubmit:_.partial(this.handleSubmit,c),className:"search-container"+i},React.DOM.form({className:"search-form",method:"get",action:h,ref:"form"},React.DOM.input({autoComplete:"off",onChange:this.props.structured?this.handleChange_Advanced:this.handleChange,onBlur:_.partial(this.props.structured?this.handleBlur_Advanced:this.handleBlur,c),type:"text",className:"search",ref:"query",name:"q",value:b}),React.DOM.div({className:"search-icon-container",onClick:this.handleIconClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},React.DOM.div({className:"icon-search"+(b.length>0?" searchable":"")},""))),a)},handleIconClick:function(a){var b=$(this.refs.query).val().length;b>0?$(this.refs.form).submit():this.isClosed()&&this.openAndFocus()},handleFocus:function(a){this.setState({focused:!0,open:!0}),this.props.searchResults.setActiveIdx(a,null)},handleBlur:function(a){return this.state.forcedOpen?void this.openAndFocus():(this.setState({focused:!1,open:!1}),void this.props.searchResults.setActiveIdx(a,null))},handleChange_Advanced:function(a){this.resetQuery(a.target.value),this.props.structured.setFlatQuery(this.props.suggestionStore.getQuery())},handleFocus_Advanced:function(a){this.props.structured.hide(),this.handleFocus(a)},handleBlur_Advanced:function(a){return this.state.forcedOpen?void this.openAndFocus():(this.setState({focused:!1,open:!0}),void this.props.searchResults.setActiveIdx(a,null))},handleKeyDown:function(a,b){var c={right_arrow:b.keyCode===this.props.KEYCODES.RIGHT_ARROW,tab:b.keyCode===this.props.KEYCODES.TAB,enter:b.keyCode===this.props.KEYCODES.ENTER,modifier:!!(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)},d=this.props.searchResults.getTotalSuggestions(a);if(!(c.modifier||d<=0)){if(c.right_arrow){var e=this.refs.query,f=this._getCaretPosition(e),g=$(e).val().length;if(f<g)return}if(c.tab||c.right_arrow){b.preventDefault();var h=this.props.searchResults.getActiveIdx(a),i="";(null!==h||this.props.searchResults.getTotalSuggestions(a)>0)&&(i=null!=h?this.props.searchResults.getVisibleQuery():this.props.searchResults.getIthSuggestion(a,0).query,this.resetQuery(i))}else c.enter&&null!==this.props.searchResults.getActiveIdx(a)&&this._doActionActive(a)}},handleSubmit:function(a,b){null!==this.props.searchResults.getActiveIdx(a)&&b.preventDefault();var c=0===a.indexOf("r/");return Imgur.Util.jafoLog({event:"searchTerm",meta:{query:a,isSubreddit:c}}),!0},handleKeyUp:function(a,b){var c={esc:b.keyCode===this.props.KEYCODES.ESC,up_arrow:b.keyCode===this.props.KEYCODES.UP_ARROW,down_arrow:b.keyCode===this.props.KEYCODES.DOWN_ARROW,enter:b.keyCode===this.props.KEYCODES.ENTER,modifier:!!(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)},d=this.props.searchResults.getTotalSuggestions(a);if(!c.modifier)if((c.up_arrow||c.down_arrow||c.enter)&&b.preventDefault(),c.up_arrow||c.down_arrow){if(d<=0)return;var e=this.props.searchResults.getActiveIdx(a),f=c.down_arrow?1:-1;e=null===e?c.down_arrow?0:d-1:e+f<0||e+f>=d?null:e+f,this.props.searchResults.setActiveIdx(a,e)}else c.esc&&(this.setState({forcedOpen:!1}),this.forceUpdate(_.bind(function(){this.refs.query.blur()},this)))},handleMouseEnter:function(a){this.setState({forcedOpen:!0})},handleMouseLeave:function(a){this.setState({forcedOpen:!1})}}),Namespace("Imgur.Search"),Imgur.Search.Results=Class.extend({init:function(a,b,c,d){this._={emitter:a,store:b,ordering:c,suggestionFactory:d,activeIdx:{query:null,idx:null}}},setActiveIdx:function(a,b){a===this._.activeIdx.query&&(this._.activeIdx={query:a,idx:b},this._.emitter.trigger("new active suggestion"))},setActiveQuery:function(a){this._.activeIdx={query:a,idx:null},this._.emitter.trigger("new active suggestion")},getSections:function(){for(var a=[],b=0,c=this._.store.getQuery(),d=0,e=this._.ordering[0];d<this._.ordering.length;d++,e=this._.ordering[d]){var f=this._.store.getSuggestions(c,e),g=_.map(f,_.bind(this._.suggestionFactory.produceSuggestion,this._.suggestionFactory,e));a.push(this._.suggestionFactory.produceSection(b,e,g)),b+=f.length}return a},getIthSuggestion:function(a,b){for(var c=0,d=this._.ordering[0];c<this._.ordering.length;c++,d=this._.ordering[c]){var e=this._.store.getSuggestions(a,d);if(b<e.length)return this._.suggestionFactory.produceSuggestion(d,e[b]);b-=e.length}},getVisibleQuery:function(){return null!==this._.activeIdx.idx?this.getIthSuggestion(this._.activeIdx.query,this._.activeIdx.idx).searchString:this._.store.getQuery()},getActiveQuery:function(){return this._.activeIdx.query},getActiveIdx:function(a){return this._.activeIdx.query===a?this._.activeIdx.idx:null},getQuery:function(){return this._.store.getQuery()},getTotalSuggestions:function(a){for(var b=0,c=0,d=this._.ordering[0];c<this._.ordering.length;c++,d=this._.ordering[c]){var e=this._.store.getSuggestions(a,d);b+=e.length}return b}}),Namespace("Imgur.Search"),Imgur.Search.SuggestionFactory=Class.extend({init:function(a){this._={host:a}},produceSuggestion:function(a,b){switch(a){case"post_titles":return{type:a,href:"//"+this._.host+"/search?q="+encodeURIComponent(b),searchString:b,payload:b,query:b};case"tags":return{type:a,href:"//"+this._.host+"/t/"+b.tag.replace(/\s+/g,"_"),searchString:"tag:"+b.tag,payload:b,query:b.tag};case"users":return{type:a,href:"//"+this._.host+"/user/"+encodeURIComponent(b.user),searchString:"user:"+b.user,payload:b,query:b.user};case"memes":return{type:a,href:"//"+this._.host+"/search?q="+encodeURIComponent("meme:"+b),searchString:"meme:"+b,payload:b,query:b};case"echo":return{type:a,href:"//"+this._.host+"/search?q="+encodeURIComponent(b),searchString:b,payload:b,query:b}}},produceSection:function(a,b,c){var d,e,f,g={key:b,index:a,payload:c};switch(b){case"post_titles":d="Search suggestions:",e="glass-icon",f="Search";break;case"tags":d="Tags:",e="tag-icon",f="Tag";break;case"users":d="Users:",e="user-icon",f="User";break;case"memes":d="Memes:",e="meme-icon",f="Meme";break;case"echo":d="Search:",e="glass-icon",f="Echo"}return g.title=d,g.iconClass=e,g.reactClsName=f,g}}),Namespace("Imgur.Search"),Imgur.Search.Model=Class.extend({init:function(a,b){this._={ajax:a,suggestionStore:b,queryNonce:0,pendingRequest:null}},cancel:function(){this._.queryNonce++,null!=this._.pendingRequest&&this._.pendingRequest.abort()},fetch:function(a,b,c,d){this.cancel(),this._.pendingRequest=this._.ajax(b,d,_.bind(this._handleResponse,this,this._.queryNonce,a,c||_.noop))},responseWasSuccessful:function(a){return!!a.success},_handleResponse:function(a,b,c,d){this._.pendingRequest=null,a<this._.queryNonce||(this._.queryNonce++,d&&this.responseWasSuccessful(d)&&c(b,this._handleResponseSuccess(b,d)))},_handleResponseSuccess:function(a,b){throw"abstract"}}),Namespace("Imgur.Search"),Imgur.Search.SuggestModel=Imgur.Search.Model.extend({init:function(a,b,c){this._super(a,b),this._.suggestUrl=c},fetch:function(a,b){this._super([a],this._.suggestUrl+"?q="+encodeURIComponent(a),b,{})},_handleResponseSuccess:function(a,b){var c=a[0];return _.each(b.data,_.bind(function(a,b){"search"===a.type?this._.suggestionStore.addSuggestion(c,"post_titles",b,a.text):"tag"===a.type?this._.suggestionStore.addSuggestion(c,"tags",b,{tag:a.text,images:a.images}):"user"===a.type?this._.suggestionStore.addSuggestion(c,"users",b,{user:a.text,submissions:a.submissions}):"meme"===a.type?this._.suggestionStore.addSuggestion(c,"memes",b,a.text):"echo"===a.type&&this._.suggestionStore.addSuggestion(c,"echo",b,a.text)},this)),this._.suggestionStore},toString:function(){return"[search suggestion model]"}}),Imgur.Search.SuggestModel.prototype.fetch=_.debounce(Imgur.Search.SuggestModel.prototype.fetch,50),Namespace("Imgur.Search"),Imgur.Search.HotkeyController=Class.extend({KEYCODE:{FORWARD_SLASH:191},init:function(a){this._={el:{$root:a}}},handleKeyUp:function(a){a.metaKey||a.ctrlKey||a.shiftKey||a.altKey||a.keyCode!=this.KEYCODE.FORWARD_SLASH||$(a.target).is("input, textarea")||"true"==$(a.target).attr("contenteditable")||this._.el.$root.find('input[type="text"][name="q"]').focus()}}),Namespace("Imgur.Search.Controller"),Imgur.Search.Controller.Advanced=Class.extend({init:function(a){this._={structured:a}},handleKeyUpStructured:function(a){this._.topbar.getStore().setQuery(this._.structured.getFlatQuery())},handleToggleAdvancedClick:function(a){var b=this._.structured.getIsHidden();b?(this._.topbar.close(),this._.structured.show()):(this._.topbar.open(),this._.structured.hide())},setTopBarComponent:function(a){this._.topbar=a}}),Namespace("Imgur.Search.TopBar"),Imgur.Search.TopBar.Section=React.createClass({displayName:"Search-TopBarSection",getDefaultProps:function(){return{entries:[]}},render:function(){return React.DOM.div({className:"global-search-section"},React.DOM.div({className:this.props.icon}),React.DOM.div({className:"title"},this.props.title),this.props.children)}}),Namespace("Imgur.Search.Suggestions"),Imgur.Search.Suggestions.Search=React.createClass({displayName:"Search-Suggestions-Seach",render:function(){return React.DOM.a({href:this.props.href},this.props.query)}}),Namespace("Imgur.Search.Suggestions"),Imgur.Search.Suggestions.Tag=React.createClass({displayName:"Search-Suggestions-Tag",render:function(){return React.DOM.a({href:this.props.href},this.props.payload.tag)}}),Namespace("Imgur.Search.Suggestions"),Imgur.Search.Suggestions.User=React.createClass({displayName:"Search-Suggestions-User",render:function(){return React.DOM.a({href:this.props.href},this.props.payload.user)}}),Namespace("Imgur.Search.Suggestions"),Imgur.Search.Suggestions.Meme=React.createClass({displayName:"Search-Suggestions-Meme",render:function(){return React.DOM.a({href:this.props.href},this.props.query)}}),Namespace("Imgur.Search.Suggestions"),Imgur.Search.Suggestions.Echo=React.createClass({displayName:"Search-Suggestions-Echo",render:function(){return React.DOM.a({href:this.props.href},this.props.query)}}),jQuery.fn.imageZoom=function(a){var b=jQuery.extend({speed:150,dontFadeIn:1,hideClicked:1,imageMargin:15,className:"jquery-image-zoom",loading:"Loading..."},a);return b.doubleSpeed=b.speed/4,this.click(function(a){if(!(1!==a.which||a.ctrlKey||a.metaKey||a.shiftKey||a.altKey)){var c=jQuery(a.target),d=c.is("a")?c:c.parents("a");d=!(!d||!d.is("a")||d.attr("href").search(/(.*)\.(jpg|jpeg|gif|png|bmp|tif|tiff)(\?.*)?$/gi)==-1&&"blob:"!=d.attr("href").substr(0,5))&&d;var e=!(!d||!d.find("img").length)&&d.find("img");if(d){d.oldText=d.text(),d.setLoadingImg=function(){e?(e.before('<span class="zoom-loader"></span>'),e.css({opacity:"0.5"})):d.text(b.loading)},d.setNotLoadingImg=function(){e?(e.siblings(".zoom-loader").remove(),e.css({opacity:"1"})):d.text(d.oldText)};var f=d.attr("href");if(jQuery("div."+b.className+' img[src="'+f+'"]').length)return!1;var g=new Image;g.src=f;var h=function(){d.setNotLoadingImg();var a=e?e:d,c=e?b.hideClicked:0,h=a.offset(),i={width:a.outerWidth(),height:a.outerHeight(),left:h.left,top:h.top},j=jQuery('<div><img src="'+f+'" alt="" /></div>').css("position","absolute").appendTo(document.body),k={width:g.width,height:g.height},l={width:jQuery(window).width(),height:jQuery(window).height()};if(k.width>l.width-2*b.imageMargin){var m=l.width-2*b.imageMargin;k.height=m/k.width*k.height,k.width=m}k.left=(l.width-k.width)/2+jQuery(window).scrollLeft(),k.top=(l.height-k.height)/2+jQuery(window).scrollTop();var n=jQuery('<a href="#">Close</a>').appendTo(j).hide();j.attr("tabindex","1"),k.top<0&&(k.top=20),c&&d.css("visibility","hidden"),j.addClass(b.className).css(i).animate(k,b.speed,function(){n.fadeIn(b.doubleSpeed),j.focus()});var o=function(){return n.fadeOut(b.doubleSpeed,function(){j.animate(i,b.speed,function(){d.css("visibility","visible"),j.remove()})}),!1};j.click(o),j.blur(o),n.click(o)};return g.complete?h():(d.setLoadingImg(),g.onload=h),!1}}})},$(document).keydown(function(a){27==a.keyCode&&$("div.jquery-image-zoom a").click()}),Imgur.ImageViewer=React.createClass({displayName:"ImageViewer",getDefaultProps:function(){return{thumbsize:"",gif_size_threshold:2097152,wrap_with_direct_link:!0,poster:!0,forceGif:!1,forceStill:!1,noZoom:!1,maxWidth:"100%",minHeight:"0",discarding_referrer:!1,firing_pixel:!0,showShareLinks:!1,deleteMode:!1}},getInitialState:function(){return{videoHash:null,progress:0,failed:!1,lastViewPixel:null,injectFullImage:!1}},_showingVideo:function(){return!this.props.forceGif&&(this.props.item.size>this.props.gif_size_threshold||this.props.item.prefer_video)&&!this.props.thumbsize&&0===this.props.item.ext.indexOf(".gif")&&this.props.item.animated},_addVideoLoader:function(){$(this.refs.video).on("progress",_.bind(function(a){try{var b=Math.round(this.refs.video.buffered.end(0)/this.refs.video.duration*100);this.setState({videoHash:this.props.item.hash,progress:b})}catch(a){this.setState({videoHash:this.props.item.hash,progress:0})}},this))},_bindVideoEvents:function(){var a=$(this.refs.video);this._isMobile()&&("undefined"==typeof this.props.item.looping||this.props.item.looping)&&(a[0].loop=!1,a.on("ended",function(){a[0].currentTime=0,a[0].play()})),a.children("source:last").on("error",_.bind(function(){this.setState({failed:!0})},this))},componentWillUnmount:function(){if(this.refs.hasOwnProperty("video")){this.refs.srcmp4.src="",this.refs.video.load();var a=$(this.refs.video);a.off("ended"),a.off("progress"),a.off("ended"),a.children("source:last").off("error")}else this.refs.hasOwnProperty("image")&&(this.refs.image.src="")},componentWillUpdate:function(){this.refs.hasOwnProperty("video")&&($(this.refs.video).off("progress"),$(this.refs.video).off("ended"))},shouldComponentUpdate:function(a,b){return!(this.props.item.hash==a.item.hash&&!a.showShareLinks&&this.state.injectFullImage==b.injectFullImage)},_imageChanged:function(){this.refs.hasOwnProperty("video")&&(this._addVideoLoader(),this._bindVideoEvents()),this.props.firing_pixel&&this.state.lastViewPixel!==this.props.item.hash&&["","l","g","h","r"].indexOf(this.props.thumbsize)!==-1&&(Imgur.Util.triggerView(this.props.item.hash,{image:!0,discard:this.props.discarding_referrer}),this.setState({lastViewPixel:this.props.item.hash}))},componentDidUpdate:function(){this._imageChanged()},componentDidMount:function(){this.props.noZoom||!this._isLargeWidth()||this._showingVideo()||$(this.refs.link).imageZoom(),this._imageChanged()},_injectFullImage:function(){this.setState({injectFullImage:!0})},_isMobile:function(){return navigator.userAgent.match(/android|iphone|ipod|ipad/i)},_isLargeWidth:function(){if(""==this.props.thumbsize)return this.props.item.width>728;var a=Imgur.getInstance().getImageSizes();for(var b in a)if(a.hasOwnProperty(b)&&a[b].suffix==this.props.thumbsize)return this.props.item.width>a[b].width},_shareOptions:function(a){$.colorbox({html:'<div id="post-image-options-share"></div>',open:!0,top:"10%",transition:"none",scrolling:!1,fixed:!0,width:647,height:280,className:"blurbox",title:"Share Options",onComplete:function(){ReactDOM.render(React.createElement(Imgur.Gallery.ShareImage,{embedcoder:a}),$("#post-image-options-share").get(0))}})},toggleDeleteMode:function(a){a.preventDefault(),this.setState({deleteMode:!this.state.deleteMode})},removeFromPost:function(){$.ajax({method:"POST",url:"/ajaxalbums/removeimage/"+this.props.album_hash,data:{msid:Imgur.Environment.msid,deletehash:this.props.item.deletehash},displayGenericError:!1,error:function(){humanMsg.displayMsg("There was an error removing your image from this post","error-msg")}}),this.props.handleRemove(this.props.item.hash)},deleteFromAccount:function(){$.ajax({method:"POST",url:"/delete/"+this.props.item.deletehash,data:{confirm:!0},displayGenericError:!1,error:function(){humanMsg.displayMsg("There was an error deleting your image","error-msg")}}),this.props.handleRemove(this.props.item.hash)},render:function(){var a=this.props.item.hash,b=this.props.item.blobURL,c=this.props.item.ext,d=(this.props.item.width,this.props.item.height,this.props.item.title),e=this.props.item.preloaded,f=this._isLargeWidth(),g=!this.props.noZoom&&f&&!this._showingVideo();if(this._showingVideo()&&!this.state.failed){var h=0;this.state.videoHash===a&&(h=this.state.progress);var i={ref:"video",key:a+c,autoPlay:"autoplay",muted:"muted",style:{maxWidth:this.props.maxWidth,minHeight:this.props.minHeight+"px",maxHeight:this.props.maxHeight+"px"}};this._isMobile()||"undefined"!=typeof this.props.item.looping&&!this.props.item.looping||(i.loop="loop"),this.props.poster&&(i.poster=Imgur.Environment.cdnUrl+"/"+a+"h.jpg"),this._isMobile()&&(i.controls="controls");var j=Imgur.Environment.cdnUrl+"/"+a,k=React.createElement("div",{className:"video-container"},React.createElement("video",i,React.createElement("source",{ref:"srcmp4",type:"video/mp4",src:j+".mp4"})),h<100?React.createElement("progress",{min:"0",max:"100",ref:"progress",value:h}):null)}else{var l;l=e!==!1||this.state.failed?Imgur.Environment.cdnUrl+"/"+a+(this.props.item.animated&&!this.props.forceStill?"":this.props.thumbsize)+c:b,k=React.createElement("img",{key:b+a+this.props.thumbsize+c,ref:"image",alt:d,src:l,style:{maxWidth:this.props.maxWidth,minHeight:this.props.minHeight+"px",maxHeight:this.props.maxHeight+"px"}})}if((f||this.props.wrap_with_direct_link)&&(!this.props.noZoom||this.props.wrap_with_direct_link)&&!this._showingVideo()){var m;m=e!==!1?Imgur.Environment.cdnUrl+"/"+a+c:b;var n,o=$.browser.mozilla,p={className:g?"zoom":"",ref:"link",title:d,href:m};""!=this.props.thumbsize&&(this.state.injectFullImage||o||(p.onMouseDown=g?this._injectFullImage:_.noop),n=React.DOM.img({key:a+this.props.thumbsize+c+"b",alt:d,src:Imgur.Environment.cdnUrl+"/"+a+(this.state.injectFullImage||this.props.item.animated||o?"":this.props.thumbsize)+c,style:{maxWidth:this.props.maxWidth,minHeight:this.props.minHeight+"px",maxHeight:this.props.maxHeight+"px"},className:"post-image-placeholder"})),k=React.DOM.a(p,n,k)}var q,r,s;if(this.props.showShareLinks){var t=new Imgur.LinkGenerator;t.setThumbSize(""),t.setItem(this.props.item);var u="string"!=typeof this.props.item.hash,v=u&&this.props.item.progress>0;r=u?React.createElement("div",{className:"post-image-progress-text"},this.props.item.progressText):null,s=v?React.createElement("div",{className:"post-image-progress-bar",style:{width:this.props.item.progress+"%"}}):null,q=this.state.deleteMode?React.createElement("div",{className:"post-image-delete"},React.createElement("div",{className:"post-image-delete-container"},React.createElement("a",{href:"",className:"post-image-delete-item",onClick:this.toggleDeleteMode},"Cancel"),this.props.singleImage?null:React.createElement("span",null,React.createElement("button",{className:"btn btn-action post-image-delete-item",onClick:this.removeFromPost},"Remove from this Post"),React.createElement("span",{className:"post-image-delete-item"},"or")),React.createElement("button",{className:"btn btn-danger post-image-delete-item",onClick:this.deleteFromAccount},"Delete Image from Account"))):u?null:React.createElement("div",null,React.createElement("div",{className:"post-image-options-container"},React.createElement(Imgur.Elements.Copy,{value:t.imageLink(),inputClass:"copy-input",copyClass:"copy"}),React.createElement("div",{className:"icon-arrow-down"},React.createElement("div",{className:"post-image-options-all-container"},React.createElement("div",{className:"caret"}),React.createElement("ul",{className:"post-image-options-all"},React.createElement("li",{className:"post-image-option"},React.createElement("a",{href:"/edit?deletehash="+this.props.item.deletehash+"&album_id="+this.props.album_hash},"Edit image")),React.createElement("li",{className:"post-image-option"},React.createElement("a",{onClick:_.partial(this._shareOptions,t)},"Get share links")),React.createElement("li",{className:"post-image-option"},React.createElement("a",{href:"/download/"+this.props.item.hash},"Download image")),React.createElement("li",{className:"post-image-option"},React.createElement("a",{className:"delete",href:"",onClick:this.toggleDeleteMode},"Delete image")))))))}return React.createElement("div",{className:"image post-image"},q,k,r,s)}}),Namespace("Imgur.Upload.Modal"),Imgur.Upload.Modal=React.createClass({displayName:"Upload-Modal",propTypes:{dropTargetOnly:React.PropTypes.bool,blurInvokedByUser:React.PropTypes.func,handleFileList:React.PropTypes.func,handleURL:React.PropTypes.func,historyBackOnClose:React.PropTypes.bool,creatingPost:React.PropTypes.bool,accept:React.PropTypes.string,handleAddExistingImage:React.PropTypes.func,isNewUpload:React.PropTypes.bool},unmount:function(){return this.props.historyBackOnClose?void(""==document.referrer?window.close():(window.history.back(),window.location="/")):void this.props.blurInvokedByUser(!1)},stopPropagation:function(a){a.stopPropagation()},vidGif:function(){Imgur.Util.jafoLog({event:"vidToGifInvoked",meta:{control:"uploadOverlay"}}),window.open("//imgur.com/vidgif","_blank")},memeGen:function(){Imgur.Util.jafoLog({event:"makeAMeme",meta:{control:"uploadOverlay"}}),window.open("//imgur.com/memegen","_blank")},browseUploads:function(){Imgur.Util.jafoLog({event:"uploadTapUploads",meta:{control:"uploadOverlay"}}),this.props.handleAddExistingImage()},handleURL:function(a){this.props.handleURL(a.target.value)},render:function(){var a,b=React.createElement("div",{className:"drag-drop-box"},React.createElement("img",{className:"upload-giraffe",src:Imgur.Environment.staticUrl+"/images/upload-giraffe.png"}),React.createElement("img",{className:"upload-pointer",src:Imgur.Environment.staticUrl+"/images/upload-pointer.png"}),React.createElement("div",{className:"icon-upload"})),c=[];return this.props.isNewUpload&&(c.push(React.createElement("a",{key:"memeGenLink",ref:"memeGenLink",onClick:this.memeGen},"Meme Gen")),c.push(React.createElement("a",{key:"video2GifLink",ref:"video2GifLink",onClick:this.vidGif},"Video to Gif"))),c.push(React.createElement("a",{key:"browseUploadsLink",ref:"browseUploadsLink",onClick:this.browseUploads},"Browse my Imgur Uploads")),a=this.props.creatingPost?React.createElement("div",{id:"upload-modal",className:"modal"},React.createElement("div",{className:"primary-actions drop-target-only"},React.createElement("div",{className:"icon-checkmarkcircle"}),React.createElement("div",{className:"drag-drop-text"},"Creating your post"))):this.props.dropTargetOnly?React.createElement("div",{id:"upload-modal",className:"modal"},React.createElement("div",{className:"primary-actions drop-target-only"},b,React.createElement("div",{className:"drag-drop-text"},"Drop images here"))):React.createElement("div",{id:"upload-modal",onClick:this.stopPropagation,className:"modal"},React.createElement("div",{className:"icon-x",onClick:this.unmount}),React.createElement("div",{className:"primary-actions"},b,React.createElement("div",{className:"drag-drop-text"},React.createElement("input",{id:"global-files-button",ref:"browse-button",className:"nodisplay",type:"file",name:"files[]",multiple:!0,onChange:this.props.handleFileList,accept:this.props.accept}),React.createElement("label",{className:"browse-btn",htmlFor:"global-files-button"},"Browse"),"Â ",React.createElement("span",null,"or drag images here.")),React.createElement("div",{className:"paste-url"},React.createElement("input",{id:"paste-url-input",ref:"pasteURLInput",onInput:this.handleURL,placeholder:"Paste Image or URL"}))),React.createElement("div",{id:"bottom-apps-container"},c),React.createElement("p",{className:"upload-modal-terms"},"By creating a post, you agree to Imgur's ",React.createElement("a",{href:"//"+Imgur.Environment.host+"/tos"},"Terms of Service")," and ",React.createElement("a",{href:"//"+Imgur.Environment.host+"/privacy"},"Privacy Policy"))),React.createElement("div",{id:"upload-modal-backdrop",className:"modal-backdrop drop-target "+(this.props.creatingPost?"creating-post-transition":"normal-transition"),onClick:this.unmount},a)}}),Namespace("Imgur.Elements");var ANIMATION_END_NAME="flipout";Imgur.Elements.FlipInfo=React.createClass({displayName:"FlipInfo",propTypes:{message:React.PropTypes.string},getInitialState:function(){return{updated:!0}},handleAnimationEnd:function(a){a.nativeEvent.animationName===ANIMATION_END_NAME&&this.setState({updated:!1})},componentWillReceiveProps:function(){this.setState({updated:!0})},render:function(){return React.createElement("div",{ref:"root",className:"FlipInfo "+(this.state.updated&&"FlipInfo-animate"),onAnimationEnd:this.handleAnimationEnd},React.createElement("span",{ref:"message",className:"FlipInfo-message"},this.props.message))}}),Namespace("Imgur.Elements"),function(){"use strict";var a="ActionCard-fadeout";Imgur.Elements.ActionCard=React.createClass({displayName:"ActionCard",propTypes:{name:React.PropTypes.string.isRequired,title:React.PropTypes.string.isRequired,body:React.PropTypes.string.isRequired,actions:React.PropTypes.array.isRequired,imageUrl:React.PropTypes.string.isRequired,classNames:React.PropTypes.string,close:React.PropTypes.func},getInitialState:function(){return{closed:!1,hide:!1}},componentDidMount:function(){var a=this;setTimeout(function(){document.addEventListener("click",a.handleDocumentClick)},1)},handleDocumentClick:function(){this.setState({hide:!0})},componentWillUnmount:function(){document.removeEventListener("click",this.handleDocumentClick)},renderAction:function(a,b){var c=a.classNames.join(" ");return React.createElement("a",{ref:a.name,key:a.name,href:"#",onClick:a.action,className:"ActionCard-action "+c},a.label)},handleAnimationEnd:function(b){b.animationName===a&&this.close()},close:function(){this.setState({closed:!0},this.props.close)},render:function(){var a=this.props.actions.map(this.renderAction),b={backgroundImage:"url("+this.props.imageUrl+")"},c="ActionCard "+this.props.classNames;return this.state.hide&&(c+=" ActionCard-hide"),React.createElement("div",{ref:"ActionCard",key:this.props.name,className:c,style:b,onAnimationEnd:this.handleAnimationEnd},React.createElement("div",{className:"ActionCard-content"},React.createElement("div",{ref:"title",className:"ActionCard-title"},this.props.title),React.createElement("div",{ref:"body",className:"ActionCard-body"},this.props.body),React.createElement("div",{className:"ActionCard-actions"},a)))}}),Imgur.Elements.ActionCard.createAction=function(a,b,c){for(var d=arguments.length,e=Array(d>3?d-3:0),f=3;f<d;f++)e[f-3]=arguments[f];return{name:a,label:b,action:c,classNames:e}}}(),Namespace("Imgur.Elements"),Imgur.Elements.ApocalypseCta=React.createClass({displayName:"Elements-ApocalypseCTA",getInitialState:function(){var a="/"!==location.pathname;return a||Imgur.Util.jafoLog({event:"aprilFools2017BannerAppear",meta:{banner:this.getBannerEventName(),expandInvokedBy:"alreadyExpanded"}}),{zombieScore:this.props.zombieScore,humanScore:this.props.humanScore,collapsed:a}},getBannerEventName:function(){return Imgur.Environment.auth.team?"damageReportLearnToPlay":"zombieBattleBegunJoinFight"},toggleCta:function(){var a=!this.state.collapsed;a||Imgur.Util.jafoLog({event:"aprilFools2017BannerAppear",meta:{banner:this.getBannerEventName(),expandInvokedBy:"userManually"}}),this.setState({collapsed:a})},getMessage:function(a){var b=React.createElement("span",{key:"message",className:"apocalypse-welcome"},"The great zombie battle has begun on Imgur!");return"zombie"===a?b=React.createElement("span",{key:"message",className:"apocalypse-welcome"},"You're infected! Welcome to ",React.createElement("strong",null,React.createElement("a",{href:"/t/teamzombie"},"#TeamZombie"))):"human"===a&&(b=React.createElement("span",{key:"message",className:"apocalypse-welcome"},"Fight the infection! Welcome to ",React.createElement("strong",null,React.createElement("a",{href:"/t/teamhuman"},"#TeamHuman")))),b},renderCollapsed:function(a){return React.createElement("div",{className:"apocalypse-banner apocalypse-banner--collapsed"},React.createElement("span",{onClick:this.toggleCta,className:"icon-arrow-up apocalypse-collapse pointer"}),this.getMessage(a))},renderSignedOut:function(){return React.createElement("div",{className:"apocalypse-banner apocalypse-banner--signedout"},this.getMessage(),React.createElement("div",{className:"apocalypse-join"},React.createElement("a",{onClick:this.handleJoinTheFightClick,href:"#"},"Join the fight")))},handleJoinTheFightClick:function(a){a.preventDefault(),Imgur.Util.jafoLog({event:"aprilFools2017BannerClick",meta:{banner:this.getBannerEventName()}}),Imgur.getInstance().setInvokedBy("aprilFools2017Attempt"),window.location="//"+Imgur.Environment.host+"/register?redirect=http%3A%2F%2Fimgur.com%2Fa%2FpAH89"},renderSignedIn:function(a){var b=Math.min(Math.max(this.state.zombieScore/(this.state.zombieScore+this.state.humanScore)*100,30),70),c=100-b;return React.createElement("div",{className:"apocalypse-banner"},React.createElement("span",{onClick:this.toggleCta,className:"icon-arrow-down apocalypse-collapse pointer"}),this.getMessage(a),React.createElement("div",{className:"redgreenbar"},React.createElement("div",{className:"redgreenbar-zombie",style:{width:b+"%"}},React.createElement("span",{className:"icon-zombie-logo"})," ",Imgur.Util.numberFormat(this.state.zombieScore)),React.createElement("div",{className:"redgreenbar-bloodbar",style:{left:b+"%"}}),React.createElement("div",{className:"redgreenbar-human",style:{width:c+"%"}},React.createElement("span",{className:"icon-human-logo"})," ",Imgur.Util.numberFormat(this.state.humanScore))),React.createElement("div",{className:"apocalypse-report"},React.createElement("a",{onClick:this.handleViewDamageReportClick,href:"#"},"View Damage Report")),React.createElement("a",{className:"apocalypse-learn",onClick:this.handleLearnToPlayClick,href:"#"},"Learn how to play"))},handleViewDamageReportClick:function(a){a.preventDefault(),Imgur.Util.jafoLog({event:"aprilFools2017BannerClick",meta:{banner:this.getBannerEventName(),button:"viewDamageReport"}}),window.location="//"+Imgur.Environment.host+"/infection"},handleLearnToPlayClick:function(a){a.preventDefault(),Imgur.Util.jafoLog({event:"aprilFools2017BannerClick",meta:{banner:this.getBannerEventName(),button:"learnHowToPlay"}}),window.location="//"+Imgur.Environment.host+"/a/pAH89"},render:function(){return this.state.collapsed?this.renderCollapsed(Imgur.Environment.auth.team):Imgur.Environment.auth.team?this.renderSignedIn(Imgur.Environment.auth.team):this.renderSignedOut()}}),Namespace("Imgur"),Imgur.Jafo=Class.extend({init:function(a,b){var c=new Date;this._={attrBound:!1,attrRegex:/^\s*(\{.+\})\s*?/,chrRegex:/\@\@/g,cookieOpts:{domain:"."+Imgur.Environment.host,path:"/",expires:180},dataAttr:"data-jafo",thirdPartyLoginFlag:"third_party",imgLoc:b,legacyQueue:[],lsArrayName:"jafoData",lsAvail:!1,lsKeyName:"jafo-stor",maxBatch:2,pollDelay:800,scheduled:null,selfRefRgx:/^([^:]+:)\/\/([^.]+\.)*imgur(-dev)?\.com(\/.*)?$/,embedRgx:/(\/(a|gallery))?(\/[A-z0-9]{5,7})\/embed/,sessionFired:!1,uidCookie:"IMGURUIDJAFO",sessionTrackingCookieName:"SESSIONDATA",sessionTrackingExpirationTime:36e5,shouldFire:!0,sessionFiredCooldown:500,userDetails:{UID:null,accountId:isNaN(a)?null:a,backendCohort:isNaN(a)?null:a/4%1024,activeExperiments:[],experimentData:{},sessionId:Imgur.Environment.sid||Imgur.Environment.msid,platform:"web",source:"frontend",referrer:document.referrer,immedReferrer:document.referrer,userAgent:navigator.userAgent,version:c.getFullYear()+"."+Math.ceil(c.getMonth()/3),host:Imgur.Environment.host,firstSession:!1,secondSession:!1},el:{$body:$("body"),injectUserDetails:["activeExperiments","experimentData"]}},window.location.toString().match(this._.selfRefRgx)||(this._.shouldFire=!1),$(window).on("pushstate",_.bind(function(a){this._.userDetails.immedReferrer=a.previousState.url},this)),!this._getSessionTrackingData()&&$.cookie(this._.uidCookie)?this._setSessionTrackingData({sessionCount:3,sessionTime:Date.now()}):this._updateSessionTrackingData();var d=$.cookie(this._.uidCookie);return d||(d=this._fp()),this._.userDetails.UID=d,$.cookie(this._.uidCookie,d,this._.cookieOpts),this._.lsAvail=this._canUseLs(),$(document).ready(_.bind(function(){this._sessionStart(),this._schedPoll()},this)),$(document.body).on("submit","form",_.bind(function(a){if(a.target.method&&"POST"===a.target.method.toUpperCase()){var b=$(a.target);_.each(this._.el.injectUserDetails,function(a){var c="_jafo["+a+"]",d=b.find("input").filter(function(a,b){return b.name===c});d.length||(d=$('<input type="hidden"/>').attr("name",c),d.appendTo(b));var e=this._.userDetails[a],f="object"==typeof e?JSON.stringify(e):e;d.val(f)},this)}},this)),this},_getSessionTrackingData:function(){var a;try{a=JSON.parse($.cookie(this._.sessionTrackingCookieName))}catch(b){}return a},_setSessionTrackingData:function(a){this._.userDetails.firstSession=1===a.sessionCount,this._.userDetails.secondSession=2===a.sessionCount,$.cookie(this._.sessionTrackingCookieName,JSON.stringify(a),this._.cookieOpts)},_updateSessionTrackingData:function(){var a=this._getSessionTrackingData();if(a&&!isNaN(parseInt(a.sessionCount))&&!isNaN(parseInt(a.sessionTime))&&a.sessionCount>0){var b=Date.now();b-a.sessionTime>this._.sessionTrackingExpirationTime&&a.sessionCount++,a.sessionTime=b}else a={sessionCount:1,sessionTime:Date.now()};this._setSessionTrackingData(a)},batch:function(){var a,b,c,d=arguments.length,e=[];for(b=0;b<d;b++)if("object"==typeof arguments[b]){a=arguments[b],this._isArr(a)&&(a=a.pop());try{c=JSON.stringify(a),e.push(this._parmLabel(b)+"="+encodeURIComponent(c))}catch(f){console.error("Cannot encode jafo batch parm.",[f,arguments[b]])}}else"string"==typeof arguments[b]&&e.push(this._parmLabel(b)+"="+encodeURIComponent(arguments[b]));return e.join("&")},bindDataAttr:function(){var a;this._.attrBound||(a="*["+this._.dataAttr+'*=":"]',this._.el.$body.on("click mouseup",a,_.bind(this._handleAttrClick,this)),this._.attrBound=!0)},_canUseLs:function(){try{return localStorage.setItem("testitem",0),localStorage.removeItem("testitem"),!0}catch(a){}return!1},directFire:function(a,b){var c,d;this._.shouldFire&&(d=this._mergeData(a),this.consoleDebug(d),c=this._.imgLoc+"?"+this.batch([d]),c&&this._fire(c,b))},_fire:function(a,b){if(this._.imgLoc){var c=document.createElement("img");"function"==typeof b&&$(c).on("load",b),this._updateSessionTrackingData(),c.src=a}},_fp:function(){var a,b=($.cookie(""),navigator),c=window.screen,d="";for(var e in b)"string"!=typeof b[e]&&isNaN(b[e])||(d+=""+b[e]);a=b.plugins;for(var f=0;f<a.length;f++)d+=this._nav2str(a[e]);return"object"==typeof c&&(d+=this._nav2str(c)),this._sha256(d+(new Date).toISOString())},_fromLegacy:function(){return this._.legacyQueue},_fromLs:function(a){var b,c,d=[];try{b=localStorage.getItem(this._.lsKeyName),b&&(c=JSON.parse(b),"object"==typeof c&&c[this._.lsArrayName]&&(d=c[this._.lsArrayName]),a&&localStorage.removeItem(this._.lsKeyName))}catch(e){console.err("Error reading jafo local storage data.",e)}return this._isArr(d)?d:[]},_getQueue:function(){return this._.lsAvail?this._fromLs():this._fromLegacy()},_handleAttrClick:function(a){var b,c,d,e=$(a.currentTarget);if(("click"===a.type||"mouseup"===a.type&&2===a.which)&&e.length){if(d=(e.attr(this._.dataAttr)+"").match(this._.attrRegex),d&&d.length>1)try{c=(""+d[1]).replace(this._.chrRegex,'"'),b=JSON.parse(c)}catch(f){console.error("Element has invalid analytics data attribute!",[a.target,f])}b&&this.logAction(b)}},_isArr:function(a){return"[object Array]"===Object.prototype.toString.call(a)},_mergeData:function(a){var b,c;return"object"==typeof a&&"undefined"==typeof a.action&&"string"==typeof a.event?(c=new Date,b=_.extend({},this._.userDetails),b.action=_.extend({},a),b.timestamp=c.getTime(),b.location=document.location.toString(),b):void console.error("Invalid jafo action.",a)},_nav2str:function(a){var b=[];if("object"!=typeof a)return""+a;for(var c in a)a.hasOwnProperty(c)&&(this._isArr(a[c])?b.push.apply(b,a[c].map(function(a){return c+"[]="+a})):"object"==typeof a[c]&&a[c]!==a?b.push(c+"="+this._nav2str(a[c])):"function"!=typeof a[c]&&b.push(c+"="+a[c]));return b.length>0&&b.join("&")},_parmLabel:function(a){var b=a%26,c=a/26|0,d=String.fromCharCode(97+b);return c>0?this._parmLabel(c-1)+d:d},_pollQueue:function(){var a,b=this._sliceQueue(this._.maxBatch);return this._.scheduled&&(clearTimeout(this._.scheduled),this._.scheduled=null),this._isArr(b)&&b.length&&(a=this._.imgLoc+"?"+this.batch.apply(this,b),this._fire(a)),this._schedPoll(),a},_queue:function(a){return this._.lsAvail&&this._queueLs(a),this._queueLegacy(a),this._pollQueue()},_queueLs:function(a){var b=this._fromLs(),c=_.extend({},a);return b.push(c),this._saveQueueLs(b),c},_queueLegacy:function(a){var b=_.extend({},a);return this._.legacyQueue.push(b),b},_sessionStart:function(){var a=!1,b=!1,c=!1;this._.sessionFired||(Imgur.Util.checkInIframe()?this._setSessionHasFired():(a=this._.selfRefRgx.test(this._.userDetails.referrer),c=a&&this._.embedRgx.test(this._.userDetails.referrer),b=Imgur.Util.getQueryParams(window.location.search).hasOwnProperty(this._.thirdPartyLoginFlag),c||!a&&!b?(this.directFire({event:"sessionStart",meta:{language:navigator.language,screenResolution:window.screen.width+"x"+window.screen.height,timezone:60*(new Date).getTimezoneOffset(),secure:"https:"===document.location.protocol}}),setTimeout(_.bind(function(){this._setSessionHasFired(),this._pollQueue()},this),this._.sessionFiredCooldown)):this._setSessionHasFired()))},_setSessionHasFired:function(){this._.sessionFired=!0},_sha256:function(a){function b(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function c(a,b){return a>>>b|a<<32-b}function d(a,b){return a>>>b}function e(a,b,c){return a&b^~a&c}function f(a,b,c){return a&b^a&c^b&c}function g(a){return c(a,2)^c(a,13)^c(a,22)}function h(a){return c(a,6)^c(a,11)^c(a,25)}function i(a){return c(a,7)^c(a,18)^d(a,3)}function j(a){return c(a,17)^c(a,19)^d(a,10)}function k(a,c){var d,k,l,m,n,o,p,q,r,s,t,u,v=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),w=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);a[c>>5]|=128<<24-c%32,a[(c+64>>9<<4)+15]=c;for(var r=0;r<a.length;r+=16){d=w[0],k=w[1],l=w[2],m=w[3],n=w[4],o=w[5],p=w[6],q=w[7];for(var s=0;s<64;s++)s<16?x[s]=a[s+r]:x[s]=b(b(b(j(x[s-2]),x[s-7]),i(x[s-15])),x[s-16]),t=b(b(b(b(q,h(n)),e(n,o,p)),v[s]),x[s]),u=b(g(d),f(d,k,l)),q=p,p=o,o=n,n=b(m,t),m=l,l=k,k=d,d=b(t,u);w[0]=b(d,w[0]),w[1]=b(k,w[1]),w[2]=b(l,w[2]),w[3]=b(m,w[3]),w[4]=b(n,w[4]),w[5]=b(o,w[5]),w[6]=b(p,w[6]),w[7]=b(q,w[7])}return w}function l(a){for(var b=Array(),c=(1<<o)-1,d=0;d<a.length*o;d+=o)b[d>>5]|=(a.charCodeAt(d/o)&c)<<24-d%32;return b}function m(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b}function n(a){for(var b=p?"0123456789ABCDEF":"0123456789abcdef",c="",d=0;d<4*a.length;d++)c+=b.charAt(a[d>>2]>>8*(3-d%4)+4&15)+b.charAt(a[d>>2]>>8*(3-d%4)&15);return c}var o=8,p=0;return a=m(a),n(k(l(a),a.length*o))},_saveQueueLs:function(a){var b=_.extend([],a),c={};if(this._isArr(b)){c[this._.lsArrayName]=b;try{localStorage.setItem(this._.lsKeyName,JSON.stringify(c))}catch(d){console.error("Error saving jafo local storage.",d)}return b}},_schedPoll:function(){var a=this._getQueue();return!this._.scheduled&&a.length>0&&(this._.scheduled=setTimeout(_.bind(this._pollQueue,this),this._.pollDelay)),this._.scheduled},_sliceQueue:function(a){return!!this._.sessionFired&&(this._.lsAvail?this._sliceQueueLs(a):this._sliceQueueLegacy(a))},_sliceQueueLegacy:function(a){var b,c=this._.legacyQueue,d=[];if(!isNaN(a)&&this._isArr(c))for(b=0;b<a;b++)c.length&&d.push(c.shift());return d},_sliceQueueLs:function(a){var b,c=this._getQueue(),d=[];if(!isNaN(a)&&this._isArr(c)){for(b=0;b<a;b++)c.length&&d.push(c.shift());this._saveQueueLs(c)}return d},consoleStyles:{standard:"color:auto;",gray:"color:#1B2B34;",red:"color:#EC5f67;",orange:"color:#F99157;",yellow:"color:#FAC863;",green:"color:#99C794;",teal:"color:#5FB3B3;",blue:"color:#6699CC;",purple:"color:#C594C5;",brown:"color:#AB7967;",weightBold:"font-weight: bold;",weightNormal:"font-weight: normal;"},consoleDebug:function(a){if(window.localStorage&&localStorage.getItem("jafo-debug")){var b=[],c=a.activeExperiments||[],d=a.event||a.action.event,e=a.meta||a.action.meta,f=c.map(function(a){return"%c"+a.expID+":%c"+a.variation}).join("%c | ");b.push("%cJAFO EVENT: "+f+" %c"+d),b.push(this.consoleStyles.weightBold+this.consoleStyles.teal),c.forEach(function(){b.push(this.consoleStyles.weightBold+this.consoleStyles.red),b.push(this.consoleStyles.weightNormal+this.consoleStyles.orange),b.push(this.consoleStyles.weightBold+this.consoleStyles.gray)}.bind(this)),c.length>0&&b.pop(),b.push(this.consoleStyles.weightBold+this.consoleStyles.green),b.push(e),console.log.apply(this,b)}},logAction:function(a){if(this._.shouldFire){var b=this._mergeData(a);if("object"==typeof b)return this.consoleDebug(b),this._queue(b)}return!1},registerExperiment:function(a,b){this._.userDetails.activeExperiments.push({expID:a,variation:b})},registerExperimentData:function(a,b){this._.userDetails.experimentData[a]||(this._.userDetails.experimentData[a]={}),this._.userDetails.experimentData[a]=$.extend(this._.userDetails.experimentData[a],b)}});//# sourceMappingURL=global.js.map